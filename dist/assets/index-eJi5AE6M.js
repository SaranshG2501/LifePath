var JT=t=>{throw TypeError(t)};var Kg=(t,e,n)=>e.has(t)||JT("Cannot "+n);var F=(t,e,n)=>(Kg(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?JT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),de=(t,e,n,s)=>(Kg(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(Kg(t,e,"access private method"),n);var Ih=(t,e,n,s)=>({set _(r){de(t,e,r,n)},get _(){return F(t,e,s)}});function A5(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function DR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PR={exports:{}},rp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C5=Symbol.for("react.transitional.element"),R5=Symbol.for("react.fragment");function jR(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:C5,type:t,key:s,ref:e!==void 0?e:null,props:n}}rp.Fragment=R5;rp.jsx=jR;rp.jsxs=jR;PR.exports=rp;var c=PR.exports,kR={exports:{}},ip={},MR={exports:{}},OR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,G){var q=L.length;L.push(G);e:for(;0<q;){var X=q-1>>>1,Q=L[X];if(0<r(Q,G))L[X]=G,L[q]=Q,q=X;else break e}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var G=L[0],q=L.pop();if(q!==G){L[0]=q;e:for(var X=0,Q=L.length,le=Q>>>1;X<le;){var ue=2*(X+1)-1,Z=L[ue],je=ue+1,vt=L[je];if(0>r(Z,q))je<Q&&0>r(vt,Z)?(L[X]=vt,L[je]=q,X=je):(L[X]=Z,L[ue]=q,X=ue);else if(je<Q&&0>r(vt,q))L[X]=vt,L[je]=q,X=je;else break e}}return G}function r(L,G){var q=L.sortIndex-G.sortIndex;return q!==0?q:L.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,f=null,m=3,p=!1,E=!1,w=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function C(L){for(var G=n(u);G!==null;){if(G.callback===null)s(u);else if(G.startTime<=L)s(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(u)}}function P(L){if(w=!1,C(L),!E)if(n(l)!==null)E=!0,M||(M=!0,k());else{var G=n(u);G!==null&&$(P,G.startTime-L)}}var M=!1,A=-1,S=5,N=-1;function R(){return x?!0:!(t.unstable_now()-N<S)}function j(){if(x=!1,M){var L=t.unstable_now();N=L;var G=!0;try{e:{E=!1,w&&(w=!1,b(A),A=-1),p=!0;var q=m;try{t:{for(C(L),f=n(l);f!==null&&!(f.expirationTime>L&&R());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var Q=X(f.expirationTime<=L);if(L=t.unstable_now(),typeof Q=="function"){f.callback=Q,C(L),G=!0;break t}f===n(l)&&s(l),C(L)}else s(l);f=n(l)}if(f!==null)G=!0;else{var le=n(u);le!==null&&$(P,le.startTime-L),G=!1}}break e}finally{f=null,m=q,p=!1}G=void 0}}finally{G?k():M=!1}}}var k;if(typeof _=="function")k=function(){_(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,H=I.port2;I.port1.onmessage=j,k=function(){H.postMessage(null)}}else k=function(){v(j,0)};function $(L,G){A=v(function(){L(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var q=m;m=G;try{return L()}finally{m=q}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var q=m;m=L;try{return G()}finally{m=q}},t.unstable_scheduleCallback=function(L,G,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,L){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,L={id:h++,callback:G,priorityLevel:L,startTime:q,expirationTime:Q,sortIndex:-1},q>X?(L.sortIndex=q,e(u,L),n(l)===null&&L===n(u)&&(w?(b(A),A=-1):w=!0,$(P,q-X))):(L.sortIndex=Q,e(l,L),E||p||(E=!0,M||(M=!0,k()))),L},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(L){var G=m;return function(){var q=m;m=G;try{return L.apply(this,arguments)}finally{m=q}}}})(OR);MR.exports=OR;var N5=MR.exports,VR={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab=Symbol.for("react.transitional.element"),I5=Symbol.for("react.portal"),D5=Symbol.for("react.fragment"),P5=Symbol.for("react.strict_mode"),j5=Symbol.for("react.profiler"),k5=Symbol.for("react.consumer"),M5=Symbol.for("react.context"),O5=Symbol.for("react.forward_ref"),V5=Symbol.for("react.suspense"),L5=Symbol.for("react.memo"),LR=Symbol.for("react.lazy"),eE=Symbol.iterator;function U5(t){return t===null||typeof t!="object"?null:(t=eE&&t[eE]||t["@@iterator"],typeof t=="function"?t:null)}var UR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FR=Object.assign,BR={};function Wl(t,e,n){this.props=t,this.context=e,this.refs=BR,this.updater=n||UR}Wl.prototype.isReactComponent={};Wl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zR(){}zR.prototype=Wl.prototype;function Cb(t,e,n){this.props=t,this.context=e,this.refs=BR,this.updater=n||UR}var Rb=Cb.prototype=new zR;Rb.constructor=Cb;FR(Rb,Wl.prototype);Rb.isPureReactComponent=!0;var tE=Array.isArray,Ke={H:null,A:null,T:null,S:null,V:null},HR=Object.prototype.hasOwnProperty;function Nb(t,e,n,s,r,i){return n=i.ref,{$$typeof:Ab,type:t,key:e,ref:n!==void 0?n:null,props:i}}function F5(t,e){return Nb(t.type,e,void 0,void 0,void 0,t.props)}function Ib(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ab}function B5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nE=/\/+/g;function Wg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B5(""+t.key):e.toString(36)}function sE(){}function z5(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(sE,sE):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function wo(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ab:case I5:a=!0;break;case LR:return a=t._init,wo(a(t._payload),e,n,s,r)}}if(a)return r=r(t),a=s===""?"."+Wg(t,0):s,tE(r)?(n="",a!=null&&(n=a.replace(nE,"$&/")+"/"),wo(r,e,n,"",function(u){return u})):r!=null&&(Ib(r)&&(r=F5(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(nE,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=s===""?".":s+":";if(tE(t))for(var l=0;l<t.length;l++)s=t[l],i=o+Wg(s,l),a+=wo(s,e,n,i,r);else if(l=U5(t),typeof l=="function")for(t=l.call(t),l=0;!(s=t.next()).done;)s=s.value,i=o+Wg(s,l++),a+=wo(s,e,n,i,r);else if(i==="object"){if(typeof t.then=="function")return wo(z5(t),e,n,s,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Dh(t,e,n){if(t==null)return t;var s=[],r=0;return wo(t,s,"","",function(i){return e.call(n,i,r++)}),s}function H5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function q5(){}ge.Children={map:Dh,forEach:function(t,e,n){Dh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dh(t,function(){e++}),e},toArray:function(t){return Dh(t,function(e){return e})||[]},only:function(t){if(!Ib(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Wl;ge.Fragment=D5;ge.Profiler=j5;ge.PureComponent=Cb;ge.StrictMode=P5;ge.Suspense=V5;ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ke;ge.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ke.H.useMemoCache(t)}};ge.cache=function(t){return function(){return t.apply(null,arguments)}};ge.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=FR({},t.props),r=t.key,i=void 0;if(e!=null)for(a in e.ref!==void 0&&(i=void 0),e.key!==void 0&&(r=""+e.key),e)!HR.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(s[a]=e[a]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}return Nb(t.type,r,void 0,void 0,i,s)};ge.createContext=function(t){return t={$$typeof:M5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:k5,_context:t},t};ge.createElement=function(t,e,n){var s,r={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)HR.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return Nb(t,i,void 0,void 0,null,r)};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:O5,render:t}};ge.isValidElement=Ib;ge.lazy=function(t){return{$$typeof:LR,_payload:{_status:-1,_result:t},_init:H5}};ge.memo=function(t,e){return{$$typeof:L5,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Ke.T,n={};Ke.T=n;try{var s=t(),r=Ke.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(q5,rE)}catch(i){rE(i)}finally{Ke.T=e}};ge.unstable_useCacheRefresh=function(){return Ke.H.useCacheRefresh()};ge.use=function(t){return Ke.H.use(t)};ge.useActionState=function(t,e,n){return Ke.H.useActionState(t,e,n)};ge.useCallback=function(t,e){return Ke.H.useCallback(t,e)};ge.useContext=function(t){return Ke.H.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t,e){return Ke.H.useDeferredValue(t,e)};ge.useEffect=function(t,e,n){var s=Ke.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(t,e)};ge.useId=function(){return Ke.H.useId()};ge.useImperativeHandle=function(t,e,n){return Ke.H.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Ke.H.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Ke.H.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Ke.H.useMemo(t,e)};ge.useOptimistic=function(t,e){return Ke.H.useOptimistic(t,e)};ge.useReducer=function(t,e,n){return Ke.H.useReducer(t,e,n)};ge.useRef=function(t){return Ke.H.useRef(t)};ge.useState=function(t){return Ke.H.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Ke.H.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Ke.H.useTransition()};ge.version="19.1.0";VR.exports=ge;var y=VR.exports;const Zr=DR(y),Db=A5({__proto__:null,default:Zr},[y]);var qR={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G5=y;function GR(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Yr(){}var ln={d:{f:Yr,r:function(){throw Error(GR(522))},D:Yr,C:Yr,L:Yr,m:Yr,X:Yr,S:Yr,M:Yr},p:0,findDOMNode:null},$5=Symbol.for("react.portal");function Y5(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$5,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var ru=G5.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ap(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ln;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(GR(299));return Y5(t,e,null,n)};un.flushSync=function(t){var e=ru.T,n=ln.p;try{if(ru.T=null,ln.p=2,t)return t()}finally{ru.T=e,ln.p=n,ln.d.f()}};un.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,ln.d.C(t,e))};un.prefetchDNS=function(t){typeof t=="string"&&ln.d.D(t)};un.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=ap(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?ln.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):n==="script"&&ln.d.X(t,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};un.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=ap(e.as,e.crossOrigin);ln.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&ln.d.M(t)};un.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=ap(n,e.crossOrigin);ln.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};un.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=ap(e.as,e.crossOrigin);ln.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else ln.d.m(t)};un.requestFormReset=function(t){ln.d.r(t)};un.unstable_batchedUpdates=function(t,e){return t(e)};un.useFormState=function(t,e,n){return ru.H.useFormState(t,e,n)};un.useFormStatus=function(){return ru.H.useHostTransitionStatus()};un.version="19.1.0";function $R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($R)}catch(t){console.error(t)}}$R(),qR.exports=un;var Td=qR.exports;const K5=DR(Td);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=N5,YR=y,W5=Td;function z(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function KR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ed(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iE(t){if(Ed(t)!==t)throw Error(z(188))}function Q5(t){var e=t.alternate;if(!e){if(e=Ed(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return iE(r),t;if(i===s)return iE(r),e;i=i.sibling}throw Error(z(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,s=i;break}if(o===s){a=!0,s=r,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,s=r;break}if(o===s){a=!0,s=i,n=r;break}o=o.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==s)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function QR(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=QR(t),e!==null)return e;t=t.sibling}return null}var $e=Object.assign,X5=Symbol.for("react.element"),Ph=Symbol.for("react.transitional.element"),Yc=Symbol.for("react.portal"),Io=Symbol.for("react.fragment"),XR=Symbol.for("react.strict_mode"),bv=Symbol.for("react.profiler"),Z5=Symbol.for("react.provider"),ZR=Symbol.for("react.consumer"),pr=Symbol.for("react.context"),Pb=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),wv=Symbol.for("react.suspense_list"),jb=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),_v=Symbol.for("react.activity"),J5=Symbol.for("react.memo_cache_sentinel"),aE=Symbol.iterator;function Oc(t){return t===null||typeof t!="object"?null:(t=aE&&t[aE]||t["@@iterator"],typeof t=="function"?t:null)}var eL=Symbol.for("react.client.reference");function Tv(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===eL?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Io:return"Fragment";case bv:return"Profiler";case XR:return"StrictMode";case xv:return"Suspense";case wv:return"SuspenseList";case _v:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Yc:return"Portal";case pr:return(t.displayName||"Context")+".Provider";case ZR:return(t._context.displayName||"Context")+".Consumer";case Pb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jb:return e=t.displayName||null,e!==null?e:Tv(t.type)||"Memo";case ri:e=t._payload,t=t._init;try{return Tv(t(e))}catch{}}return null}var Kc=Array.isArray,oe=YR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=W5.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ia={pending:!1,data:null,method:null,action:null},Ev=[],Do=-1;function Xs(t){return{current:t}}function Dt(t){0>Do||(t.current=Ev[Do],Ev[Do]=null,Do--)}function We(t,e){Do++,Ev[Do]=t.current,t.current=e}var ks=Xs(null),Pu=Xs(null),Si=Xs(null),Bf=Xs(null);function zf(t,e){switch(We(Si,e),We(Pu,t),We(ks,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?dS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=dS(e),t=pI(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Dt(ks),We(ks,t)}function xl(){Dt(ks),Dt(Pu),Dt(Si)}function Sv(t){t.memoizedState!==null&&We(Bf,t);var e=ks.current,n=pI(e,t.type);e!==n&&(We(Pu,t),We(ks,n))}function Hf(t){Pu.current===t&&(Dt(ks),Dt(Pu)),Bf.current===t&&(Dt(Bf),zu._currentValue=Ia)}var Av=Object.prototype.hasOwnProperty,kb=Et.unstable_scheduleCallback,Qg=Et.unstable_cancelCallback,tL=Et.unstable_shouldYield,nL=Et.unstable_requestPaint,Ms=Et.unstable_now,sL=Et.unstable_getCurrentPriorityLevel,JR=Et.unstable_ImmediatePriority,eN=Et.unstable_UserBlockingPriority,qf=Et.unstable_NormalPriority,rL=Et.unstable_LowPriority,tN=Et.unstable_IdlePriority,iL=Et.log,aL=Et.unstable_setDisableYieldValue,Sd=null,Nn=null;function vi(t){if(typeof iL=="function"&&aL(t),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(Sd,t)}catch{}}var In=Math.clz32?Math.clz32:cL,oL=Math.log,lL=Math.LN2;function cL(t){return t>>>=0,t===0?32:31-(oL(t)/lL|0)|0}var jh=256,kh=4194304;function pa(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function op(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~i,s!==0?r=pa(s):(a&=o,a!==0?r=pa(a):n||(n=o&~t,n!==0&&(r=pa(n))))):(o=s&~i,o!==0?r=pa(o):a!==0?r=pa(a):n||(n=s&~t,n!==0&&(r=pa(n)))),r===0?0:e!==0&&e!==r&&!(e&i)&&(i=r&-r,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:r}function Ad(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function uL(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nN(){var t=jh;return jh<<=1,!(jh&4194048)&&(jh=256),t}function sN(){var t=kh;return kh<<=1,!(kh&62914560)&&(kh=4194304),t}function Xg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cd(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function dL(t,e,n,s,r,i){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,u=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-In(n),f=1<<h;o[h]=0,l[h]=-1;var m=u[h];if(m!==null)for(u[h]=null,h=0;h<m.length;h++){var p=m[h];p!==null&&(p.lane&=-536870913)}n&=~f}s!==0&&rN(t,s,0),i!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=i&~(a&~e))}function rN(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-In(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&4194090}function iN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-In(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}function Mb(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ob(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function aN(){var t=Pe.p;return t!==0?t:(t=window.event,t===void 0?32:SI(t.type))}function hL(t,e){var n=Pe.p;try{return Pe.p=t,e()}finally{Pe.p=n}}var Zi=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Zi,bn="__reactProps$"+Zi,Ql="__reactContainer$"+Zi,Cv="__reactEvents$"+Zi,fL="__reactListeners$"+Zi,mL="__reactHandles$"+Zi,oE="__reactResources$"+Zi,Rd="__reactMarker$"+Zi;function Vb(t){delete t[Qt],delete t[bn],delete t[Cv],delete t[fL],delete t[mL]}function Po(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ql]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mS(t);t!==null;){if(n=t[Qt])return n;t=mS(t)}return e}t=n,n=t.parentNode}return null}function Xl(t){if(t=t[Qt]||t[Ql]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Wc(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(z(33))}function Ko(t){var e=t[oE];return e||(e=t[oE]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Rt(t){t[Rd]=!0}var oN=new Set,lN={};function Xa(t,e){wl(t,e),wl(t+"Capture",e)}function wl(t,e){for(lN[t]=e,t=0;t<e.length;t++)oN.add(e[t])}var pL=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lE={},cE={};function gL(t){return Av.call(cE,t)?!0:Av.call(lE,t)?!1:pL.test(t)?cE[t]=!0:(lE[t]=!0,!1)}function uf(t,e,n){if(gL(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Mh(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function or(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}var Zg,uE;function _o(t){if(Zg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zg=e&&e[1]||"",uE=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zg+t+uE}var Jg=!1;function ey(t,e){if(!t||Jg)return"";Jg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(p){var m=p}Reflect.construct(t,[],f)}else{try{f.call()}catch(p){m=p}t.call(f.prototype)}}else{try{throw Error()}catch(p){m=p}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(p){if(p&&m&&typeof p.stack=="string")return[p.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split(`
`),u=o.split(`
`);for(r=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===l.length||r===u.length)for(s=l.length-1,r=u.length-1;1<=s&&0<=r&&l[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(l[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||l[s]!==u[r]){var h=`
`+l[s].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=s&&0<=r);break}}}finally{Jg=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?_o(n):""}function yL(t){switch(t.tag){case 26:case 27:case 5:return _o(t.type);case 16:return _o("Lazy");case 13:return _o("Suspense");case 19:return _o("SuspenseList");case 0:case 15:return ey(t.type,!1);case 11:return ey(t.type.render,!1);case 1:return ey(t.type,!0);case 31:return _o("Activity");default:return""}}function dE(t){try{var e="";do e+=yL(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function qn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vL(t){var e=cN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gf(t){t._valueTracker||(t._valueTracker=vL(t))}function uN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=cN(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function $f(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var bL=/[\n"\\]/g;function Yn(t){return t.replace(bL,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Rv(t,e,n,s,r,i,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+qn(e)):t.value!==""+qn(e)&&(t.value=""+qn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Nv(t,a,qn(e)):n!=null?Nv(t,a,qn(n)):s!=null&&t.removeAttribute("value"),r==null&&i!=null&&(t.defaultChecked=!!i),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+qn(o):t.removeAttribute("name")}function dN(t,e,n,s,r,i,a,o){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null))return;n=n!=null?""+qn(n):"",e=e!=null?""+qn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function Nv(t,e,n){e==="number"&&$f(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Wo(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+qn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function hN(t,e,n){if(e!=null&&(e=""+qn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+qn(n):""}function fN(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(z(92));if(Kc(s)){if(1<s.length)throw Error(z(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=qn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s)}function _l(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hE(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||xL.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function mN(t,e,n){if(e!=null&&typeof e!="object")throw Error(z(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var r in e)s=e[r],e.hasOwnProperty(r)&&n[r]!==s&&hE(t,r,s)}else for(var i in e)e.hasOwnProperty(i)&&hE(t,i,e[i])}function Lb(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_L=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function df(t){return _L.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Iv=null;function Ub(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jo=null,Qo=null;function fE(t){var e=Xl(t);if(e&&(t=e.stateNode)){var n=t[bn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Rv(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=s[bn]||null;if(!r)throw Error(z(90));Rv(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&uN(s)}break e;case"textarea":hN(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Wo(t,!!n.multiple,e,!1)}}}var ty=!1;function pN(t,e,n){if(ty)return t(e,n);ty=!0;try{var s=t(e);return s}finally{if(ty=!1,(jo!==null||Qo!==null)&&(yp(),jo&&(e=jo,t=Qo,Qo=jo=null,fE(e),t)))for(e=0;e<t.length;e++)fE(t[e])}}function ju(t,e){var n=t.stateNode;if(n===null)return null;var s=n[bn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dv=!1;if(Cr)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){Dv=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{Dv=!1}var bi=null,Fb=null,hf=null;function gN(){if(hf)return hf;var t,e=Fb,n=e.length,s,r="value"in bi?bi.value:bi.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===r[i-s];s++);return hf=r.slice(t,1<s?1-s:void 0)}function ff(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oh(){return!0}function mE(){return!1}function xn(t){function e(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oh:mE,this.isPropagationStopped=mE,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oh)},persist:function(){},isPersistent:Oh}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lp=xn(Za),Nd=$e({},Za,{view:0,detail:0}),TL=xn(Nd),ny,sy,Lc,cp=$e({},Nd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lc&&(Lc&&t.type==="mousemove"?(ny=t.screenX-Lc.screenX,sy=t.screenY-Lc.screenY):sy=ny=0,Lc=t),ny)},movementY:function(t){return"movementY"in t?t.movementY:sy}}),pE=xn(cp),EL=$e({},cp,{dataTransfer:0}),SL=xn(EL),AL=$e({},Nd,{relatedTarget:0}),ry=xn(AL),CL=$e({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),RL=xn(CL),NL=$e({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IL=xn(NL),DL=$e({},Za,{data:0}),gE=xn(DL),PL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ML(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kL[t])?!!e[t]:!1}function Bb(){return ML}var OL=$e({},Nd,{key:function(t){if(t.key){var e=PL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ff(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bb,charCode:function(t){return t.type==="keypress"?ff(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ff(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VL=xn(OL),LL=$e({},cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yE=xn(LL),UL=$e({},Nd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bb}),FL=xn(UL),BL=$e({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),zL=xn(BL),HL=$e({},cp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qL=xn(HL),GL=$e({},Za,{newState:0,oldState:0}),$L=xn(GL),YL=[9,13,27,32],zb=Cr&&"CompositionEvent"in window,iu=null;Cr&&"documentMode"in document&&(iu=document.documentMode);var KL=Cr&&"TextEvent"in window&&!iu,yN=Cr&&(!zb||iu&&8<iu&&11>=iu),vE=" ",bE=!1;function vN(t,e){switch(t){case"keyup":return YL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function WL(t,e){switch(t){case"compositionend":return bN(e);case"keypress":return e.which!==32?null:(bE=!0,vE);case"textInput":return t=e.data,t===vE&&bE?null:t;default:return null}}function QL(t,e){if(ko)return t==="compositionend"||!zb&&vN(t,e)?(t=gN(),hf=Fb=bi=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yN&&e.locale!=="ko"?null:e.data;default:return null}}var XL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XL[t.type]:e==="textarea"}function xN(t,e,n,s){jo?Qo?Qo.push(s):Qo=[s]:jo=s,e=um(e,"onChange"),0<e.length&&(n=new lp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var au=null,ku=null;function ZL(t){hI(t,0)}function up(t){var e=Wc(t);if(uN(e))return t}function wE(t,e){if(t==="change")return e}var wN=!1;if(Cr){var iy;if(Cr){var ay="oninput"in document;if(!ay){var _E=document.createElement("div");_E.setAttribute("oninput","return;"),ay=typeof _E.oninput=="function"}iy=ay}else iy=!1;wN=iy&&(!document.documentMode||9<document.documentMode)}function TE(){au&&(au.detachEvent("onpropertychange",_N),ku=au=null)}function _N(t){if(t.propertyName==="value"&&up(ku)){var e=[];xN(e,ku,t,Ub(t)),pN(ZL,e)}}function JL(t,e,n){t==="focusin"?(TE(),au=e,ku=n,au.attachEvent("onpropertychange",_N)):t==="focusout"&&TE()}function e3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return up(ku)}function t3(t,e){if(t==="click")return up(e)}function n3(t,e){if(t==="input"||t==="change")return up(e)}function s3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var On=typeof Object.is=="function"?Object.is:s3;function Mu(t,e){if(On(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Av.call(e,r)||!On(t[r],e[r]))return!1}return!0}function EE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SE(t,e){var n=EE(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=EE(n)}}function TN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function EN(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=$f(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$f(t.document)}return e}function Hb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var r3=Cr&&"documentMode"in document&&11>=document.documentMode,Mo=null,Pv=null,ou=null,jv=!1;function AE(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jv||Mo==null||Mo!==$f(s)||(s=Mo,"selectionStart"in s&&Hb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ou&&Mu(ou,s)||(ou=s,s=um(Pv,"onSelect"),0<s.length&&(e=new lp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Mo)))}function fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oo={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionrun:fa("Transition","TransitionRun"),transitionstart:fa("Transition","TransitionStart"),transitioncancel:fa("Transition","TransitionCancel"),transitionend:fa("Transition","TransitionEnd")},oy={},SN={};Cr&&(SN=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Ja(t){if(oy[t])return oy[t];if(!Oo[t])return t;var e=Oo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in SN)return oy[t]=e[n];return t}var AN=Ja("animationend"),CN=Ja("animationiteration"),RN=Ja("animationstart"),i3=Ja("transitionrun"),a3=Ja("transitionstart"),o3=Ja("transitioncancel"),NN=Ja("transitionend"),IN=new Map,kv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kv.push("scrollEnd");function ws(t,e){IN.set(t,e),Xa(e,[t])}var CE=new WeakMap;function Kn(t,e){if(typeof t=="object"&&t!==null){var n=CE.get(t);return n!==void 0?n:(e={value:t,source:e,stack:dE(e)},CE.set(t,e),e)}return{value:t,source:e,stack:dE(e)}}var Hn=[],Vo=0,qb=0;function dp(){for(var t=Vo,e=qb=Vo=0;e<t;){var n=Hn[e];Hn[e++]=null;var s=Hn[e];Hn[e++]=null;var r=Hn[e];Hn[e++]=null;var i=Hn[e];if(Hn[e++]=null,s!==null&&r!==null){var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}i!==0&&DN(n,r,i)}}function hp(t,e,n,s){Hn[Vo++]=t,Hn[Vo++]=e,Hn[Vo++]=n,Hn[Vo++]=s,qb|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Gb(t,e,n,s){return hp(t,e,n,s),Yf(t)}function Zl(t,e){return hp(t,null,null,e),Yf(t)}function DN(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var r=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(r=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,r&&e!==null&&(r=31-In(n),t=i.hiddenUpdates,s=t[r],s===null?t[r]=[e]:s.push(e),e.lane=n|536870912),i):null}function Yf(t){if(50<yu)throw yu=0,t0=null,Error(z(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Lo={};function l3(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,s){return new l3(t,e,n,s)}function $b(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tr(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function PN(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function mf(t,e,n,s,r,i){var a=0;if(s=t,typeof t=="function")$b(t)&&(a=1);else if(typeof t=="string")a=u6(t,n,ks.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case _v:return t=An(31,n,e,r),t.elementType=_v,t.lanes=i,t;case Io:return Da(n.children,r,i,e);case XR:a=8,r|=24;break;case bv:return t=An(12,n,e,r|2),t.elementType=bv,t.lanes=i,t;case xv:return t=An(13,n,e,r),t.elementType=xv,t.lanes=i,t;case wv:return t=An(19,n,e,r),t.elementType=wv,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z5:case pr:a=10;break e;case ZR:a=9;break e;case Pb:a=11;break e;case jb:a=14;break e;case ri:a=16,s=null;break e}a=29,n=Error(z(130,t===null?"null":typeof t,"")),s=null}return e=An(a,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Da(t,e,n,s){return t=An(7,t,s,e),t.lanes=n,t}function ly(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function cy(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Uo=[],Fo=0,Kf=null,Wf=0,Gn=[],$n=0,Pa=null,gr=1,yr="";function ga(t,e){Uo[Fo++]=Wf,Uo[Fo++]=Kf,Kf=t,Wf=e}function jN(t,e,n){Gn[$n++]=gr,Gn[$n++]=yr,Gn[$n++]=Pa,Pa=t;var s=gr;t=yr;var r=32-In(s)-1;s&=~(1<<r),n+=1;var i=32-In(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,gr=1<<32-In(e)+r|n<<r|s,yr=i+t}else gr=1<<i|n<<r|s,yr=t}function Yb(t){t.return!==null&&(ga(t,1),jN(t,1,0))}function Kb(t){for(;t===Kf;)Kf=Uo[--Fo],Uo[Fo]=null,Wf=Uo[--Fo],Uo[Fo]=null;for(;t===Pa;)Pa=Gn[--$n],Gn[$n]=null,yr=Gn[--$n],Gn[$n]=null,gr=Gn[--$n],Gn[$n]=null}var an=null,at=null,De=!1,ja=null,Ds=!1,Mv=Error(z(519));function La(t){var e=Error(z(418,""));throw Ou(Kn(e,t)),Mv}function RE(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Qt]=t,e[bn]=s,n){case"dialog":be("cancel",e),be("close",e);break;case"iframe":case"object":case"embed":be("load",e);break;case"video":case"audio":for(n=0;n<Uu.length;n++)be(Uu[n],e);break;case"source":be("error",e);break;case"img":case"image":case"link":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"input":be("invalid",e),dN(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Gf(e);break;case"select":be("invalid",e);break;case"textarea":be("invalid",e),fN(e,s.value,s.defaultValue,s.children),Gf(e)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||mI(e.textContent,n)?(s.popover!=null&&(be("beforetoggle",e),be("toggle",e)),s.onScroll!=null&&be("scroll",e),s.onScrollEnd!=null&&be("scrollend",e),s.onClick!=null&&(e.onclick=xp),e=!0):e=!1,e||La(t)}function NE(t){for(an=t.return;an;)switch(an.tag){case 5:case 13:Ds=!1;return;case 27:case 3:Ds=!0;return;default:an=an.return}}function Uc(t){if(t!==an)return!1;if(!De)return NE(t),De=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||o0(t.type,t.memoizedProps)),n=!n),n&&at&&La(t),NE(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){at=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}at=null}}else e===27?(e=at,Ji(t.type)?(t=u0,u0=null,at=t):at=e):at=an?ms(t.stateNode.nextSibling):null;return!0}function Id(){at=an=null,De=!1}function IE(){var t=ja;return t!==null&&(fn===null?fn=t:fn.push.apply(fn,t),ja=null),t}function Ou(t){ja===null?ja=[t]:ja.push(t)}var Ov=Xs(null),eo=null,vr=null;function ai(t,e,n){We(Ov,e._currentValue),e._currentValue=n}function Er(t){t._currentValue=Ov.current,Dt(Ov)}function Vv(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Lv(t,e,n,s){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var i=r.dependencies;if(i!==null){var a=r.child;i=i.firstContext;e:for(;i!==null;){var o=i;i=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Vv(i.return,n,t),s||(a=null);break e}i=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(z(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Vv(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Dd(t,e,n,s){t=null;for(var r=e,i=!1;r!==null;){if(!i){if(r.flags&524288)i=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(z(387));if(a=a.memoizedProps,a!==null){var o=r.type;On(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===Bf.current){if(a=r.alternate,a===null)throw Error(z(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(zu):t=[zu])}r=r.return}t!==null&&Lv(e,t,n,s),e.flags|=262144}function Qf(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ua(t){eo=t,vr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return kN(eo,t)}function Vh(t,e){return eo===null&&Ua(t),kN(t,e)}function kN(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},vr===null){if(t===null)throw Error(z(308));vr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else vr=vr.next=e;return n}var c3=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},u3=Et.unstable_scheduleCallback,d3=Et.unstable_NormalPriority,bt={$$typeof:pr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wb(){return{controller:new c3,data:new Map,refCount:0}}function Pd(t){t.refCount--,t.refCount===0&&u3(d3,function(){t.controller.abort()})}var lu=null,Uv=0,Tl=0,Xo=null;function h3(t,e){if(lu===null){var n=lu=[];Uv=0,Tl=vx(),Xo={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Uv++,e.then(DE,DE),e}function DE(){if(--Uv===0&&lu!==null){Xo!==null&&(Xo.status="fulfilled");var t=lu;lu=null,Tl=0,Xo=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function f3(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var PE=oe.S;oe.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&h3(t,e),PE!==null&&PE(t,e)};var ka=Xs(null);function Qb(){var t=ka.current;return t!==null?t:He.pooledCache}function pf(t,e){e===null?We(ka,ka.current):We(ka,e.pool)}function MN(){var t=Qb();return t===null?null:{parent:bt._currentValue,pool:t}}var jd=Error(z(460)),ON=Error(z(474)),fp=Error(z(542)),Fv={then:function(){}};function jE(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Lh(){}function VN(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Lh,Lh),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ME(t),t;default:if(typeof e.status=="string")e.then(Lh,Lh);else{if(t=He,t!==null&&100<t.shellSuspendCounter)throw Error(z(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=s}},function(s){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ME(t),t}throw cu=e,jd}}var cu=null;function kE(){if(cu===null)throw Error(z(459));var t=cu;return cu=null,t}function ME(t){if(t===jd||t===fp)throw Error(z(483))}var ii=!1;function Xb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ai(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ci(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Me&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,e=Yf(t),DN(t,null,n),e}return hp(t,s,e,n),Yf(t)}function uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,iN(t,n)}}function uy(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var zv=!1;function du(){if(zv){var t=Xo;if(t!==null)throw t}}function hu(t,e,n,s){zv=!1;var r=t.updateQueue;ii=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=r.baseState;a=0,h=u=l=null,o=i;do{var m=o.lane&-536870913,p=m!==o.lane;if(p?(Se&m)===m:(s&m)===m){m!==0&&m===Tl&&(zv=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var E=t,w=o;m=e;var x=n;switch(w.tag){case 1:if(E=w.payload,typeof E=="function"){f=E.call(x,f,m);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=w.payload,m=typeof E=="function"?E.call(x,f,m):E,m==null)break e;f=$e({},f,m);break e;case 2:ii=!0}}m=o.callback,m!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[m]:p.push(m))}else p={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,l=f):h=h.next=p,a|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);h===null&&(l=f),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,i===null&&(r.shared.lanes=0),Fi|=a,t.lanes=a,t.memoizedState=f}}function LN(t,e){if(typeof t!="function")throw Error(z(191,t));t.call(e)}function UN(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)LN(n[t],e)}var El=Xs(null),Xf=Xs(0);function OE(t,e){t=Ir,We(Xf,t),We(El,e),Ir=t|e.baseLanes}function Hv(){We(Xf,Ir),We(El,El.current)}function Zb(){Ir=Xf.current,Dt(El),Dt(Xf)}var Li=0,ve=null,Le=null,ft=null,Zf=!1,Zo=!1,Fa=!1,Jf=0,Vu=0,Jo=null,m3=0;function lt(){throw Error(z(321))}function Jb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!On(t[n],e[n]))return!1;return!0}function ex(t,e,n,s,r,i){return Li=i,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oe.H=t===null||t.memoizedState===null?g2:y2,Fa=!1,i=n(s,r),Fa=!1,Zo&&(i=BN(e,n,s,r)),FN(t),i}function FN(t){oe.H=em;var e=Le!==null&&Le.next!==null;if(Li=0,ft=Le=ve=null,Zf=!1,Vu=0,Jo=null,e)throw Error(z(300));t===null||It||(t=t.dependencies,t!==null&&Qf(t)&&(It=!0))}function BN(t,e,n,s){ve=t;var r=0;do{if(Zo&&(Jo=null),Vu=0,Zo=!1,25<=r)throw Error(z(301));if(r+=1,ft=Le=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}oe.H=w3,i=e(n,s)}while(Zo);return i}function p3(){var t=oe.H,e=t.useState()[0];return e=typeof e.then=="function"?kd(e):e,t=t.useState()[0],(Le!==null?Le.memoizedState:null)!==t&&(ve.flags|=1024),e}function tx(){var t=Jf!==0;return Jf=0,t}function nx(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function sx(t){if(Zf){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Zf=!1}Li=0,ft=Le=ve=null,Zo=!1,Vu=Jf=0,Jo=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?ve.memoizedState=ft=t:ft=ft.next=t,ft}function gt(){if(Le===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=ft===null?ve.memoizedState:ft.next;if(e!==null)ft=e,Le=t;else{if(t===null)throw ve.alternate===null?Error(z(467)):Error(z(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},ft===null?ve.memoizedState=ft=t:ft=ft.next=t}return ft}function rx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kd(t){var e=Vu;return Vu+=1,Jo===null&&(Jo=[]),t=VN(Jo,t,e),e=ve,(ft===null?e.memoizedState:ft.next)===null&&(e=e.alternate,oe.H=e===null||e.memoizedState===null?g2:y2),t}function mp(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return kd(t);if(t.$$typeof===pr)return Xt(t)}throw Error(z(438,String(t)))}function ix(t){var e=null,n=ve.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ve.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=rx(),ve.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=J5;return e.index++,n}function Rr(t,e){return typeof e=="function"?e(t):e}function gf(t){var e=gt();return ax(e,Le,t)}function ax(t,e,n){var s=t.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=n;var r=t.baseQueue,i=s.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}e.baseQueue=r=i,s.pending=null}if(i=t.baseState,r===null)t.memoizedState=i;else{e=r.next;var o=a=null,l=null,u=e,h=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Se&f)===f:(Li&f)===f){var m=u.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Tl&&(h=!0);else if((Li&m)===m){u=u.next,m===Tl&&(h=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=f,a=i):l=l.next=f,ve.lanes|=m,Fi|=m;f=u.action,Fa&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else m={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=m,a=i):l=l.next=m,ve.lanes|=f,Fi|=f;u=u.next}while(u!==null&&u!==e);if(l===null?a=i:l.next=o,!On(i,t.memoizedState)&&(It=!0,h&&(n=Xo,n!==null)))throw n;t.memoizedState=i,t.baseState=a,t.baseQueue=l,s.lastRenderedState=i}return r===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function dy(t){var e=gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);On(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function zN(t,e,n){var s=ve,r=gt(),i=De;if(i){if(n===void 0)throw Error(z(407));n=n()}else n=e();var a=!On((Le||r).memoizedState,n);a&&(r.memoizedState=n,It=!0),r=r.queue;var o=GN.bind(null,s,r,t);if(Md(2048,8,o,[t]),r.getSnapshot!==e||a||ft!==null&&ft.memoizedState.tag&1){if(s.flags|=2048,Sl(9,pp(),qN.bind(null,s,r,n,e),null),He===null)throw Error(z(349));i||Li&124||HN(s,e,n)}return n}function HN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e=rx(),ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qN(t,e,n,s){e.value=n,e.getSnapshot=s,$N(e)&&YN(t)}function GN(t,e,n){return n(function(){$N(e)&&YN(t)})}function $N(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!On(t,n)}catch{return!0}}function YN(t){var e=Zl(t,2);e!==null&&Pn(e,t,2)}function qv(t){var e=dn();if(typeof t=="function"){var n=t;if(t=n(),Fa){vi(!0);try{n()}finally{vi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:t},e}function KN(t,e,n,s){return t.baseState=n,ax(t,Le,typeof s=="function"?s:Rr)}function g3(t,e,n,s,r){if(gp(t))throw Error(z(485));if(t=e.action,t!==null){var i={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){i.listeners.push(a)}};oe.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,WN(e,i)):(i.next=n.next,e.pending=n.next=i)}}function WN(t,e){var n=e.action,s=e.payload,r=t.state;if(e.isTransition){var i=oe.T,a={};oe.T=a;try{var o=n(r,s),l=oe.S;l!==null&&l(a,o),VE(t,e,o)}catch(u){Gv(t,e,u)}finally{oe.T=i}}else try{i=n(r,s),VE(t,e,i)}catch(u){Gv(t,e,u)}}function VE(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){LE(t,e,s)},function(s){return Gv(t,e,s)}):LE(t,e,n)}function LE(t,e,n){e.status="fulfilled",e.value=n,QN(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,WN(t,n)))}function Gv(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,QN(e),e=e.next;while(e!==s)}t.action=null}function QN(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function XN(t,e){return e}function UE(t,e){if(De){var n=He.formState;if(n!==null){e:{var s=ve;if(De){if(at){t:{for(var r=at,i=Ds;r.nodeType!==8;){if(!i){r=null;break t}if(r=ms(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){at=ms(r.nextSibling),s=r.data==="F!";break e}}La(s)}s=!1}s&&(e=n[0])}}return n=dn(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XN,lastRenderedState:e},n.queue=s,n=f2.bind(null,ve,s),s.dispatch=n,s=qv(!1),i=ux.bind(null,ve,!1,s.queue),s=dn(),r={state:e,dispatch:null,action:t,pending:null},s.queue=r,n=g3.bind(null,ve,r,i,n),r.dispatch=n,s.memoizedState=t,[e,n,!1]}function FE(t){var e=gt();return ZN(e,Le,t)}function ZN(t,e,n){if(e=ax(t,e,XN)[0],t=gf(Rr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=kd(e)}catch(a){throw a===jd?fp:a}else s=e;e=gt();var r=e.queue,i=r.dispatch;return n!==e.memoizedState&&(ve.flags|=2048,Sl(9,pp(),y3.bind(null,r,n),null)),[s,i,t]}function y3(t,e){t.action=e}function BE(t){var e=gt(),n=Le;if(n!==null)return ZN(e,n,t);gt(),e=e.memoizedState,n=gt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Sl(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ve.updateQueue,e===null&&(e=rx(),ve.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function pp(){return{destroy:void 0,resource:void 0}}function JN(){return gt().memoizedState}function yf(t,e,n,s){var r=dn();s=s===void 0?null:s,ve.flags|=t,r.memoizedState=Sl(1|e,pp(),n,s)}function Md(t,e,n,s){var r=gt();s=s===void 0?null:s;var i=r.memoizedState.inst;Le!==null&&s!==null&&Jb(s,Le.memoizedState.deps)?r.memoizedState=Sl(e,i,n,s):(ve.flags|=t,r.memoizedState=Sl(1|e,i,n,s))}function zE(t,e){yf(8390656,8,t,e)}function e2(t,e){Md(2048,8,t,e)}function t2(t,e){return Md(4,2,t,e)}function n2(t,e){return Md(4,4,t,e)}function s2(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r2(t,e,n){n=n!=null?n.concat([t]):null,Md(4,4,s2.bind(null,e,t),n)}function ox(){}function i2(t,e){var n=gt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&Jb(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function a2(t,e){var n=gt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&Jb(e,s[1]))return s[0];if(s=t(),Fa){vi(!0);try{t()}finally{vi(!1)}}return n.memoizedState=[s,e],s}function lx(t,e,n){return n===void 0||Li&1073741824?t.memoizedState=e:(t.memoizedState=n,t=Q2(),ve.lanes|=t,Fi|=t,n)}function o2(t,e,n,s){return On(n,e)?n:El.current!==null?(t=lx(t,n,s),On(t,e)||(It=!0),t):Li&42?(t=Q2(),ve.lanes|=t,Fi|=t,e):(It=!0,t.memoizedState=n)}function l2(t,e,n,s,r){var i=Pe.p;Pe.p=i!==0&&8>i?i:8;var a=oe.T,o={};oe.T=o,ux(t,!1,e,n);try{var l=r(),u=oe.S;if(u!==null&&u(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=f3(l,s);fu(t,e,h,Dn(t))}else fu(t,e,s,Dn(t))}catch(f){fu(t,e,{then:function(){},status:"rejected",reason:f},Dn())}finally{Pe.p=i,oe.T=a}}function v3(){}function $v(t,e,n,s){if(t.tag!==5)throw Error(z(476));var r=c2(t).queue;l2(t,r,e,Ia,n===null?v3:function(){return u2(t),n(s)})}function c2(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ia,baseState:Ia,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:Ia},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function u2(t){var e=c2(t).next.queue;fu(t,e,{},Dn())}function cx(){return Xt(zu)}function d2(){return gt().memoizedState}function h2(){return gt().memoizedState}function b3(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Dn();t=Ai(n);var s=Ci(e,t,n);s!==null&&(Pn(s,e,n),uu(s,e,n)),e={cache:Wb()},t.payload=e;return}e=e.return}}function x3(t,e,n){var s=Dn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},gp(t)?m2(e,n):(n=Gb(t,e,n,s),n!==null&&(Pn(n,t,s),p2(n,e,s)))}function f2(t,e,n){var s=Dn();fu(t,e,n,s)}function fu(t,e,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(gp(t))m2(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,On(o,a))return hp(t,e,r,0),He===null&&dp(),!1}catch{}finally{}if(n=Gb(t,e,r,s),n!==null)return Pn(n,t,s),p2(n,e,s),!0}return!1}function ux(t,e,n,s){if(s={lane:2,revertLane:vx(),action:s,hasEagerState:!1,eagerState:null,next:null},gp(t)){if(e)throw Error(z(479))}else e=Gb(t,n,s,2),e!==null&&Pn(e,t,2)}function gp(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function m2(t,e){Zo=Zf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function p2(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,iN(t,n)}}var em={readContext:Xt,use:mp,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt},g2={readContext:Xt,use:mp,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:zE,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,yf(4194308,4,s2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yf(4194308,4,t,e)},useInsertionEffect:function(t,e){yf(4,2,t,e)},useMemo:function(t,e){var n=dn();e=e===void 0?null:e;var s=t();if(Fa){vi(!0);try{t()}finally{vi(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=dn();if(n!==void 0){var r=n(e);if(Fa){vi(!0);try{n(e)}finally{vi(!1)}}}else r=e;return s.memoizedState=s.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=x3.bind(null,ve,t),[s.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:function(t){t=qv(t);var e=t.queue,n=f2.bind(null,ve,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ox,useDeferredValue:function(t,e){var n=dn();return lx(n,t,e)},useTransition:function(){var t=qv(!1);return t=l2.bind(null,ve,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ve,r=dn();if(De){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),He===null)throw Error(z(349));Se&124||HN(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,zE(GN.bind(null,s,i,t),[t]),s.flags|=2048,Sl(9,pp(),qN.bind(null,s,i,n,e),null),n},useId:function(){var t=dn(),e=He.identifierPrefix;if(De){var n=yr,s=gr;n=(s&~(1<<32-In(s)-1)).toString(32)+n,e=""+e+"R"+n,n=Jf++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=m3++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:cx,useFormState:UE,useActionState:UE,useOptimistic:function(t){var e=dn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ux.bind(null,ve,!0,n),n.dispatch=e,[t,e]},useMemoCache:ix,useCacheRefresh:function(){return dn().memoizedState=b3.bind(null,ve)}},y2={readContext:Xt,use:mp,useCallback:i2,useContext:Xt,useEffect:e2,useImperativeHandle:r2,useInsertionEffect:t2,useLayoutEffect:n2,useMemo:a2,useReducer:gf,useRef:JN,useState:function(){return gf(Rr)},useDebugValue:ox,useDeferredValue:function(t,e){var n=gt();return o2(n,Le.memoizedState,t,e)},useTransition:function(){var t=gf(Rr)[0],e=gt().memoizedState;return[typeof t=="boolean"?t:kd(t),e]},useSyncExternalStore:zN,useId:d2,useHostTransitionStatus:cx,useFormState:FE,useActionState:FE,useOptimistic:function(t,e){var n=gt();return KN(n,Le,t,e)},useMemoCache:ix,useCacheRefresh:h2},w3={readContext:Xt,use:mp,useCallback:i2,useContext:Xt,useEffect:e2,useImperativeHandle:r2,useInsertionEffect:t2,useLayoutEffect:n2,useMemo:a2,useReducer:dy,useRef:JN,useState:function(){return dy(Rr)},useDebugValue:ox,useDeferredValue:function(t,e){var n=gt();return Le===null?lx(n,t,e):o2(n,Le.memoizedState,t,e)},useTransition:function(){var t=dy(Rr)[0],e=gt().memoizedState;return[typeof t=="boolean"?t:kd(t),e]},useSyncExternalStore:zN,useId:d2,useHostTransitionStatus:cx,useFormState:BE,useActionState:BE,useOptimistic:function(t,e){var n=gt();return Le!==null?KN(n,Le,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:ix,useCacheRefresh:h2},el=null,Lu=0;function Uh(t){var e=Lu;return Lu+=1,el===null&&(el=[]),VN(el,t,e)}function Fc(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Fh(t,e){throw e.$$typeof===X5?Error(z(525)):(t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function HE(t){var e=t._init;return e(t._payload)}function v2(t){function e(v,b){if(t){var _=v.deletions;_===null?(v.deletions=[b],v.flags|=16):_.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function s(v){for(var b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function r(v,b){return v=Tr(v,b),v.index=0,v.sibling=null,v}function i(v,b,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<b?(v.flags|=67108866,b):_):(v.flags|=67108866,b)):(v.flags|=1048576,b)}function a(v){return t&&v.alternate===null&&(v.flags|=67108866),v}function o(v,b,_,C){return b===null||b.tag!==6?(b=ly(_,v.mode,C),b.return=v,b):(b=r(b,_),b.return=v,b)}function l(v,b,_,C){var P=_.type;return P===Io?h(v,b,_.props.children,C,_.key):b!==null&&(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ri&&HE(P)===b.type)?(b=r(b,_.props),Fc(b,_),b.return=v,b):(b=mf(_.type,_.key,_.props,null,v.mode,C),Fc(b,_),b.return=v,b)}function u(v,b,_,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=cy(_,v.mode,C),b.return=v,b):(b=r(b,_.children||[]),b.return=v,b)}function h(v,b,_,C,P){return b===null||b.tag!==7?(b=Da(_,v.mode,C,P),b.return=v,b):(b=r(b,_),b.return=v,b)}function f(v,b,_){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=ly(""+b,v.mode,_),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ph:return _=mf(b.type,b.key,b.props,null,v.mode,_),Fc(_,b),_.return=v,_;case Yc:return b=cy(b,v.mode,_),b.return=v,b;case ri:var C=b._init;return b=C(b._payload),f(v,b,_)}if(Kc(b)||Oc(b))return b=Da(b,v.mode,_,null),b.return=v,b;if(typeof b.then=="function")return f(v,Uh(b),_);if(b.$$typeof===pr)return f(v,Vh(v,b),_);Fh(v,b)}return null}function m(v,b,_,C){var P=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return P!==null?null:o(v,b,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ph:return _.key===P?l(v,b,_,C):null;case Yc:return _.key===P?u(v,b,_,C):null;case ri:return P=_._init,_=P(_._payload),m(v,b,_,C)}if(Kc(_)||Oc(_))return P!==null?null:h(v,b,_,C,null);if(typeof _.then=="function")return m(v,b,Uh(_),C);if(_.$$typeof===pr)return m(v,b,Vh(v,_),C);Fh(v,_)}return null}function p(v,b,_,C,P){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return v=v.get(_)||null,o(b,v,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ph:return v=v.get(C.key===null?_:C.key)||null,l(b,v,C,P);case Yc:return v=v.get(C.key===null?_:C.key)||null,u(b,v,C,P);case ri:var M=C._init;return C=M(C._payload),p(v,b,_,C,P)}if(Kc(C)||Oc(C))return v=v.get(_)||null,h(b,v,C,P,null);if(typeof C.then=="function")return p(v,b,_,Uh(C),P);if(C.$$typeof===pr)return p(v,b,_,Vh(b,C),P);Fh(b,C)}return null}function E(v,b,_,C){for(var P=null,M=null,A=b,S=b=0,N=null;A!==null&&S<_.length;S++){A.index>S?(N=A,A=null):N=A.sibling;var R=m(v,A,_[S],C);if(R===null){A===null&&(A=N);break}t&&A&&R.alternate===null&&e(v,A),b=i(R,b,S),M===null?P=R:M.sibling=R,M=R,A=N}if(S===_.length)return n(v,A),De&&ga(v,S),P;if(A===null){for(;S<_.length;S++)A=f(v,_[S],C),A!==null&&(b=i(A,b,S),M===null?P=A:M.sibling=A,M=A);return De&&ga(v,S),P}for(A=s(A);S<_.length;S++)N=p(A,v,S,_[S],C),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?S:N.key),b=i(N,b,S),M===null?P=N:M.sibling=N,M=N);return t&&A.forEach(function(j){return e(v,j)}),De&&ga(v,S),P}function w(v,b,_,C){if(_==null)throw Error(z(151));for(var P=null,M=null,A=b,S=b=0,N=null,R=_.next();A!==null&&!R.done;S++,R=_.next()){A.index>S?(N=A,A=null):N=A.sibling;var j=m(v,A,R.value,C);if(j===null){A===null&&(A=N);break}t&&A&&j.alternate===null&&e(v,A),b=i(j,b,S),M===null?P=j:M.sibling=j,M=j,A=N}if(R.done)return n(v,A),De&&ga(v,S),P;if(A===null){for(;!R.done;S++,R=_.next())R=f(v,R.value,C),R!==null&&(b=i(R,b,S),M===null?P=R:M.sibling=R,M=R);return De&&ga(v,S),P}for(A=s(A);!R.done;S++,R=_.next())R=p(A,v,S,R.value,C),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?S:R.key),b=i(R,b,S),M===null?P=R:M.sibling=R,M=R);return t&&A.forEach(function(k){return e(v,k)}),De&&ga(v,S),P}function x(v,b,_,C){if(typeof _=="object"&&_!==null&&_.type===Io&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ph:e:{for(var P=_.key;b!==null;){if(b.key===P){if(P=_.type,P===Io){if(b.tag===7){n(v,b.sibling),C=r(b,_.props.children),C.return=v,v=C;break e}}else if(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ri&&HE(P)===b.type){n(v,b.sibling),C=r(b,_.props),Fc(C,_),C.return=v,v=C;break e}n(v,b);break}else e(v,b);b=b.sibling}_.type===Io?(C=Da(_.props.children,v.mode,C,_.key),C.return=v,v=C):(C=mf(_.type,_.key,_.props,null,v.mode,C),Fc(C,_),C.return=v,v=C)}return a(v);case Yc:e:{for(P=_.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(v,b.sibling),C=r(b,_.children||[]),C.return=v,v=C;break e}else{n(v,b);break}else e(v,b);b=b.sibling}C=cy(_,v.mode,C),C.return=v,v=C}return a(v);case ri:return P=_._init,_=P(_._payload),x(v,b,_,C)}if(Kc(_))return E(v,b,_,C);if(Oc(_)){if(P=Oc(_),typeof P!="function")throw Error(z(150));return _=P.call(_),w(v,b,_,C)}if(typeof _.then=="function")return x(v,b,Uh(_),C);if(_.$$typeof===pr)return x(v,b,Vh(v,_),C);Fh(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,b!==null&&b.tag===6?(n(v,b.sibling),C=r(b,_),C.return=v,v=C):(n(v,b),C=ly(_,v.mode,C),C.return=v,v=C),a(v)):n(v,b)}return function(v,b,_,C){try{Lu=0;var P=x(v,b,_,C);return el=null,P}catch(A){if(A===jd||A===fp)throw A;var M=An(29,A,null,v.mode);return M.lanes=C,M.return=v,M}finally{}}}var Al=v2(!0),b2=v2(!1),Zn=Xs(null),Os=null;function oi(t){var e=t.alternate;We(xt,xt.current&1),We(Zn,t),Os===null&&(e===null||El.current!==null||e.memoizedState!==null)&&(Os=t)}function x2(t){if(t.tag===22){if(We(xt,xt.current),We(Zn,t),Os===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Os=t)}}else li()}function li(){We(xt,xt.current),We(Zn,Zn.current)}function br(t){Dt(Zn),Os===t&&(Os=null),Dt(xt)}var xt=Xs(0);function tm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||c0(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function hy(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yv={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Dn(),r=Ai(s);r.payload=e,n!=null&&(r.callback=n),e=Ci(t,r,s),e!==null&&(Pn(e,t,s),uu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Dn(),r=Ai(s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ci(t,r,s),e!==null&&(Pn(e,t,s),uu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),s=Ai(n);s.tag=2,e!=null&&(s.callback=e),e=Ci(t,s,n),e!==null&&(Pn(e,t,n),uu(e,t,n))}};function qE(t,e,n,s,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!Mu(n,s)||!Mu(r,i):!0}function GE(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Yv.enqueueReplaceState(e,e.state,null)}function Ba(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=$e({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var nm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function w2(t){nm(t)}function _2(t){console.error(t)}function T2(t){nm(t)}function sm(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function $E(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Kv(t,e,n){return n=Ai(n),n.tag=3,n.payload={element:null},n.callback=function(){sm(t,e)},n}function E2(t){return t=Ai(t),t.tag=3,t}function S2(t,e,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;t.payload=function(){return r(i)},t.callback=function(){$E(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){$E(e,n,s),typeof r!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function _3(t,e,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Dd(e,n,r,!0),n=Zn.current,n!==null){switch(n.tag){case 13:return Os===null?n0():n.alternate===null&&ot===0&&(ot=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===Fv?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Ty(t,s,r)),!1;case 22:return n.flags|=65536,s===Fv?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Ty(t,s,r)),!1}throw Error(z(435,n.tag))}return Ty(t,s,r),n0(),!1}if(De)return e=Zn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,s!==Mv&&(t=Error(z(422),{cause:s}),Ou(Kn(t,n)))):(s!==Mv&&(e=Error(z(423),{cause:s}),Ou(Kn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,s=Kn(s,n),r=Kv(t.stateNode,s,r),uy(t,r),ot!==4&&(ot=2)),!1;var i=Error(z(520),{cause:s});if(i=Kn(i,n),gu===null?gu=[i]:gu.push(i),ot!==4&&(ot=2),e===null)return!0;s=Kn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Kv(n.stateNode,s,t),uy(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Ri===null||!Ri.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,r=E2(r),S2(r,t,n,s),uy(n,r),!1}n=n.return}while(n!==null);return!1}var A2=Error(z(461)),It=!1;function kt(t,e,n,s){e.child=t===null?b2(e,null,n,s):Al(e,t.child,n,s)}function YE(t,e,n,s,r){n=n.render;var i=e.ref;if("ref"in s){var a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}else a=s;return Ua(e),s=ex(t,e,n,a,i,r),o=tx(),t!==null&&!It?(nx(t,e,r),Nr(t,e,r)):(De&&o&&Yb(e),e.flags|=1,kt(t,e,s,r),e.child)}function KE(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!$b(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,C2(t,e,i,s,r)):(t=mf(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!dx(t,r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mu,n(a,s)&&t.ref===e.ref)return Nr(t,e,r)}return e.flags|=1,t=Tr(i,s),t.ref=e.ref,t.return=e,e.child=t}function C2(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Mu(i,s)&&t.ref===e.ref)if(It=!1,e.pendingProps=s=i,dx(t,r))t.flags&131072&&(It=!0);else return e.lanes=t.lanes,Nr(t,e,r)}return Wv(t,e,n,s,r)}function R2(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden"){if(e.flags&128){if(s=i!==null?i.baseLanes|n:n,t!==null){for(r=e.child=t.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;e.childLanes=i&~s}else e.childLanes=0,e.child=null;return WE(t,e,s,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&pf(e,i!==null?i.cachePool:null),i!==null?OE(e,i):Hv(),x2(e);else return e.lanes=e.childLanes=536870912,WE(t,e,i!==null?i.baseLanes|n:n,n)}else i!==null?(pf(e,i.cachePool),OE(e,i),li(),e.memoizedState=null):(t!==null&&pf(e,null),Hv(),li());return kt(t,e,r,n),e.child}function WE(t,e,n,s){var r=Qb();return r=r===null?null:{parent:bt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&pf(e,null),Hv(),x2(e),t!==null&&Dd(t,e,s,!0),null}function vf(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(z(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Wv(t,e,n,s,r){return Ua(e),n=ex(t,e,n,s,void 0,r),s=tx(),t!==null&&!It?(nx(t,e,r),Nr(t,e,r)):(De&&s&&Yb(e),e.flags|=1,kt(t,e,n,r),e.child)}function QE(t,e,n,s,r,i){return Ua(e),e.updateQueue=null,n=BN(e,s,n,r),FN(t),s=tx(),t!==null&&!It?(nx(t,e,i),Nr(t,e,i)):(De&&s&&Yb(e),e.flags|=1,kt(t,e,n,i),e.child)}function XE(t,e,n,s,r){if(Ua(e),e.stateNode===null){var i=Lo,a=n.contextType;typeof a=="object"&&a!==null&&(i=Xt(a)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Yv,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},Xb(e),a=n.contextType,i.context=typeof a=="object"&&a!==null?Xt(a):Lo,i.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(hy(e,n,a,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(a=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),a!==i.state&&Yv.enqueueReplaceState(i,i.state,null),hu(e,s,i,r),du(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var o=e.memoizedProps,l=Ba(n,o);i.props=l;var u=i.context,h=n.contextType;a=Lo,typeof h=="object"&&h!==null&&(a=Xt(h));var f=n.getDerivedStateFromProps;h=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o||u!==a)&&GE(e,i,s,a),ii=!1;var m=e.memoizedState;i.state=m,hu(e,s,i,r),du(),u=e.memoizedState,o||m!==u||ii?(typeof f=="function"&&(hy(e,n,f,s),u=e.memoizedState),(l=ii||qE(e,n,l,s,m,u,a))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),i.props=s,i.state=u,i.context=a,s=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,Bv(t,e),a=e.memoizedProps,h=Ba(n,a),i.props=h,f=e.pendingProps,m=i.context,u=n.contextType,l=Lo,typeof u=="object"&&u!==null&&(l=Xt(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||m!==l)&&GE(e,i,s,l),ii=!1,m=e.memoizedState,i.state=m,hu(e,s,i,r),du();var p=e.memoizedState;a!==f||m!==p||ii||t!==null&&t.dependencies!==null&&Qf(t.dependencies)?(typeof o=="function"&&(hy(e,n,o,s),p=e.memoizedState),(h=ii||qE(e,n,h,s,m,p,l)||t!==null&&t.dependencies!==null&&Qf(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,p,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,p,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),i.props=s,i.state=p,i.context=l,s=h):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,vf(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=Al(e,t.child,null,r),e.child=Al(e,null,n,r)):kt(t,e,n,r),e.memoizedState=i.state,t=e.child):t=Nr(t,e,r),t}function ZE(t,e,n,s){return Id(),e.flags|=256,kt(t,e,n,s),e.child}var fy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function my(t){return{baseLanes:t,cachePool:MN()}}function py(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Wn),t}function N2(t,e,n){var s=e.pendingProps,r=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(xt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(De){if(r?oi(e):li(),De){var o=at,l;if(l=o){e:{for(l=o,o=Ds;l.nodeType!==8;){if(!o){o=null;break e}if(l=ms(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:Pa!==null?{id:gr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},l=An(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,an=e,at=null,l=!0):l=!1}l||La(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return c0(o)?e.lanes=32:e.lanes=536870912,null;br(e)}return o=s.children,s=s.fallback,r?(li(),r=e.mode,o=rm({mode:"hidden",children:o},r),s=Da(s,r,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,r=e.child,r.memoizedState=my(n),r.childLanes=py(t,a,n),e.memoizedState=fy,s):(oi(e),Qv(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(i)e.flags&256?(oi(e),e.flags&=-257,e=gy(t,e,n)):e.memoizedState!==null?(li(),e.child=t.child,e.flags|=128,e=null):(li(),r=s.fallback,o=e.mode,s=rm({mode:"visible",children:s.children},o),r=Da(r,o,n,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,Al(e,t.child,null,n),s=e.child,s.memoizedState=my(n),s.childLanes=py(t,a,n),e.memoizedState=fy,e=r);else if(oi(e),c0(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var u=a.dgst;a=u,s=Error(z(419)),s.stack="",s.digest=a,Ou({value:s,source:null,stack:null}),e=gy(t,e,n)}else if(It||Dd(t,e,n,!1),a=(n&t.childLanes)!==0,It||a){if(a=He,a!==null&&(s=n&-n,s=s&42?1:Mb(s),s=s&(a.suspendedLanes|n)?0:s,s!==0&&s!==l.retryLane))throw l.retryLane=s,Zl(t,s),Pn(a,t,s),A2;o.data==="$?"||n0(),e=gy(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,at=ms(o.nextSibling),an=e,De=!0,ja=null,Ds=!1,t!==null&&(Gn[$n++]=gr,Gn[$n++]=yr,Gn[$n++]=Pa,gr=t.id,yr=t.overflow,Pa=e),e=Qv(e,s.children),e.flags|=4096);return e}return r?(li(),r=s.fallback,o=e.mode,l=t.child,u=l.sibling,s=Tr(l,{mode:"hidden",children:s.children}),s.subtreeFlags=l.subtreeFlags&65011712,u!==null?r=Tr(u,r):(r=Da(r,o,n,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=t.child.memoizedState,o===null?o=my(n):(l=o.cachePool,l!==null?(u=bt._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=MN(),o={baseLanes:o.baseLanes|n,cachePool:l}),r.memoizedState=o,r.childLanes=py(t,a,n),e.memoizedState=fy,s):(oi(e),n=t.child,t=n.sibling,n=Tr(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Qv(t,e){return e=rm({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function rm(t,e){return t=An(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function gy(t,e,n){return Al(e,t.child,null,n),t=Qv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JE(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Vv(t.return,e,n)}function yy(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function I2(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(kt(t,e,s.children,n),s=xt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&JE(t,n,e);else if(t.tag===19)JE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(We(xt,s),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&tm(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),yy(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&tm(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}yy(e,!0,n,null,i);break;case"together":yy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Dd(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dx(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Qf(t)))}function T3(t,e,n){switch(e.tag){case 3:zf(e,e.stateNode.containerInfo),ai(e,bt,t.memoizedState.cache),Id();break;case 27:case 5:Sv(e);break;case 4:zf(e,e.stateNode.containerInfo);break;case 10:ai(e,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(oi(e),e.flags|=128,null):n&e.child.childLanes?N2(t,e,n):(oi(e),t=Nr(t,e,n),t!==null?t.sibling:null);oi(e);break;case 19:var r=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Dd(t,e,n,!1),s=(n&e.childLanes)!==0),r){if(s)return I2(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),We(xt,xt.current),s)break;return null;case 22:case 23:return e.lanes=0,R2(t,e,n);case 24:ai(e,bt,t.memoizedState.cache)}return Nr(t,e,n)}function D2(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)It=!0;else{if(!dx(t,n)&&!(e.flags&128))return It=!1,T3(t,e,n);It=!!(t.flags&131072)}else It=!1,De&&e.flags&1048576&&jN(e,Wf,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var s=e.elementType,r=s._init;if(s=r(s._payload),e.type=s,typeof s=="function")$b(s)?(t=Ba(s,t),e.tag=1,e=XE(null,e,s,t,n)):(e.tag=0,e=Wv(null,e,s,t,n));else{if(s!=null){if(r=s.$$typeof,r===Pb){e.tag=11,e=YE(null,e,s,t,n);break e}else if(r===jb){e.tag=14,e=KE(null,e,s,t,n);break e}}throw e=Tv(s)||s,Error(z(306,e,""))}}return e;case 0:return Wv(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,r=Ba(s,e.pendingProps),XE(t,e,s,r,n);case 3:e:{if(zf(e,e.stateNode.containerInfo),t===null)throw Error(z(387));s=e.pendingProps;var i=e.memoizedState;r=i.element,Bv(t,e),hu(e,s,null,n);var a=e.memoizedState;if(s=a.cache,ai(e,bt,s),s!==i.cache&&Lv(e,[bt],n,!0),du(),s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=ZE(t,e,s,n);break e}else if(s!==r){r=Kn(Error(z(424)),e),Ou(r),e=ZE(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=ms(t.firstChild),an=e,De=!0,ja=null,Ds=!0,n=b2(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Id(),s===r){e=Nr(t,e,n);break e}kt(t,e,s,n)}e=e.child}return e;case 26:return vf(t,e),t===null?(n=gS(e.type,null,e.pendingProps,null))?e.memoizedState=n:De||(n=e.type,t=e.pendingProps,s=dm(Si.current).createElement(n),s[Qt]=e,s[bn]=t,Lt(s,n,t),Rt(s),e.stateNode=s):e.memoizedState=gS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Sv(e),t===null&&De&&(s=e.stateNode=yI(e.type,e.pendingProps,Si.current),an=e,Ds=!0,r=at,Ji(e.type)?(u0=r,at=ms(s.firstChild)):at=r),kt(t,e,e.pendingProps.children,n),vf(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&De&&((r=s=at)&&(s=X3(s,e.type,e.pendingProps,Ds),s!==null?(e.stateNode=s,an=e,at=ms(s.firstChild),Ds=!1,r=!0):r=!1),r||La(e)),Sv(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,o0(r,i)?s=null:a!==null&&o0(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=ex(t,e,p3,null,null,n),zu._currentValue=r),vf(t,e),kt(t,e,s,n),e.child;case 6:return t===null&&De&&((t=n=at)&&(n=Z3(n,e.pendingProps,Ds),n!==null?(e.stateNode=n,an=e,at=null,t=!0):t=!1),t||La(e)),null;case 13:return N2(t,e,n);case 4:return zf(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Al(e,null,s,n):kt(t,e,s,n),e.child;case 11:return YE(t,e,e.type,e.pendingProps,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,ai(e,e.type,s.value),kt(t,e,s.children,n),e.child;case 9:return r=e.type._context,s=e.pendingProps.children,Ua(e),r=Xt(r),s=s(r),e.flags|=1,kt(t,e,s,n),e.child;case 14:return KE(t,e,e.type,e.pendingProps,n);case 15:return C2(t,e,e.type,e.pendingProps,n);case 19:return I2(t,e,n);case 31:return s=e.pendingProps,n=e.mode,s={mode:s.mode,children:s.children},t===null?(n=rm(s,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Tr(t.child,s),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return R2(t,e,n);case 24:return Ua(e),s=Xt(bt),t===null?(r=Qb(),r===null&&(r=He,i=Wb(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=n),r=i),e.memoizedState={parent:s,cache:r},Xb(e),ai(e,bt,r)):(t.lanes&n&&(Bv(t,e),hu(e,null,null,n),du()),r=t.memoizedState,i=e.memoizedState,r.parent!==s?(r={parent:s,cache:s},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),ai(e,bt,s)):(s=i.cache,ai(e,bt,s),s!==r.cache&&Lv(e,[bt],n,!0))),kt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(z(156,e.tag))}function lr(t){t.flags|=4}function eS(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!xI(e)){if(e=Zn.current,e!==null&&((Se&4194048)===Se?Os!==null:(Se&62914560)!==Se&&!(Se&536870912)||e!==Os))throw cu=Fv,ON;t.flags|=8192}}function Bh(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?sN():536870912,t.lanes|=e,Cl|=e)}function Bc(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function E3(t,e,n){var s=e.pendingProps;switch(Kb(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return Je(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Er(bt),xl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Uc(e)?lr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,IE())),Je(e),null;case 26:return n=e.memoizedState,t===null?(lr(e),n!==null?(Je(e),eS(e,n)):(Je(e),e.flags&=-16777217)):n?n!==t.memoizedState?(lr(e),Je(e),eS(e,n)):(Je(e),e.flags&=-16777217):(t.memoizedProps!==s&&lr(e),Je(e),e.flags&=-16777217),null;case 27:Hf(e),n=Si.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==s&&lr(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return Je(e),null}t=ks.current,Uc(e)?RE(e):(t=yI(r,s,n),e.stateNode=t,lr(e))}return Je(e),null;case 5:if(Hf(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&lr(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return Je(e),null}if(t=ks.current,Uc(e))RE(e);else{switch(r=dm(Si.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?r.createElement(n,{is:s.is}):r.createElement(n)}}t[Qt]=e,t[bn]=s;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;e:switch(Lt(t,n,s),n){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&lr(e)}}return Je(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&lr(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(z(166));if(t=Si.current,Uc(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,r=an,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}t[Qt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||mI(t.nodeValue,n)),t||La(e)}else t=dm(t).createTextNode(s),t[Qt]=e,e.stateNode=t}return Je(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Uc(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(z(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[Qt]=e}else Id(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),r=!1}else r=IE(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(br(e),e):(br(e),null)}if(br(e),e.flags&128)return e.lanes=n,e;if(n=s!==null,t=t!==null&&t.memoizedState!==null,n){s=e.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var i=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Bh(e,e.updateQueue),Je(e),null;case 4:return xl(),t===null&&bx(e.stateNode.containerInfo),Je(e),null;case 10:return Er(e.type),Je(e),null;case 19:if(Dt(xt),r=e.memoizedState,r===null)return Je(e),null;if(s=(e.flags&128)!==0,i=r.rendering,i===null)if(s)Bc(r,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=tm(t),i!==null){for(e.flags|=128,Bc(r,!1),t=i.updateQueue,e.updateQueue=t,Bh(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)PN(n,t),n=n.sibling;return We(xt,xt.current&1|2),e.child}t=t.sibling}r.tail!==null&&Ms()>am&&(e.flags|=128,s=!0,Bc(r,!1),e.lanes=4194304)}else{if(!s)if(t=tm(i),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Bh(e,t),Bc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!De)return Je(e),null}else 2*Ms()-r.renderingStartTime>am&&n!==536870912&&(e.flags|=128,s=!0,Bc(r,!1),e.lanes=4194304);r.isBackwards?(i.sibling=e.child,e.child=i):(t=r.last,t!==null?t.sibling=i:e.child=i,r.last=i)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ms(),e.sibling=null,t=xt.current,We(xt,s?t&1|2:t&1),e):(Je(e),null);case 22:case 23:return br(e),Zb(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),n=e.updateQueue,n!==null&&Bh(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Dt(ka),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Er(bt),Je(e),null;case 25:return null;case 30:return null}throw Error(z(156,e.tag))}function S3(t,e){switch(Kb(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Er(bt),xl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Hf(e),null;case 13:if(br(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Id()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt(xt),null;case 4:return xl(),null;case 10:return Er(e.type),null;case 22:case 23:return br(e),Zb(),t!==null&&Dt(ka),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Er(bt),null;case 25:return null;default:return null}}function P2(t,e){switch(Kb(e),e.tag){case 3:Er(bt),xl();break;case 26:case 27:case 5:Hf(e);break;case 4:xl();break;case 13:br(e);break;case 19:Dt(xt);break;case 10:Er(e.type);break;case 22:case 23:br(e),Zb(),t!==null&&Dt(ka);break;case 24:Er(bt)}}function Od(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&t)===t){s=void 0;var i=n.create,a=n.inst;s=i(),a.destroy=s}n=n.next}while(n!==r)}}catch(o){Be(e,e.return,o)}}function Ui(t,e,n){try{var s=e.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&t)===t){var a=s.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,u=o;try{u()}catch(h){Be(r,l,h)}}}s=s.next}while(s!==i)}}catch(h){Be(e,e.return,h)}}function j2(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{UN(e,n)}catch(s){Be(t,t.return,s)}}}function k2(t,e,n){n.props=Ba(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Be(t,e,s)}}function mu(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){Be(t,e,r)}}function js(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){Be(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function M2(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){Be(t,t.return,r)}}function vy(t,e,n){try{var s=t.stateNode;$3(s,t.type,n,e),s[bn]=e}catch(r){Be(t,t.return,r)}}function O2(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ji(t.type)||t.tag===4}function by(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ji(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xv(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xp));else if(s!==4&&(s===27&&Ji(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Xv(t,e,n),t=t.sibling;t!==null;)Xv(t,e,n),t=t.sibling}function im(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Ji(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(im(t,e,n),t=t.sibling;t!==null;)im(t,e,n),t=t.sibling}function V2(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Lt(e,s,n),e[Qt]=t,e[bn]=n}catch(i){Be(t,t.return,i)}}var fr=!1,ut=!1,xy=!1,tS=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function A3(t,e){if(t=t.containerInfo,i0=pm,t=EN(t),Hb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var p;f!==n||r!==0&&f.nodeType!==3||(o=a+r),f!==i||s!==0&&f.nodeType!==3||(l=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++u===r&&(o=a),m===i&&++h===s&&(l=a),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(a0={focusedElem:t,selectionRange:n},pm=!1,Ct=e;Ct!==null;)if(e=Ct,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Ct=t;else for(;Ct!==null;){switch(e=Ct,i=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var E=Ba(n.type,r,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(E,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(w){Be(n,n.return,w)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)l0(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":l0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(z(163))}if(t=e.sibling,t!==null){t.return=e.return,Ct=t;break}Ct=e.return}}function L2(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Kr(t,n),s&4&&Od(5,n);break;case 1:if(Kr(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Be(n,n.return,a)}else{var r=Ba(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Be(n,n.return,a)}}s&64&&j2(n),s&512&&mu(n,n.return);break;case 3:if(Kr(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{UN(t,e)}catch(a){Be(n,n.return,a)}}break;case 27:e===null&&s&4&&V2(n);case 26:case 5:Kr(t,n),e===null&&s&4&&M2(n),s&512&&mu(n,n.return);break;case 12:Kr(t,n);break;case 13:Kr(t,n),s&4&&B2(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=M3.bind(null,n),J3(t,n))));break;case 22:if(s=n.memoizedState!==null||fr,!s){e=e!==null&&e.memoizedState!==null||ut,r=fr;var i=ut;fr=s,(ut=e)&&!i?Jr(t,n,(n.subtreeFlags&8772)!==0):Kr(t,n),fr=r,ut=i}break;case 30:break;default:Kr(t,n)}}function U2(t){var e=t.alternate;e!==null&&(t.alternate=null,U2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Vb(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,hn=!1;function cr(t,e,n){for(n=n.child;n!==null;)F2(t,e,n),n=n.sibling}function F2(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Sd,n)}catch{}switch(n.tag){case 26:ut||js(n,e),cr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ut||js(n,e);var s=Ye,r=hn;Ji(n.type)&&(Ye=n.stateNode,hn=!1),cr(t,e,n),vu(n.stateNode),Ye=s,hn=r;break;case 5:ut||js(n,e);case 6:if(s=Ye,r=hn,Ye=null,cr(t,e,n),Ye=s,hn=r,Ye!==null)if(hn)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(n.stateNode)}catch(i){Be(n,e,i)}else try{Ye.removeChild(n.stateNode)}catch(i){Be(n,e,i)}break;case 18:Ye!==null&&(hn?(t=Ye,fS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Gu(t)):fS(Ye,n.stateNode));break;case 4:s=Ye,r=hn,Ye=n.stateNode.containerInfo,hn=!0,cr(t,e,n),Ye=s,hn=r;break;case 0:case 11:case 14:case 15:ut||Ui(2,n,e),ut||Ui(4,n,e),cr(t,e,n);break;case 1:ut||(js(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&k2(n,e,s)),cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:ut=(s=ut)||n.memoizedState!==null,cr(t,e,n),ut=s;break;default:cr(t,e,n)}}function B2(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gu(t)}catch(n){Be(e,e.return,n)}}function C3(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new tS),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new tS),e;default:throw Error(z(435,t.tag))}}function wy(t,e){var n=C3(t);e.forEach(function(s){var r=O3.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}function _n(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Ji(o.type)){Ye=o.stateNode,hn=!1;break e}break;case 5:Ye=o.stateNode,hn=!1;break e;case 3:case 4:Ye=o.stateNode.containerInfo,hn=!0;break e}o=o.return}if(Ye===null)throw Error(z(160));F2(i,a,r),Ye=null,hn=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)z2(e,t),e=e.sibling}var cs=null;function z2(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(e,t),Tn(t),s&4&&(Ui(3,t,t.return),Od(3,t),Ui(5,t,t.return));break;case 1:_n(e,t),Tn(t),s&512&&(ut||n===null||js(n,n.return)),s&64&&fr&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=cs;if(_n(e,t),Tn(t),s&512&&(ut||n===null||js(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[Rd]||i[Qt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),Lt(i,s,n),i[Qt]=t,Rt(i),s=i;break e;case"link":var a=vS("link","href",r).get(s+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(i=a[o],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}i=r.createElement(s),Lt(i,s,n),r.head.appendChild(i);break;case"meta":if(a=vS("meta","content",r).get(s+(n.content||""))){for(o=0;o<a.length;o++)if(i=a[o],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}i=r.createElement(s),Lt(i,s,n),r.head.appendChild(i);break;default:throw Error(z(468,s))}i[Qt]=t,Rt(i),s=i}t.stateNode=s}else bS(r,t.type,t.stateNode);else t.stateNode=yS(r,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?bS(r,t.type,t.stateNode):yS(r,s,t.memoizedProps)):s===null&&t.stateNode!==null&&vy(t,t.memoizedProps,n.memoizedProps)}break;case 27:_n(e,t),Tn(t),s&512&&(ut||n===null||js(n,n.return)),n!==null&&s&4&&vy(t,t.memoizedProps,n.memoizedProps);break;case 5:if(_n(e,t),Tn(t),s&512&&(ut||n===null||js(n,n.return)),t.flags&32){r=t.stateNode;try{_l(r,"")}catch(p){Be(t,t.return,p)}}s&4&&t.stateNode!=null&&(r=t.memoizedProps,vy(t,r,n!==null?n.memoizedProps:r)),s&1024&&(xy=!0);break;case 6:if(_n(e,t),Tn(t),s&4){if(t.stateNode===null)throw Error(z(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(p){Be(t,t.return,p)}}break;case 3:if(wf=null,r=cs,cs=hm(e.containerInfo),_n(e,t),cs=r,Tn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Gu(e.containerInfo)}catch(p){Be(t,t.return,p)}xy&&(xy=!1,H2(t));break;case 4:s=cs,cs=hm(t.stateNode.containerInfo),_n(e,t),Tn(t),cs=s;break;case 12:_n(e,t),Tn(t);break;case 13:_n(e,t),Tn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(gx=Ms()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,wy(t,s)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=fr,h=ut;if(fr=u||r,ut=h||l,_n(e,t),ut=h,fr=u,Tn(t),s&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||fr||ut||ya(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(i=l.stateNode,r)a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var f=l.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(p){Be(l,l.return,p)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(p){Be(l,l.return,p)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,wy(t,n))));break;case 19:_n(e,t),Tn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,wy(t,s)));break;case 30:break;case 21:break;default:_n(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(O2(s)){n=s;break}s=s.return}if(n==null)throw Error(z(160));switch(n.tag){case 27:var r=n.stateNode,i=by(t);im(t,i,r);break;case 5:var a=n.stateNode;n.flags&32&&(_l(a,""),n.flags&=-33);var o=by(t);im(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,u=by(t);Xv(t,u,l);break;default:throw Error(z(161))}}catch(h){Be(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H2(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;H2(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Kr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)L2(t,e.alternate,e),e=e.sibling}function ya(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ui(4,e,e.return),ya(e);break;case 1:js(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&k2(e,e.return,n),ya(e);break;case 27:vu(e.stateNode);case 26:case 5:js(e,e.return),ya(e);break;case 22:e.memoizedState===null&&ya(e);break;case 30:ya(e);break;default:ya(e)}t=t.sibling}}function Jr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,r=t,i=e,a=i.flags;switch(i.tag){case 0:case 11:case 15:Jr(r,i,n),Od(4,i);break;case 1:if(Jr(r,i,n),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){Be(s,s.return,u)}if(s=i,r=s.updateQueue,r!==null){var o=s.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)LN(l[r],o)}catch(u){Be(s,s.return,u)}}n&&a&64&&j2(i),mu(i,i.return);break;case 27:V2(i);case 26:case 5:Jr(r,i,n),n&&s===null&&a&4&&M2(i),mu(i,i.return);break;case 12:Jr(r,i,n);break;case 13:Jr(r,i,n),n&&a&4&&B2(r,i);break;case 22:i.memoizedState===null&&Jr(r,i,n),mu(i,i.return);break;case 30:break;default:Jr(r,i,n)}e=e.sibling}}function hx(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Pd(n))}function fx(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Pd(t))}function As(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)q2(t,e,n,s),e=e.sibling}function q2(t,e,n,s){var r=e.flags;switch(e.tag){case 0:case 11:case 15:As(t,e,n,s),r&2048&&Od(9,e);break;case 1:As(t,e,n,s);break;case 3:As(t,e,n,s),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Pd(t)));break;case 12:if(r&2048){As(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,a=i.id,o=i.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Be(e,e.return,l)}}else As(t,e,n,s);break;case 13:As(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,a=e.alternate,e.memoizedState!==null?i._visibility&2?As(t,e,n,s):pu(t,e):i._visibility&2?As(t,e,n,s):(i._visibility|=2,To(t,e,n,s,(e.subtreeFlags&10256)!==0)),r&2048&&hx(a,e);break;case 24:As(t,e,n,s),r&2048&&fx(e.alternate,e);break;default:As(t,e,n,s)}}function To(t,e,n,s,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var i=t,a=e,o=n,l=s,u=a.flags;switch(a.tag){case 0:case 11:case 15:To(i,a,o,l,r),Od(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?To(i,a,o,l,r):pu(i,a):(h._visibility|=2,To(i,a,o,l,r)),r&&u&2048&&hx(a.alternate,a);break;case 24:To(i,a,o,l,r),r&&u&2048&&fx(a.alternate,a);break;default:To(i,a,o,l,r)}e=e.sibling}}function pu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,r=s.flags;switch(s.tag){case 22:pu(n,s),r&2048&&hx(s.alternate,s);break;case 24:pu(n,s),r&2048&&fx(s.alternate,s);break;default:pu(n,s)}e=e.sibling}}var Qc=8192;function po(t){if(t.subtreeFlags&Qc)for(t=t.child;t!==null;)G2(t),t=t.sibling}function G2(t){switch(t.tag){case 26:po(t),t.flags&Qc&&t.memoizedState!==null&&h6(cs,t.memoizedState,t.memoizedProps);break;case 5:po(t);break;case 3:case 4:var e=cs;cs=hm(t.stateNode.containerInfo),po(t),cs=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Qc,Qc=16777216,po(t),Qc=e):po(t));break;default:po(t)}}function $2(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function zc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ct=s,K2(s,t)}$2(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Y2(t),t=t.sibling}function Y2(t){switch(t.tag){case 0:case 11:case 15:zc(t),t.flags&2048&&Ui(9,t,t.return);break;case 3:zc(t);break;case 12:zc(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,bf(t)):zc(t);break;default:zc(t)}}function bf(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ct=s,K2(s,t)}$2(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ui(8,e,e.return),bf(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,bf(e));break;default:bf(e)}t=t.sibling}}function K2(t,e){for(;Ct!==null;){var n=Ct;switch(n.tag){case 0:case 11:case 15:Ui(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Pd(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Ct=s;else e:for(n=t;Ct!==null;){s=Ct;var r=s.sibling,i=s.return;if(U2(s),s===n){Ct=null;break e}if(r!==null){r.return=i,Ct=r;break e}Ct=i}}}var R3={getCacheForType:function(t){var e=Xt(bt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},N3=typeof WeakMap=="function"?WeakMap:Map,Me=0,He=null,xe=null,Se=0,ke=0,En=null,xi=!1,Jl=!1,mx=!1,Ir=0,ot=0,Fi=0,Ma=0,px=0,Wn=0,Cl=0,gu=null,fn=null,Zv=!1,gx=0,am=1/0,om=null,Ri=null,Ot=0,Ni=null,Rl=null,tl=0,Jv=0,e0=null,W2=null,yu=0,t0=null;function Dn(){if(Me&2&&Se!==0)return Se&-Se;if(oe.T!==null){var t=Tl;return t!==0?t:vx()}return aN()}function Q2(){Wn===0&&(Wn=!(Se&536870912)||De?nN():536870912);var t=Zn.current;return t!==null&&(t.flags|=32),Wn}function Pn(t,e,n){(t===He&&(ke===2||ke===9)||t.cancelPendingCommit!==null)&&(Nl(t,0),wi(t,Se,Wn,!1)),Cd(t,n),(!(Me&2)||t!==He)&&(t===He&&(!(Me&2)&&(Ma|=n),ot===4&&wi(t,Se,Wn,!1)),Zs(t))}function X2(t,e,n){if(Me&6)throw Error(z(327));var s=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Ad(t,e),r=s?P3(t,e):_y(t,e,!0),i=s;do{if(r===0){Jl&&!s&&wi(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!I3(n)){r=_y(t,e,!1),i=!1;continue}if(r===2){if(i=e,t.errorRecoveryDisabledLanes&i)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=gu;var l=o.current.memoizedState.isDehydrated;if(l&&(Nl(o,a).flags|=256),a=_y(o,a,!1),a!==2){if(mx&&!l){o.errorRecoveryDisabledLanes|=i,Ma|=i,r=4;break e}i=fn,fn=r,i!==null&&(fn===null?fn=i:fn.push.apply(fn,i))}r=a}if(i=!1,r!==2)continue}}if(r===1){Nl(t,0),wi(t,e,0,!0);break}e:{switch(s=t,i=r,i){case 0:case 1:throw Error(z(345));case 4:if((e&4194048)!==e)break;case 6:wi(s,e,Wn,!xi);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(z(329))}if((e&62914560)===e&&(r=gx+300-Ms(),10<r)){if(wi(s,e,Wn,!xi),op(s,0,!0)!==0)break e;s.timeoutHandle=gI(nS.bind(null,s,n,fn,om,Zv,e,Wn,Ma,Cl,xi,i,2,-0,0),r);break e}nS(s,n,fn,om,Zv,e,Wn,Ma,Cl,xi,i,0,-0,0)}}break}while(!0);Zs(t)}function nS(t,e,n,s,r,i,a,o,l,u,h,f,m,p){if(t.timeoutHandle=-1,f=e.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(Bu={stylesheets:null,count:0,unsuspend:d6},G2(e),f=f6(),f!==null)){t.cancelPendingCommit=f(rS.bind(null,t,e,i,n,s,r,a,o,l,h,1,m,p)),wi(t,i,a,!u);return}rS(t,e,i,n,s,r,a,o,l)}function I3(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!On(i(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wi(t,e,n,s){e&=~px,e&=~Ma,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var r=e;0<r;){var i=31-In(r),a=1<<i;s[i]=-1,r&=~a}n!==0&&rN(t,n,e)}function yp(){return Me&6?!0:(Vd(0),!1)}function yx(){if(xe!==null){if(ke===0)var t=xe.return;else t=xe,vr=eo=null,sx(t),el=null,Lu=0,t=xe;for(;t!==null;)P2(t.alternate,t),t=t.return;xe=null}}function Nl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,K3(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),yx(),He=t,xe=n=Tr(t.current,null),Se=e,ke=0,En=null,xi=!1,Jl=Ad(t,e),mx=!1,Cl=Wn=px=Ma=Fi=ot=0,fn=gu=null,Zv=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var r=31-In(s),i=1<<r;e|=t[r],s&=~i}return Ir=e,dp(),n}function Z2(t,e){ve=null,oe.H=em,e===jd||e===fp?(e=kE(),ke=3):e===ON?(e=kE(),ke=4):ke=e===A2?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,En=e,xe===null&&(ot=1,sm(t,Kn(e,t.current)))}function J2(){var t=oe.H;return oe.H=em,t===null?em:t}function eI(){var t=oe.A;return oe.A=R3,t}function n0(){ot=4,xi||(Se&4194048)!==Se&&Zn.current!==null||(Jl=!0),!(Fi&134217727)&&!(Ma&134217727)||He===null||wi(He,Se,Wn,!1)}function _y(t,e,n){var s=Me;Me|=2;var r=J2(),i=eI();(He!==t||Se!==e)&&(om=null,Nl(t,e)),e=!1;var a=ot;e:do try{if(ke!==0&&xe!==null){var o=xe,l=En;switch(ke){case 8:yx(),a=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(e=!0);var u=ke;if(ke=0,En=null,Bo(t,o,l,u),n&&Jl){a=0;break e}break;default:u=ke,ke=0,En=null,Bo(t,o,l,u)}}D3(),a=ot;break}catch(h){Z2(t,h)}while(!0);return e&&t.shellSuspendCounter++,vr=eo=null,Me=s,oe.H=r,oe.A=i,xe===null&&(He=null,Se=0,dp()),a}function D3(){for(;xe!==null;)tI(xe)}function P3(t,e){var n=Me;Me|=2;var s=J2(),r=eI();He!==t||Se!==e?(om=null,am=Ms()+500,Nl(t,e)):Jl=Ad(t,e);e:do try{if(ke!==0&&xe!==null){e=xe;var i=En;t:switch(ke){case 1:ke=0,En=null,Bo(t,e,i,1);break;case 2:case 9:if(jE(i)){ke=0,En=null,sS(e);break}e=function(){ke!==2&&ke!==9||He!==t||(ke=7),Zs(t)},i.then(e,e);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:jE(i)?(ke=0,En=null,sS(e)):(ke=0,En=null,Bo(t,e,i,7));break;case 5:var a=null;switch(xe.tag){case 26:a=xe.memoizedState;case 5:case 27:var o=xe;if(!a||xI(a)){ke=0,En=null;var l=o.sibling;if(l!==null)xe=l;else{var u=o.return;u!==null?(xe=u,vp(u)):xe=null}break t}}ke=0,En=null,Bo(t,e,i,5);break;case 6:ke=0,En=null,Bo(t,e,i,6);break;case 8:yx(),ot=6;break e;default:throw Error(z(462))}}j3();break}catch(h){Z2(t,h)}while(!0);return vr=eo=null,oe.H=s,oe.A=r,Me=n,xe!==null?0:(He=null,Se=0,dp(),ot)}function j3(){for(;xe!==null&&!tL();)tI(xe)}function tI(t){var e=D2(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,e===null?vp(t):xe=e}function sS(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=QE(n,e,e.pendingProps,e.type,void 0,Se);break;case 11:e=QE(n,e,e.pendingProps,e.type.render,e.ref,Se);break;case 5:sx(e);default:P2(n,e),e=xe=PN(e,Ir),e=D2(n,e,Ir)}t.memoizedProps=t.pendingProps,e===null?vp(t):xe=e}function Bo(t,e,n,s){vr=eo=null,sx(e),el=null,Lu=0;var r=e.return;try{if(_3(t,r,e,n,Se)){ot=1,sm(t,Kn(n,t.current)),xe=null;return}}catch(i){if(r!==null)throw xe=r,i;ot=1,sm(t,Kn(n,t.current)),xe=null;return}e.flags&32768?(De||s===1?t=!0:Jl||Se&536870912?t=!1:(xi=t=!0,(s===2||s===9||s===3||s===6)&&(s=Zn.current,s!==null&&s.tag===13&&(s.flags|=16384))),nI(e,t)):vp(e)}function vp(t){var e=t;do{if(e.flags&32768){nI(e,xi);return}t=e.return;var n=E3(e.alternate,e,Ir);if(n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);ot===0&&(ot=5)}function nI(t,e){do{var n=S3(t.alternate,t);if(n!==null){n.flags&=32767,xe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){xe=t;return}xe=t=n}while(t!==null);ot=6,xe=null}function rS(t,e,n,s,r,i,a,o,l){t.cancelPendingCommit=null;do bp();while(Ot!==0);if(Me&6)throw Error(z(327));if(e!==null){if(e===t.current)throw Error(z(177));if(i=e.lanes|e.childLanes,i|=qb,dL(t,n,i,a,o,l),t===He&&(xe=He=null,Se=0),Rl=e,Ni=t,tl=n,Jv=i,e0=r,W2=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,V3(qf,function(){return oI(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=oe.T,oe.T=null,r=Pe.p,Pe.p=2,a=Me,Me|=4;try{A3(t,e,n)}finally{Me=a,Pe.p=r,oe.T=s}}Ot=1,sI(),rI(),iI()}}function sI(){if(Ot===1){Ot=0;var t=Ni,e=Rl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=oe.T,oe.T=null;var s=Pe.p;Pe.p=2;var r=Me;Me|=4;try{z2(e,t);var i=a0,a=EN(t.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&TN(o.ownerDocument.documentElement,o)){if(l!==null&&Hb(o)){var u=l.start,h=l.end;if(h===void 0&&(h=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(h,o.value.length);else{var f=o.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var p=m.getSelection(),E=o.textContent.length,w=Math.min(l.start,E),x=l.end===void 0?w:Math.min(l.end,E);!p.extend&&w>x&&(a=x,x=w,w=a);var v=SE(o,w),b=SE(o,x);if(v&&b&&(p.rangeCount!==1||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var _=f.createRange();_.setStart(v.node,v.offset),p.removeAllRanges(),w>x?(p.addRange(_),p.extend(b.node,b.offset)):(_.setEnd(b.node,b.offset),p.addRange(_))}}}}for(f=[],p=o;p=p.parentNode;)p.nodeType===1&&f.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var C=f[o];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}pm=!!i0,a0=i0=null}finally{Me=r,Pe.p=s,oe.T=n}}t.current=e,Ot=2}}function rI(){if(Ot===2){Ot=0;var t=Ni,e=Rl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=oe.T,oe.T=null;var s=Pe.p;Pe.p=2;var r=Me;Me|=4;try{L2(t,e.alternate,e)}finally{Me=r,Pe.p=s,oe.T=n}}Ot=3}}function iI(){if(Ot===4||Ot===3){Ot=0,nL();var t=Ni,e=Rl,n=tl,s=W2;e.subtreeFlags&10256||e.flags&10256?Ot=5:(Ot=0,Rl=Ni=null,aI(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Ri=null),Ob(n),e=e.stateNode,Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Sd,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=oe.T,r=Pe.p,Pe.p=2,oe.T=null;try{for(var i=t.onRecoverableError,a=0;a<s.length;a++){var o=s[a];i(o.value,{componentStack:o.stack})}}finally{oe.T=e,Pe.p=r}}tl&3&&bp(),Zs(t),r=t.pendingLanes,n&4194090&&r&42?t===t0?yu++:(yu=0,t0=t):yu=0,Vd(0)}}function aI(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Pd(e)))}function bp(t){return sI(),rI(),iI(),oI()}function oI(){if(Ot!==5)return!1;var t=Ni,e=Jv;Jv=0;var n=Ob(tl),s=oe.T,r=Pe.p;try{Pe.p=32>n?32:n,oe.T=null,n=e0,e0=null;var i=Ni,a=tl;if(Ot=0,Rl=Ni=null,tl=0,Me&6)throw Error(z(331));var o=Me;if(Me|=4,Y2(i.current),q2(i,i.current,a,n),Me=o,Vd(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Sd,i)}catch{}return!0}finally{Pe.p=r,oe.T=s,aI(t,e)}}function iS(t,e,n){e=Kn(n,e),e=Kv(t.stateNode,e,2),t=Ci(t,e,2),t!==null&&(Cd(t,2),Zs(t))}function Be(t,e,n){if(t.tag===3)iS(t,t,n);else for(;e!==null;){if(e.tag===3){iS(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ri===null||!Ri.has(s))){t=Kn(n,t),n=E2(2),s=Ci(e,n,2),s!==null&&(S2(n,s,e,t),Cd(s,2),Zs(s));break}}e=e.return}}function Ty(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new N3;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(mx=!0,r.add(n),t=k3.bind(null,t,e,n),e.then(t,t))}function k3(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,He===t&&(Se&n)===n&&(ot===4||ot===3&&(Se&62914560)===Se&&300>Ms()-gx?!(Me&2)&&Nl(t,0):px|=n,Cl===Se&&(Cl=0)),Zs(t)}function lI(t,e){e===0&&(e=sN()),t=Zl(t,e),t!==null&&(Cd(t,e),Zs(t))}function M3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lI(t,n)}function O3(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(z(314))}s!==null&&s.delete(e),lI(t,n)}function V3(t,e){return kb(t,e)}var lm=null,Eo=null,s0=!1,cm=!1,Ey=!1,Oa=0;function Zs(t){t!==Eo&&t.next===null&&(Eo===null?lm=Eo=t:Eo=Eo.next=t),cm=!0,s0||(s0=!0,U3())}function Vd(t,e){if(!Ey&&cm){Ey=!0;do for(var n=!1,s=lm;s!==null;){if(t!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var a=s.suspendedLanes,o=s.pingedLanes;i=(1<<31-In(42|t)+1)-1,i&=r&~(a&~o),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,aS(s,i))}else i=Se,i=op(s,s===He?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Ad(s,i)||(n=!0,aS(s,i));s=s.next}while(n);Ey=!1}}function L3(){cI()}function cI(){cm=s0=!1;var t=0;Oa!==0&&(Y3()&&(t=Oa),Oa=0);for(var e=Ms(),n=null,s=lm;s!==null;){var r=s.next,i=uI(s,e);i===0?(s.next=null,n===null?lm=r:n.next=r,r===null&&(Eo=n)):(n=s,(t!==0||i&3)&&(cm=!0)),s=r}Vd(t)}function uI(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var a=31-In(i),o=1<<a,l=r[a];l===-1?(!(o&n)||o&s)&&(r[a]=uL(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}if(e=He,n=Se,n=op(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(ke===2||ke===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Qg(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ad(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Qg(s),Ob(n)){case 2:case 8:n=eN;break;case 32:n=qf;break;case 268435456:n=tN;break;default:n=qf}return s=dI.bind(null,t),n=kb(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Qg(s),t.callbackPriority=2,t.callbackNode=null,2}function dI(t,e){if(Ot!==0&&Ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(bp()&&t.callbackNode!==n)return null;var s=Se;return s=op(t,t===He?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(X2(t,s,e),uI(t,Ms()),t.callbackNode!=null&&t.callbackNode===n?dI.bind(null,t):null)}function aS(t,e){if(bp())return null;X2(t,e,!0)}function U3(){W3(function(){Me&6?kb(JR,L3):cI()})}function vx(){return Oa===0&&(Oa=nN()),Oa}function oS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:df(""+t)}function lS(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function F3(t,e,n,s,r){if(e==="submit"&&n&&n.stateNode===r){var i=oS((r[bn]||null).action),a=s.submitter;a&&(e=(e=a[bn]||null)?oS(e.formAction):a.getAttribute("formAction"),e!==null&&(i=e,a=null));var o=new lp("action","action",null,s,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Oa!==0){var l=a?lS(r,a):new FormData(r);$v(n,{pending:!0,data:l,method:r.method,action:i},null,l)}}else typeof i=="function"&&(o.preventDefault(),l=a?lS(r,a):new FormData(r),$v(n,{pending:!0,data:l,method:r.method,action:i},i,l))},currentTarget:r}]})}}for(var Sy=0;Sy<kv.length;Sy++){var Ay=kv[Sy],B3=Ay.toLowerCase(),z3=Ay[0].toUpperCase()+Ay.slice(1);ws(B3,"on"+z3)}ws(AN,"onAnimationEnd");ws(CN,"onAnimationIteration");ws(RN,"onAnimationStart");ws("dblclick","onDoubleClick");ws("focusin","onFocus");ws("focusout","onBlur");ws(i3,"onTransitionRun");ws(a3,"onTransitionStart");ws(o3,"onTransitionCancel");ws(NN,"onTransitionEnd");wl("onMouseEnter",["mouseout","mouseover"]);wl("onMouseLeave",["mouseout","mouseover"]);wl("onPointerEnter",["pointerout","pointerover"]);wl("onPointerLeave",["pointerout","pointerover"]);Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uu));function hI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=u;try{i(r)}catch(h){nm(h)}r.currentTarget=null,i=l}else for(a=0;a<s.length;a++){if(o=s[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=u;try{i(r)}catch(h){nm(h)}r.currentTarget=null,i=l}}}}function be(t,e){var n=e[Cv];n===void 0&&(n=e[Cv]=new Set);var s=t+"__bubble";n.has(s)||(fI(e,t,2,!1),n.add(s))}function Cy(t,e,n){var s=0;e&&(s|=4),fI(n,t,s,e)}var zh="_reactListening"+Math.random().toString(36).slice(2);function bx(t){if(!t[zh]){t[zh]=!0,oN.forEach(function(n){n!=="selectionchange"&&(H3.has(n)||Cy(n,!1,t),Cy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zh]||(e[zh]=!0,Cy("selectionchange",!1,e))}}function fI(t,e,n,s){switch(SI(e)){case 2:var r=g6;break;case 8:r=y6;break;default:r=Tx}n=r.bind(null,e,n,t),r=void 0,!Dv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ry(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=s.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=Po(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){s=i=a;continue e}o=o.parentNode}}s=s.return}pN(function(){var u=i,h=Ub(n),f=[];e:{var m=IN.get(t);if(m!==void 0){var p=lp,E=t;switch(t){case"keypress":if(ff(n)===0)break e;case"keydown":case"keyup":p=VL;break;case"focusin":E="focus",p=ry;break;case"focusout":E="blur",p=ry;break;case"beforeblur":case"afterblur":p=ry;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=FL;break;case AN:case CN:case RN:p=RL;break;case NN:p=zL;break;case"scroll":case"scrollend":p=TL;break;case"wheel":p=qL;break;case"copy":case"cut":case"paste":p=IL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=yE;break;case"toggle":case"beforetoggle":p=$L}var w=(e&4)!==0,x=!w&&(t==="scroll"||t==="scrollend"),v=w?m!==null?m+"Capture":null:m;w=[];for(var b=u,_;b!==null;){var C=b;if(_=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||_===null||v===null||(C=ju(b,v),C!=null&&w.push(Fu(b,C,_))),x)break;b=b.return}0<w.length&&(m=new p(m,E,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Iv&&(E=n.relatedTarget||n.fromElement)&&(Po(E)||E[Ql]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(E=n.relatedTarget||n.toElement,p=u,E=E?Po(E):null,E!==null&&(x=Ed(E),w=E.tag,E!==x||w!==5&&w!==27&&w!==6)&&(E=null)):(p=null,E=u),p!==E)){if(w=pE,C="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(w=yE,C="onPointerLeave",v="onPointerEnter",b="pointer"),x=p==null?m:Wc(p),_=E==null?m:Wc(E),m=new w(C,b+"leave",p,n,h),m.target=x,m.relatedTarget=_,C=null,Po(h)===u&&(w=new w(v,b+"enter",E,n,h),w.target=_,w.relatedTarget=x,C=w),x=C,p&&E)t:{for(w=p,v=E,b=0,_=w;_;_=go(_))b++;for(_=0,C=v;C;C=go(C))_++;for(;0<b-_;)w=go(w),b--;for(;0<_-b;)v=go(v),_--;for(;b--;){if(w===v||v!==null&&w===v.alternate)break t;w=go(w),v=go(v)}w=null}else w=null;p!==null&&cS(f,m,p,w,!1),E!==null&&x!==null&&cS(f,x,E,w,!0)}}e:{if(m=u?Wc(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var P=wE;else if(xE(m))if(wN)P=n3;else{P=e3;var M=JL}else p=m.nodeName,!p||p.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&Lb(u.elementType)&&(P=wE):P=t3;if(P&&(P=P(t,u))){xN(f,P,n,h);break e}M&&M(t,m,u),t==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Nv(m,"number",m.value)}switch(M=u?Wc(u):window,t){case"focusin":(xE(M)||M.contentEditable==="true")&&(Mo=M,Pv=u,ou=null);break;case"focusout":ou=Pv=Mo=null;break;case"mousedown":jv=!0;break;case"contextmenu":case"mouseup":case"dragend":jv=!1,AE(f,n,h);break;case"selectionchange":if(r3)break;case"keydown":case"keyup":AE(f,n,h)}var A;if(zb)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ko?vN(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(yN&&n.locale!=="ko"&&(ko||S!=="onCompositionStart"?S==="onCompositionEnd"&&ko&&(A=gN()):(bi=h,Fb="value"in bi?bi.value:bi.textContent,ko=!0)),M=um(u,S),0<M.length&&(S=new gE(S,t,null,n,h),f.push({event:S,listeners:M}),A?S.data=A:(A=bN(n),A!==null&&(S.data=A)))),(A=KL?WL(t,n):QL(t,n))&&(S=um(u,"onBeforeInput"),0<S.length&&(M=new gE("onBeforeInput","beforeinput",null,n,h),f.push({event:M,listeners:S}),M.data=A)),F3(f,t,u,n,h)}hI(f,e)})}function Fu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function um(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=ju(t,n),r!=null&&s.unshift(Fu(t,r,i)),r=ju(t,e),r!=null&&s.push(Fu(t,r,i))),t.tag===3)return s;t=t.return}return[]}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function cS(t,e,n,s,r){for(var i=e._reactName,a=[];n!==null&&n!==s;){var o=n,l=o.alternate,u=o.stateNode;if(o=o.tag,l!==null&&l===s)break;o!==5&&o!==26&&o!==27||u===null||(l=u,r?(u=ju(n,i),u!=null&&a.unshift(Fu(n,u,l))):r||(u=ju(n,i),u!=null&&a.push(Fu(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var q3=/\r\n?/g,G3=/\u0000|\uFFFD/g;function uS(t){return(typeof t=="string"?t:""+t).replace(q3,`
`).replace(G3,"")}function mI(t,e){return e=uS(e),uS(t)===e}function xp(){}function Ve(t,e,n,s,r,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||_l(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&_l(t,""+s);break;case"className":Mh(t,"class",s);break;case"tabIndex":Mh(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Mh(t,n,s);break;case"style":mN(t,s,i);break;case"data":if(e!=="object"){Mh(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=df(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&Ve(t,e,"name",r.name,r,null),Ve(t,e,"formEncType",r.formEncType,r,null),Ve(t,e,"formMethod",r.formMethod,r,null),Ve(t,e,"formTarget",r.formTarget,r,null)):(Ve(t,e,"encType",r.encType,r,null),Ve(t,e,"method",r.method,r,null),Ve(t,e,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=df(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=xp);break;case"onScroll":s!=null&&be("scroll",t);break;case"onScrollEnd":s!=null&&be("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=df(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":be("beforetoggle",t),be("toggle",t),uf(t,"popover",s);break;case"xlinkActuate":or(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":or(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":or(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":or(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":or(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":or(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":or(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":or(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":or(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":uf(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=wL.get(n)||n,uf(t,n,s))}}function r0(t,e,n,s,r,i){switch(n){case"style":mN(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"children":typeof s=="string"?_l(t,s):(typeof s=="number"||typeof s=="bigint")&&_l(t,""+s);break;case"onScroll":s!=null&&be("scroll",t);break;case"onScrollEnd":s!=null&&be("scrollend",t);break;case"onClick":s!=null&&(t.onclick=xp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lN.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),i=t[bn]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,r);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):uf(t,n,s)}}}function Lt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",t),be("load",t);var s=!1,r=!1,i;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(a!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Ve(t,e,i,a,n,null)}}r&&Ve(t,e,"srcSet",n.srcSet,n,null),s&&Ve(t,e,"src",n.src,n,null);return;case"input":be("invalid",t);var o=i=a=r=null,l=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(z(137,e));break;default:Ve(t,e,s,h,n,null)}}dN(t,i,o,l,u,a,r,!1),Gf(t);return;case"select":be("invalid",t),s=a=i=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":i=o;break;case"defaultValue":a=o;break;case"multiple":s=o;default:Ve(t,e,r,o,n,null)}e=i,n=a,t.multiple=!!s,e!=null?Wo(t,!!s,e,!1):n!=null&&Wo(t,!!s,n,!0);return;case"textarea":be("invalid",t),i=r=s=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":s=o;break;case"defaultValue":r=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(z(91));break;default:Ve(t,e,a,o,n,null)}fN(t,s,r,i),Gf(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(s=n[l],s!=null))switch(l){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ve(t,e,l,s,n,null)}return;case"dialog":be("beforetoggle",t),be("toggle",t),be("cancel",t),be("close",t);break;case"iframe":case"object":be("load",t);break;case"video":case"audio":for(s=0;s<Uu.length;s++)be(Uu[s],t);break;case"image":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"embed":case"source":case"link":be("error",t),be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Ve(t,e,u,s,n,null)}return;default:if(Lb(e)){for(h in n)n.hasOwnProperty(h)&&(s=n[h],s!==void 0&&r0(t,e,h,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&Ve(t,e,o,s,n,null))}function $3(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,a=null,o=null,l=null,u=null,h=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&f!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=f;default:s.hasOwnProperty(p)||Ve(t,e,p,null,s,f)}}for(var m in s){var p=s[m];if(f=n[m],s.hasOwnProperty(m)&&(p!=null||f!=null))switch(m){case"type":i=p;break;case"name":r=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(z(137,e));break;default:p!==f&&Ve(t,e,m,p,s,f)}}Rv(t,a,o,l,u,h,i,r);return;case"select":p=a=o=m=null;for(i in n)if(l=n[i],n.hasOwnProperty(i)&&l!=null)switch(i){case"value":break;case"multiple":p=l;default:s.hasOwnProperty(i)||Ve(t,e,i,null,s,l)}for(r in s)if(i=s[r],l=n[r],s.hasOwnProperty(r)&&(i!=null||l!=null))switch(r){case"value":m=i;break;case"defaultValue":o=i;break;case"multiple":a=i;default:i!==l&&Ve(t,e,r,i,s,l)}e=o,n=a,s=p,m!=null?Wo(t,!!n,m,!1):!!s!=!!n&&(e!=null?Wo(t,!!n,e,!0):Wo(t,!!n,n?[]:"",!1));return;case"textarea":p=m=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ve(t,e,o,null,s,r)}for(a in s)if(r=s[a],i=n[a],s.hasOwnProperty(a)&&(r!=null||i!=null))switch(a){case"value":m=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(z(91));break;default:r!==i&&Ve(t,e,a,r,s,i)}hN(t,m,p);return;case"option":for(var E in n)if(m=n[E],n.hasOwnProperty(E)&&m!=null&&!s.hasOwnProperty(E))switch(E){case"selected":t.selected=!1;break;default:Ve(t,e,E,null,s,m)}for(l in s)if(m=s[l],p=n[l],s.hasOwnProperty(l)&&m!==p&&(m!=null||p!=null))switch(l){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ve(t,e,l,m,s,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!s.hasOwnProperty(w)&&Ve(t,e,w,null,s,m);for(u in s)if(m=s[u],p=n[u],s.hasOwnProperty(u)&&m!==p&&(m!=null||p!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(z(137,e));break;default:Ve(t,e,u,m,s,p)}return;default:if(Lb(e)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!s.hasOwnProperty(x)&&r0(t,e,x,void 0,s,m);for(h in s)m=s[h],p=n[h],!s.hasOwnProperty(h)||m===p||m===void 0&&p===void 0||r0(t,e,h,m,s,p);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v)&&Ve(t,e,v,null,s,m);for(f in s)m=s[f],p=n[f],!s.hasOwnProperty(f)||m===p||m==null&&p==null||Ve(t,e,f,m,s,p)}var i0=null,a0=null;function dm(t){return t.nodeType===9?t:t.ownerDocument}function dS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pI(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function o0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ny=null;function Y3(){var t=window.event;return t&&t.type==="popstate"?t===Ny?!1:(Ny=t,!0):(Ny=null,!1)}var gI=typeof setTimeout=="function"?setTimeout:void 0,K3=typeof clearTimeout=="function"?clearTimeout:void 0,hS=typeof Promise=="function"?Promise:void 0,W3=typeof queueMicrotask=="function"?queueMicrotask:typeof hS<"u"?function(t){return hS.resolve(null).then(t).catch(Q3)}:gI;function Q3(t){setTimeout(function(){throw t})}function Ji(t){return t==="head"}function fS(t,e){var n=e,s=0,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(0<s&&8>s){n=s;var a=t.ownerDocument;if(n&1&&vu(a.documentElement),n&2&&vu(a.body),n&4)for(n=a.head,vu(n),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Rd]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}if(r===0){t.removeChild(i),Gu(e);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:s=n.charCodeAt(0)-48;else s=0;n=i}while(n);Gu(e)}function l0(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":l0(n),Vb(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function X3(t,e,n,s){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Rd])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=ms(t.nextSibling),t===null)break}return null}function Z3(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ms(t.nextSibling),t===null))return null;return t}function c0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function J3(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var u0=null;function mS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function yI(t,e,n){switch(e=dm(n),t){case"html":if(t=e.documentElement,!t)throw Error(z(452));return t;case"head":if(t=e.head,!t)throw Error(z(453));return t;case"body":if(t=e.body,!t)throw Error(z(454));return t;default:throw Error(z(451))}}function vu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Vb(t)}var Jn=new Map,pS=new Set;function hm(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Br=Pe.d;Pe.d={f:e6,r:t6,D:n6,C:s6,L:r6,m:i6,X:o6,S:a6,M:l6};function e6(){var t=Br.f(),e=yp();return t||e}function t6(t){var e=Xl(t);e!==null&&e.tag===5&&e.type==="form"?u2(e):Br.r(t)}var ec=typeof document>"u"?null:document;function vI(t,e,n){var s=ec;if(s&&typeof e=="string"&&e){var r=Yn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),pS.has(r)||(pS.add(r),t={rel:t,crossOrigin:n,href:e},s.querySelector(r)===null&&(e=s.createElement("link"),Lt(e,"link",t),Rt(e),s.head.appendChild(e)))}}function n6(t){Br.D(t),vI("dns-prefetch",t,null)}function s6(t,e){Br.C(t,e),vI("preconnect",t,e)}function r6(t,e,n){Br.L(t,e,n);var s=ec;if(s&&t&&e){var r='link[rel="preload"][as="'+Yn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Yn(n.imageSizes)+'"]')):r+='[href="'+Yn(t)+'"]';var i=r;switch(e){case"style":i=Il(t);break;case"script":i=tc(t)}Jn.has(i)||(t=$e({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Jn.set(i,t),s.querySelector(r)!==null||e==="style"&&s.querySelector(Ld(i))||e==="script"&&s.querySelector(Ud(i))||(e=s.createElement("link"),Lt(e,"link",t),Rt(e),s.head.appendChild(e)))}}function i6(t,e){Br.m(t,e);var n=ec;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Yn(s)+'"][href="'+Yn(t)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=tc(t)}if(!Jn.has(i)&&(t=$e({rel:"modulepreload",href:t},e),Jn.set(i,t),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ud(i)))return}s=n.createElement("link"),Lt(s,"link",t),Rt(s),n.head.appendChild(s)}}}function a6(t,e,n){Br.S(t,e,n);var s=ec;if(s&&t){var r=Ko(s).hoistableStyles,i=Il(t);e=e||"default";var a=r.get(i);if(!a){var o={loading:0,preload:null};if(a=s.querySelector(Ld(i)))o.loading=5;else{t=$e({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Jn.get(i))&&xx(t,n);var l=a=s.createElement("link");Rt(l),Lt(l,"link",t),l._p=new Promise(function(u,h){l.onload=u,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,xf(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(i,a)}}}function o6(t,e){Br.X(t,e);var n=ec;if(n&&t){var s=Ko(n).hoistableScripts,r=tc(t),i=s.get(r);i||(i=n.querySelector(Ud(r)),i||(t=$e({src:t,async:!0},e),(e=Jn.get(r))&&wx(t,e),i=n.createElement("script"),Rt(i),Lt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function l6(t,e){Br.M(t,e);var n=ec;if(n&&t){var s=Ko(n).hoistableScripts,r=tc(t),i=s.get(r);i||(i=n.querySelector(Ud(r)),i||(t=$e({src:t,async:!0,type:"module"},e),(e=Jn.get(r))&&wx(t,e),i=n.createElement("script"),Rt(i),Lt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function gS(t,e,n,s){var r=(r=Si.current)?hm(r):null;if(!r)throw Error(z(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Il(n.href),n=Ko(r).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Il(n.href);var i=Ko(r).hoistableStyles,a=i.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,a),(i=r.querySelector(Ld(t)))&&!i._p&&(a.instance=i,a.state.loading=5),Jn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Jn.set(t,n),i||c6(r,t,n,a.state))),e&&s===null)throw Error(z(528,""));return a}if(e&&s!==null)throw Error(z(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=tc(n),n=Ko(r).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(z(444,t))}}function Il(t){return'href="'+Yn(t)+'"'}function Ld(t){return'link[rel="stylesheet"]['+t+"]"}function bI(t){return $e({},t,{"data-precedence":t.precedence,precedence:null})}function c6(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Lt(e,"link",n),Rt(e),t.head.appendChild(e))}function tc(t){return'[src="'+Yn(t)+'"]'}function Ud(t){return"script[async]"+t}function yS(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+Yn(n.href)+'"]');if(s)return e.instance=s,Rt(s),s;var r=$e({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Rt(s),Lt(s,"style",r),xf(s,n.precedence,t),e.instance=s;case"stylesheet":r=Il(n.href);var i=t.querySelector(Ld(r));if(i)return e.state.loading|=4,e.instance=i,Rt(i),i;s=bI(n),(r=Jn.get(r))&&xx(s,r),i=(t.ownerDocument||t).createElement("link"),Rt(i);var a=i;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Lt(i,"link",s),e.state.loading|=4,xf(i,n.precedence,t),e.instance=i;case"script":return i=tc(n.src),(r=t.querySelector(Ud(i)))?(e.instance=r,Rt(r),r):(s=n,(r=Jn.get(i))&&(s=$e({},n),wx(s,r)),t=t.ownerDocument||t,r=t.createElement("script"),Rt(r),Lt(r,"link",s),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(z(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,xf(s,n.precedence,t));return e.instance}function xf(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,a=0;a<s.length;a++){var o=s[a];if(o.dataset.precedence===e)i=o;else if(i!==r)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function xx(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function wx(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var wf=null;function vS(t,e,n){if(wf===null){var s=new Map,r=wf=new Map;r.set(n,s)}else r=wf,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var i=n[r];if(!(i[Rd]||i[Qt]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var a=i.getAttribute(e)||"";a=t+a;var o=s.get(a);o?o.push(i):s.set(a,[i])}}return s}function bS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function u6(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function xI(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Bu=null;function d6(){}function h6(t,e,n){if(Bu===null)throw Error(z(475));var s=Bu;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=Il(n.href),i=t.querySelector(Ld(r));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=fm.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=i,Rt(i);return}i=t.ownerDocument||t,n=bI(n),(r=Jn.get(r))&&xx(n,r),i=i.createElement("link"),Rt(i);var a=i;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Lt(i,"link",n),e.instance=i}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(s.count++,e=fm.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}function f6(){if(Bu===null)throw Error(z(475));var t=Bu;return t.stylesheets&&t.count===0&&d0(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&d0(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function fm(){if(this.count--,this.count===0){if(this.stylesheets)d0(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var mm=null;function d0(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,mm=new Map,e.forEach(m6,t),mm=null,fm.call(t))}function m6(t,e){if(!(e.state.loading&4)){var n=mm.get(t);if(n)var s=n.get(null);else{n=new Map,mm.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var a=r[i];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}r=e.instance,a=r.getAttribute("data-precedence"),i=n.get(a)||s,i===s&&n.set(null,r),n.set(a,r),this.count++,s=fm.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var zu={$$typeof:pr,Provider:null,Consumer:null,_currentValue:Ia,_currentValue2:Ia,_threadCount:0};function p6(t,e,n,s,r,i,a,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xg(0),this.hiddenUpdates=Xg(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function wI(t,e,n,s,r,i,a,o,l,u,h,f){return t=new p6(t,e,n,a,o,l,u,f),e=1,i===!0&&(e|=24),i=An(3,null,null,e),t.current=i,i.stateNode=t,e=Wb(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},Xb(i),t}function _I(t){return t?(t=Lo,t):Lo}function TI(t,e,n,s,r,i){r=_I(r),s.context===null?s.context=r:s.pendingContext=r,s=Ai(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=Ci(t,s,e),n!==null&&(Pn(n,t,e),uu(n,t,e))}function xS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _x(t,e){xS(t,e),(t=t.alternate)&&xS(t,e)}function EI(t){if(t.tag===13){var e=Zl(t,67108864);e!==null&&Pn(e,t,67108864),_x(t,67108864)}}var pm=!0;function g6(t,e,n,s){var r=oe.T;oe.T=null;var i=Pe.p;try{Pe.p=2,Tx(t,e,n,s)}finally{Pe.p=i,oe.T=r}}function y6(t,e,n,s){var r=oe.T;oe.T=null;var i=Pe.p;try{Pe.p=8,Tx(t,e,n,s)}finally{Pe.p=i,oe.T=r}}function Tx(t,e,n,s){if(pm){var r=h0(s);if(r===null)Ry(t,e,s,gm,n),wS(t,s);else if(b6(r,t,e,n,s))s.stopPropagation();else if(wS(t,s),e&4&&-1<v6.indexOf(t)){for(;r!==null;){var i=Xl(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var a=pa(i.pendingLanes);if(a!==0){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-In(a);o.entanglements[1]|=l,a&=~l}Zs(i),!(Me&6)&&(am=Ms()+500,Vd(0))}}break;case 13:o=Zl(i,2),o!==null&&Pn(o,i,2),yp(),_x(i,2)}if(i=h0(s),i===null&&Ry(t,e,s,gm,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Ry(t,e,s,null,n)}}function h0(t){return t=Ub(t),Ex(t)}var gm=null;function Ex(t){if(gm=null,t=Po(t),t!==null){var e=Ed(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=WR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return gm=t,null}function SI(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sL()){case JR:return 2;case eN:return 8;case qf:case rL:return 32;case tN:return 268435456;default:return 32}default:return 32}}var f0=!1,Ii=null,Di=null,Pi=null,Hu=new Map,qu=new Map,ci=[],v6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wS(t,e){switch(t){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Hu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qu.delete(e.pointerId)}}function Hc(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Xl(e),e!==null&&EI(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function b6(t,e,n,s,r){switch(e){case"focusin":return Ii=Hc(Ii,t,e,n,s,r),!0;case"dragenter":return Di=Hc(Di,t,e,n,s,r),!0;case"mouseover":return Pi=Hc(Pi,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Hu.set(i,Hc(Hu.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,qu.set(i,Hc(qu.get(i)||null,t,e,n,s,r)),!0}return!1}function AI(t){var e=Po(t.target);if(e!==null){var n=Ed(e);if(n!==null){if(e=n.tag,e===13){if(e=WR(n),e!==null){t.blockedOn=e,hL(t.priority,function(){if(n.tag===13){var s=Dn();s=Mb(s);var r=Zl(n,s);r!==null&&Pn(r,n,s),_x(n,s)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _f(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=h0(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Iv=s,n.target.dispatchEvent(s),Iv=null}else return e=Xl(n),e!==null&&EI(e),t.blockedOn=n,!1;e.shift()}return!0}function _S(t,e,n){_f(t)&&n.delete(e)}function x6(){f0=!1,Ii!==null&&_f(Ii)&&(Ii=null),Di!==null&&_f(Di)&&(Di=null),Pi!==null&&_f(Pi)&&(Pi=null),Hu.forEach(_S),qu.forEach(_S)}function Hh(t,e){t.blockedOn===e&&(t.blockedOn=null,f0||(f0=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,x6)))}var qh=null;function TS(t){qh!==t&&(qh=t,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,function(){qh===t&&(qh=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],r=t[e+2];if(typeof s!="function"){if(Ex(s||n)===null)continue;break}var i=Xl(n);i!==null&&(t.splice(e,3),e-=3,$v(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Gu(t){function e(l){return Hh(l,t)}Ii!==null&&Hh(Ii,t),Di!==null&&Hh(Di,t),Pi!==null&&Hh(Pi,t),Hu.forEach(e),qu.forEach(e);for(var n=0;n<ci.length;n++){var s=ci[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<ci.length&&(n=ci[0],n.blockedOn===null);)AI(n),n.blockedOn===null&&ci.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],a=r[bn]||null;if(typeof i=="function")a||TS(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(r=i,a=i[bn]||null)o=a.formAction;else if(Ex(r)!==null)continue}else o=a.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),TS(n)}}}function Sx(t){this._internalRoot=t}wp.prototype.render=Sx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));var n=e.current,s=Dn();TI(n,s,t,e,null,null)};wp.prototype.unmount=Sx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;TI(t.current,2,null,t,null,null),yp(),e[Ql]=null}};function wp(t){this._internalRoot=t}wp.prototype.unstable_scheduleHydration=function(t){if(t){var e=aN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ci.length&&e!==0&&e<ci[n].priority;n++);ci.splice(n,0,t),n===0&&AI(t)}};var ES=YR.version;if(ES!=="19.1.0")throw Error(z(527,ES,"19.1.0"));Pe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Q5(e),t=t!==null?QR(t):null,t=t===null?null:t.stateNode,t};var w6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{Sd=Gh.inject(w6),Nn=Gh}catch{}}ip.createRoot=function(t,e){if(!KR(t))throw Error(z(299));var n=!1,s="",r=w2,i=_2,a=T2,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=wI(t,1,!1,null,null,n,s,r,i,a,o,null),t[Ql]=e.current,bx(t),new Sx(e)};ip.hydrateRoot=function(t,e,n){if(!KR(t))throw Error(z(299));var s=!1,r="",i=w2,a=_2,o=T2,l=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),e=wI(t,1,!0,e,n??null,s,r,i,a,o,l,u),e.context=_I(null),n=e.current,s=Dn(),s=Mb(s),r=Ai(s),r.callback=null,Ci(n,r,s),n=s,e.current.lanes=n,Cd(e,n),Zs(e),t[Ql]=e.current,bx(t),new wp(e)};ip.version="19.1.0";function CI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CI)}catch(t){console.error(t)}}CI(),kR.exports=ip;var _6=kR.exports;function fe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function SS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function RI(...t){return e=>{let n=!1;const s=t.map(r=>{const i=SS(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():SS(t[r],null)}}}}function Qe(...t){return y.useCallback(RI(...t),t)}function T6(t,e){const n=y.createContext(e),s=i=>{const{children:a,...o}=i,l=y.useMemo(()=>o,Object.values(o));return c.jsx(n.Provider,{value:l,children:a})};s.displayName=t+"Provider";function r(i){const a=y.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[s,r]}function _s(t,e=[]){let n=[];function s(i,a){const o=y.createContext(a),l=n.length;n=[...n,a];const u=f=>{var v;const{scope:m,children:p,...E}=f,w=((v=m==null?void 0:m[t])==null?void 0:v[l])||o,x=y.useMemo(()=>E,Object.values(E));return c.jsx(w.Provider,{value:x,children:p})};u.displayName=i+"Provider";function h(f,m){var w;const p=((w=m==null?void 0:m[t])==null?void 0:w[l])||o,E=y.useContext(p);if(E)return E;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const r=()=>{const i=n.map(a=>y.createContext(a));return function(o){const l=(o==null?void 0:o[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return r.scopeName=t,[s,E6(r,...e)]}function E6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=s.reduce((o,{useScope:l,scopeName:u})=>{const f=l(i)[`__scope${u}`];return{...o,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function $u(t){const e=A6(t),n=y.forwardRef((s,r)=>{const{children:i,...a}=s,o=y.Children.toArray(i),l=o.find(C6);if(l){const u=l.props.children,h=o.map(f=>f===l?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...a,ref:r,children:y.isValidElement(u)?y.cloneElement(u,void 0,h):null})}return c.jsx(e,{...a,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}var S6=$u("Slot");function A6(t){const e=y.forwardRef((n,s)=>{const{children:r,...i}=n;if(y.isValidElement(r)){const a=N6(r),o=R6(i,r.props);return r.type!==y.Fragment&&(o.ref=s?RI(s,a):a),y.cloneElement(r,o)}return y.Children.count(r)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var NI=Symbol("radix.slottable");function II(t){const e=({children:n})=>c.jsx(c.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=NI,e}function C6(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===NI}function R6(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...o)=>{i(...o),r(...o)}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function N6(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var I6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=I6.reduce((t,e)=>{const n=$u(`Primitive.${e}`),s=y.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...o,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function DI(t,e){t&&Td.flushSync(()=>t.dispatchEvent(e))}function wt(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function D6(t,e=globalThis==null?void 0:globalThis.document){const n=wt(t);y.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var P6="DismissableLayer",m0="dismissableLayer.update",j6="dismissableLayer.pointerDownOutside",k6="dismissableLayer.focusOutside",AS,PI=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_p=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...l}=t,u=y.useContext(PI),[h,f]=y.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),E=Qe(e,A=>f(A)),w=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=w.indexOf(x),b=h?w.indexOf(h):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,C=b>=v,P=O6(A=>{const S=A.target,N=[...u.branches].some(R=>R.contains(S));!C||N||(r==null||r(A),a==null||a(A),A.defaultPrevented||o==null||o())},m),M=V6(A=>{const S=A.target;[...u.branches].some(R=>R.contains(S))||(i==null||i(A),a==null||a(A),A.defaultPrevented||o==null||o())},m);return D6(A=>{b===u.layers.size-1&&(s==null||s(A),!A.defaultPrevented&&o&&(A.preventDefault(),o()))},m),y.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(AS=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),CS(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=AS)}},[h,m,n,u]),y.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),CS())},[h,u]),y.useEffect(()=>{const A=()=>p({});return document.addEventListener(m0,A),()=>document.removeEventListener(m0,A)},[]),c.jsx(we.div,{...l,ref:E,style:{pointerEvents:_?C?"auto":"none":void 0,...t.style},onFocusCapture:fe(t.onFocusCapture,M.onFocusCapture),onBlurCapture:fe(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:fe(t.onPointerDownCapture,P.onPointerDownCapture)})});_p.displayName=P6;var M6="DismissableLayerBranch",jI=y.forwardRef((t,e)=>{const n=y.useContext(PI),s=y.useRef(null),r=Qe(e,s);return y.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(we.div,{...t,ref:r})});jI.displayName=M6;function O6(t,e=globalThis==null?void 0:globalThis.document){const n=wt(t),s=y.useRef(!1),r=y.useRef(()=>{});return y.useEffect(()=>{const i=o=>{if(o.target&&!s.current){let l=function(){kI(j6,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function V6(t,e=globalThis==null?void 0:globalThis.document){const n=wt(t),s=y.useRef(!1);return y.useEffect(()=>{const r=i=>{i.target&&!s.current&&kI(k6,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function CS(){const t=new CustomEvent(m0);document.dispatchEvent(t)}function kI(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?DI(r,i):r.dispatchEvent(i)}var L6=_p,U6=jI,Vn=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},F6=Db[" useId ".trim().toString()]||(()=>{}),B6=0;function nl(t){const[e,n]=y.useState(F6());return Vn(()=>{n(s=>s??String(B6++))},[t]),e?`radix-${e}`:""}const z6=["top","right","bottom","left"],Bi=Math.min,Sn=Math.max,ym=Math.round,$h=Math.floor,Vs=t=>({x:t,y:t}),H6={left:"right",right:"left",bottom:"top",top:"bottom"},q6={start:"end",end:"start"};function p0(t,e,n){return Sn(t,Bi(e,n))}function Dr(t,e){return typeof t=="function"?t(e):t}function Pr(t){return t.split("-")[0]}function nc(t){return t.split("-")[1]}function Ax(t){return t==="x"?"y":"x"}function Cx(t){return t==="y"?"height":"width"}function Sr(t){return["top","bottom"].includes(Pr(t))?"y":"x"}function Rx(t){return Ax(Sr(t))}function G6(t,e,n){n===void 0&&(n=!1);const s=nc(t),r=Rx(t),i=Cx(r);let a=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=vm(a)),[a,vm(a)]}function $6(t){const e=vm(t);return[g0(t),e,g0(e)]}function g0(t){return t.replace(/start|end/g,e=>q6[e])}function Y6(t,e,n){const s=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:s:e?s:r;case"left":case"right":return e?i:a;default:return[]}}function K6(t,e,n,s){const r=nc(t);let i=Y6(Pr(t),n==="start",s);return r&&(i=i.map(a=>a+"-"+r),e&&(i=i.concat(i.map(g0)))),i}function vm(t){return t.replace(/left|right|bottom|top/g,e=>H6[e])}function W6(t){return{top:0,right:0,bottom:0,left:0,...t}}function MI(t){return typeof t!="number"?W6(t):{top:t,right:t,bottom:t,left:t}}function bm(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function RS(t,e,n){let{reference:s,floating:r}=t;const i=Sr(e),a=Rx(e),o=Cx(a),l=Pr(e),u=i==="y",h=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[o]/2-r[o]/2;let p;switch(l){case"top":p={x:h,y:s.y-r.height};break;case"bottom":p={x:h,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:f};break;case"left":p={x:s.x-r.width,y:f};break;default:p={x:s.x,y:s.y}}switch(nc(e)){case"start":p[a]-=m*(n&&u?-1:1);break;case"end":p[a]+=m*(n&&u?-1:1);break}return p}const Q6=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:a}=n,o=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:h,y:f}=RS(u,s,l),m=s,p={},E=0;for(let w=0;w<o.length;w++){const{name:x,fn:v}=o[w],{x:b,y:_,data:C,reset:P}=await v({x:h,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:p,rects:u,platform:a,elements:{reference:t,floating:e}});h=b??h,f=_??f,p={...p,[x]:{...p[x],...C}},P&&E<=50&&(E++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(u=P.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:r}):P.rects),{x:h,y:f}=RS(u,m,l)),w=-1)}return{x:h,y:f,placement:m,strategy:r,middlewareData:p}};async function Yu(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:a,elements:o,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=Dr(e,t),E=MI(p),x=o[m?f==="floating"?"reference":"floating":f],v=bm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:h,strategy:l})),b=f==="floating"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},P=bm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:_,strategy:l}):b);return{top:(v.top-P.top+E.top)/C.y,bottom:(P.bottom-v.bottom+E.bottom)/C.y,left:(v.left-P.left+E.left)/C.x,right:(P.right-v.right+E.right)/C.x}}const X6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:h=0}=Dr(t,e)||{};if(u==null)return{};const f=MI(h),m={x:n,y:s},p=Rx(r),E=Cx(p),w=await a.getDimensions(u),x=p==="y",v=x?"top":"left",b=x?"bottom":"right",_=x?"clientHeight":"clientWidth",C=i.reference[E]+i.reference[p]-m[p]-i.floating[E],P=m[p]-i.reference[p],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let A=M?M[_]:0;(!A||!await(a.isElement==null?void 0:a.isElement(M)))&&(A=o.floating[_]||i.floating[E]);const S=C/2-P/2,N=A/2-w[E]/2-1,R=Bi(f[v],N),j=Bi(f[b],N),k=R,I=A-w[E]-j,H=A/2-w[E]/2+S,$=p0(k,H,I),L=!l.arrow&&nc(r)!=null&&H!==$&&i.reference[E]/2-(H<k?R:j)-w[E]/2<0,G=L?H<k?H-k:H-I:0;return{[p]:m[p]+G,data:{[p]:$,centerOffset:H-$-G,...L&&{alignmentOffset:G}},reset:L}}}),Z6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:a,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:w=!0,...x}=Dr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Pr(r),b=Sr(o),_=Pr(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),P=m||(_||!w?[vm(o)]:$6(o)),M=E!=="none";!m&&M&&P.push(...K6(o,w,E,C));const A=[o,...P],S=await Yu(e,x),N=[];let R=((s=i.flip)==null?void 0:s.overflows)||[];if(h&&N.push(S[v]),f){const $=G6(r,a,C);N.push(S[$[0]],S[$[1]])}if(R=[...R,{placement:r,overflows:N}],!N.every($=>$<=0)){var j,k;const $=(((j=i.flip)==null?void 0:j.index)||0)+1,L=A[$];if(L){var I;const q=f==="alignment"?b!==Sr(L):!1,X=((I=R[0])==null?void 0:I.overflows[0])>0;if(!q||X)return{data:{index:$,overflows:R},reset:{placement:L}}}let G=(k=R.filter(q=>q.overflows[0]<=0).sort((q,X)=>q.overflows[1]-X.overflows[1])[0])==null?void 0:k.placement;if(!G)switch(p){case"bestFit":{var H;const q=(H=R.filter(X=>{if(M){const Q=Sr(X.placement);return Q===b||Q==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(Q=>Q>0).reduce((Q,le)=>Q+le,0)]).sort((X,Q)=>X[1]-Q[1])[0])==null?void 0:H[0];q&&(G=q);break}case"initialPlacement":G=o;break}if(r!==G)return{reset:{placement:G}}}return{}}}};function NS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function IS(t){return z6.some(e=>t[e]>=0)}const J6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...r}=Dr(t,e);switch(s){case"referenceHidden":{const i=await Yu(e,{...r,elementContext:"reference"}),a=NS(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:IS(a)}}}case"escaped":{const i=await Yu(e,{...r,altBoundary:!0}),a=NS(i,n.floating);return{data:{escapedOffsets:a,escaped:IS(a)}}}default:return{}}}}};async function eU(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=Pr(n),o=nc(n),l=Sr(n)==="y",u=["left","top"].includes(a)?-1:1,h=i&&l?-1:1,f=Dr(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:E}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof E=="number"&&(p=o==="end"?E*-1:E),l?{x:p*h,y:m*u}:{x:m*u,y:p*h}}const tU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:a,middlewareData:o}=e,l=await eU(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:a}}}}},nU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:x=>{let{x:v,y:b}=x;return{x:v,y:b}}},...l}=Dr(t,e),u={x:n,y:s},h=await Yu(e,l),f=Sr(Pr(r)),m=Ax(f);let p=u[m],E=u[f];if(i){const x=m==="y"?"top":"left",v=m==="y"?"bottom":"right",b=p+h[x],_=p-h[v];p=p0(b,p,_)}if(a){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=E+h[x],_=E-h[v];E=p0(b,E,_)}const w=o.fn({...e,[m]:p,[f]:E});return{...w,data:{x:w.x-n,y:w.y-s,enabled:{[m]:i,[f]:a}}}}}},sU=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:r,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Dr(t,e),h={x:n,y:s},f=Sr(r),m=Ax(f);let p=h[m],E=h[f];const w=Dr(o,e),x=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const _=m==="y"?"height":"width",C=i.reference[m]-i.floating[_]+x.mainAxis,P=i.reference[m]+i.reference[_]-x.mainAxis;p<C?p=C:p>P&&(p=P)}if(u){var v,b;const _=m==="y"?"width":"height",C=["top","left"].includes(Pr(r)),P=i.reference[f]-i.floating[_]+(C&&((v=a.offset)==null?void 0:v[f])||0)+(C?0:x.crossAxis),M=i.reference[f]+i.reference[_]+(C?0:((b=a.offset)==null?void 0:b[f])||0)-(C?x.crossAxis:0);E<P?E=P:E>M&&(E=M)}return{[m]:p,[f]:E}}}},rU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:i,platform:a,elements:o}=e,{apply:l=()=>{},...u}=Dr(t,e),h=await Yu(e,u),f=Pr(r),m=nc(r),p=Sr(r)==="y",{width:E,height:w}=i.floating;let x,v;f==="top"||f==="bottom"?(x=f,v=m===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=f,x=m==="end"?"top":"bottom");const b=w-h.top-h.bottom,_=E-h.left-h.right,C=Bi(w-h[x],b),P=Bi(E-h[v],_),M=!e.middlewareData.shift;let A=C,S=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=_),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(A=b),M&&!m){const R=Sn(h.left,0),j=Sn(h.right,0),k=Sn(h.top,0),I=Sn(h.bottom,0);p?S=E-2*(R!==0||j!==0?R+j:Sn(h.left,h.right)):A=w-2*(k!==0||I!==0?k+I:Sn(h.top,h.bottom))}await l({...e,availableWidth:S,availableHeight:A});const N=await a.getDimensions(o.floating);return E!==N.width||w!==N.height?{reset:{rects:!0}}:{}}}};function Tp(){return typeof window<"u"}function sc(t){return OI(t)?(t.nodeName||"").toLowerCase():"#document"}function jn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Js(t){var e;return(e=(OI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OI(t){return Tp()?t instanceof Node||t instanceof jn(t).Node:!1}function gs(t){return Tp()?t instanceof Element||t instanceof jn(t).Element:!1}function qs(t){return Tp()?t instanceof HTMLElement||t instanceof jn(t).HTMLElement:!1}function DS(t){return!Tp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof jn(t).ShadowRoot}function Fd(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=ys(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!["inline","contents"].includes(r)}function iU(t){return["table","td","th"].includes(sc(t))}function Ep(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Nx(t){const e=Ix(),n=gs(t)?ys(t):t;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function aU(t){let e=zi(t);for(;qs(e)&&!Dl(e);){if(Nx(e))return e;if(Ep(e))return null;e=zi(e)}return null}function Ix(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dl(t){return["html","body","#document"].includes(sc(t))}function ys(t){return jn(t).getComputedStyle(t)}function Sp(t){return gs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zi(t){if(sc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||DS(t)&&t.host||Js(t);return DS(e)?e.host:e}function VI(t){const e=zi(t);return Dl(e)?t.ownerDocument?t.ownerDocument.body:t.body:qs(e)&&Fd(e)?e:VI(e)}function Ku(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=VI(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),a=jn(r);if(i){const o=y0(a);return e.concat(a,a.visualViewport||[],Fd(r)?r:[],o&&n?Ku(o):[])}return e.concat(r,Ku(r,[],n))}function y0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function LI(t){const e=ys(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=qs(t),i=r?t.offsetWidth:n,a=r?t.offsetHeight:s,o=ym(n)!==i||ym(s)!==a;return o&&(n=i,s=a),{width:n,height:s,$:o}}function Dx(t){return gs(t)?t:t.contextElement}function sl(t){const e=Dx(t);if(!qs(e))return Vs(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=LI(e);let a=(i?ym(n.width):n.width)/s,o=(i?ym(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const oU=Vs(0);function UI(t){const e=jn(t);return!Ix()||!e.visualViewport?oU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lU(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==jn(t)?!1:e}function za(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=Dx(t);let a=Vs(1);e&&(s?gs(s)&&(a=sl(s)):a=sl(t));const o=lU(i,n,s)?UI(i):Vs(0);let l=(r.left+o.x)/a.x,u=(r.top+o.y)/a.y,h=r.width/a.x,f=r.height/a.y;if(i){const m=jn(i),p=s&&gs(s)?jn(s):s;let E=m,w=y0(E);for(;w&&s&&p!==E;){const x=sl(w),v=w.getBoundingClientRect(),b=ys(w),_=v.left+(w.clientLeft+parseFloat(b.paddingLeft))*x.x,C=v.top+(w.clientTop+parseFloat(b.paddingTop))*x.y;l*=x.x,u*=x.y,h*=x.x,f*=x.y,l+=_,u+=C,E=jn(w),w=y0(E)}}return bm({width:h,height:f,x:l,y:u})}function Px(t,e){const n=Sp(t).scrollLeft;return e?e.left+n:za(Js(t)).left+n}function FI(t,e,n){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),r=s.left+e.scrollLeft-(n?0:Px(t,s)),i=s.top+e.scrollTop;return{x:r,y:i}}function cU(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",a=Js(s),o=e?Ep(e.floating):!1;if(s===a||o&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Vs(1);const h=Vs(0),f=qs(s);if((f||!f&&!i)&&((sc(s)!=="body"||Fd(a))&&(l=Sp(s)),qs(s))){const p=za(s);u=sl(s),h.x=p.x+s.clientLeft,h.y=p.y+s.clientTop}const m=a&&!f&&!i?FI(a,l,!0):Vs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-l.scrollTop*u.y+h.y+m.y}}function uU(t){return Array.from(t.getClientRects())}function dU(t){const e=Js(t),n=Sp(t),s=t.ownerDocument.body,r=Sn(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Sn(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+Px(t);const o=-n.scrollTop;return ys(s).direction==="rtl"&&(a+=Sn(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:a,y:o}}function hU(t,e){const n=jn(t),s=Js(t),r=n.visualViewport;let i=s.clientWidth,a=s.clientHeight,o=0,l=0;if(r){i=r.width,a=r.height;const u=Ix();(!u||u&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:i,height:a,x:o,y:l}}function fU(t,e){const n=za(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=qs(t)?sl(t):Vs(1),a=t.clientWidth*i.x,o=t.clientHeight*i.y,l=r*i.x,u=s*i.y;return{width:a,height:o,x:l,y:u}}function PS(t,e,n){let s;if(e==="viewport")s=hU(t,n);else if(e==="document")s=dU(Js(t));else if(gs(e))s=fU(e,n);else{const r=UI(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return bm(s)}function BI(t,e){const n=zi(t);return n===e||!gs(n)||Dl(n)?!1:ys(n).position==="fixed"||BI(n,e)}function mU(t,e){const n=e.get(t);if(n)return n;let s=Ku(t,[],!1).filter(o=>gs(o)&&sc(o)!=="body"),r=null;const i=ys(t).position==="fixed";let a=i?zi(t):t;for(;gs(a)&&!Dl(a);){const o=ys(a),l=Nx(a);!l&&o.position==="fixed"&&(r=null),(i?!l&&!r:!l&&o.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Fd(a)&&!l&&BI(t,a))?s=s.filter(h=>h!==a):r=o,a=zi(a)}return e.set(t,s),s}function pU(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const a=[...n==="clippingAncestors"?Ep(e)?[]:mU(e,this._c):[].concat(n),s],o=a[0],l=a.reduce((u,h)=>{const f=PS(e,h,r);return u.top=Sn(f.top,u.top),u.right=Bi(f.right,u.right),u.bottom=Bi(f.bottom,u.bottom),u.left=Sn(f.left,u.left),u},PS(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function gU(t){const{width:e,height:n}=LI(t);return{width:e,height:n}}function yU(t,e,n){const s=qs(e),r=Js(e),i=n==="fixed",a=za(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const l=Vs(0);function u(){l.x=Px(r)}if(s||!s&&!i)if((sc(e)!=="body"||Fd(r))&&(o=Sp(e)),s){const p=za(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&u();i&&!s&&r&&u();const h=r&&!s&&!i?FI(r,o):Vs(0),f=a.left+o.scrollLeft-l.x-h.x,m=a.top+o.scrollTop-l.y-h.y;return{x:f,y:m,width:a.width,height:a.height}}function Iy(t){return ys(t).position==="static"}function jS(t,e){if(!qs(t)||ys(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Js(t)===n&&(n=n.ownerDocument.body),n}function zI(t,e){const n=jn(t);if(Ep(t))return n;if(!qs(t)){let r=zi(t);for(;r&&!Dl(r);){if(gs(r)&&!Iy(r))return r;r=zi(r)}return n}let s=jS(t,e);for(;s&&iU(s)&&Iy(s);)s=jS(s,e);return s&&Dl(s)&&Iy(s)&&!Nx(s)?n:s||aU(t)||n}const vU=async function(t){const e=this.getOffsetParent||zI,n=this.getDimensions,s=await n(t.floating);return{reference:yU(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function bU(t){return ys(t).direction==="rtl"}const xU={convertOffsetParentRelativeRectToViewportRelativeRect:cU,getDocumentElement:Js,getClippingRect:pU,getOffsetParent:zI,getElementRects:vU,getClientRects:uU,getDimensions:gU,getScale:sl,isElement:gs,isRTL:bU};function HI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wU(t,e){let n=null,s;const r=Js(t);function i(){var o;clearTimeout(s),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=u;if(o||e(),!m||!p)return;const E=$h(f),w=$h(r.clientWidth-(h+m)),x=$h(r.clientHeight-(f+p)),v=$h(h),_={rootMargin:-E+"px "+-w+"px "+-x+"px "+-v+"px",threshold:Sn(0,Bi(1,l))||1};let C=!0;function P(M){const A=M[0].intersectionRatio;if(A!==l){if(!C)return a();A?a(!1,A):s=setTimeout(()=>{a(!1,1e-7)},1e3)}A===1&&!HI(u,t.getBoundingClientRect())&&a(),C=!1}try{n=new IntersectionObserver(P,{..._,root:r.ownerDocument})}catch{n=new IntersectionObserver(P,_)}n.observe(t)}return a(!0),i}function _U(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,u=Dx(t),h=r||i?[...u?Ku(u):[],...Ku(e)]:[];h.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=u&&o?wU(u,n):null;let m=-1,p=null;a&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let E,w=l?za(t):null;l&&x();function x(){const v=za(t);w&&!HI(w,v)&&n(),w=v,E=requestAnimationFrame(x)}return n(),()=>{var v;h.forEach(b=>{r&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(E)}}const TU=tU,EU=nU,SU=Z6,AU=rU,CU=J6,kS=X6,RU=sU,NU=(t,e,n)=>{const s=new Map,r={platform:xU,...n},i={...r.platform,_c:s};return Q6(t,e,{...r,platform:i})};var Tf=typeof document<"u"?y.useLayoutEffect:y.useEffect;function xm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!xm(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&t.$$typeof)&&!xm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function qI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function MS(t,e){const n=qI(t);return Math.round(e*n)/n}function Dy(t){const e=y.useRef(t);return Tf(()=>{e.current=t}),e}function IU(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=t,[h,f]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=y.useState(s);xm(m,s)||p(s);const[E,w]=y.useState(null),[x,v]=y.useState(null),b=y.useCallback(q=>{q!==M.current&&(M.current=q,w(q))},[]),_=y.useCallback(q=>{q!==A.current&&(A.current=q,v(q))},[]),C=i||E,P=a||x,M=y.useRef(null),A=y.useRef(null),S=y.useRef(h),N=l!=null,R=Dy(l),j=Dy(r),k=Dy(u),I=y.useCallback(()=>{if(!M.current||!A.current)return;const q={placement:e,strategy:n,middleware:m};j.current&&(q.platform=j.current),NU(M.current,A.current,q).then(X=>{const Q={...X,isPositioned:k.current!==!1};H.current&&!xm(S.current,Q)&&(S.current=Q,Td.flushSync(()=>{f(Q)}))})},[m,e,n,j,k]);Tf(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[u]);const H=y.useRef(!1);Tf(()=>(H.current=!0,()=>{H.current=!1}),[]),Tf(()=>{if(C&&(M.current=C),P&&(A.current=P),C&&P){if(R.current)return R.current(C,P,I);I()}},[C,P,I,R,N]);const $=y.useMemo(()=>({reference:M,floating:A,setReference:b,setFloating:_}),[b,_]),L=y.useMemo(()=>({reference:C,floating:P}),[C,P]),G=y.useMemo(()=>{const q={position:n,left:0,top:0};if(!L.floating)return q;const X=MS(L.floating,h.x),Q=MS(L.floating,h.y);return o?{...q,transform:"translate("+X+"px, "+Q+"px)",...qI(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:Q}},[n,o,L.floating,h.x,h.y]);return y.useMemo(()=>({...h,update:I,refs:$,elements:L,floatingStyles:G}),[h,I,$,L,G])}const DU=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?kS({element:s.current,padding:r}).fn(n):{}:s?kS({element:s,padding:r}).fn(n):{}}}},PU=(t,e)=>({...TU(t),options:[t,e]}),jU=(t,e)=>({...EU(t),options:[t,e]}),kU=(t,e)=>({...RU(t),options:[t,e]}),MU=(t,e)=>({...SU(t),options:[t,e]}),OU=(t,e)=>({...AU(t),options:[t,e]}),VU=(t,e)=>({...CU(t),options:[t,e]}),LU=(t,e)=>({...DU(t),options:[t,e]});var UU="Arrow",GI=y.forwardRef((t,e)=>{const{children:n,width:s=10,height:r=5,...i}=t;return c.jsx(we.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});GI.displayName=UU;var FU=GI;function BU(t){const[e,n]=y.useState(void 0);return Vn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let a,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var jx="Popper",[$I,YI]=_s(jx),[zU,KI]=$I(jx),WI=t=>{const{__scopePopper:e,children:n}=t,[s,r]=y.useState(null);return c.jsx(zU,{scope:e,anchor:s,onAnchorChange:r,children:n})};WI.displayName=jx;var QI="PopperAnchor",XI=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...r}=t,i=KI(QI,n),a=y.useRef(null),o=Qe(e,a);return y.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||a.current)}),s?null:c.jsx(we.div,{...r,ref:o})});XI.displayName=QI;var kx="PopperContent",[HU,qU]=$I(kx),ZI=y.forwardRef((t,e)=>{var Ln,oo,Ze,Un,ss,lo;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:E,...w}=t,x=KI(kx,n),[v,b]=y.useState(null),_=Qe(e,rr=>b(rr)),[C,P]=y.useState(null),M=BU(C),A=(M==null?void 0:M.width)??0,S=(M==null?void 0:M.height)??0,N=s+(i!=="center"?"-"+i:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},j=Array.isArray(u)?u:[u],k=j.length>0,I={padding:R,boundary:j.filter($U),altBoundary:k},{refs:H,floatingStyles:$,placement:L,isPositioned:G,middlewareData:q}=IU({strategy:"fixed",placement:N,whileElementsMounted:(...rr)=>_U(...rr,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[PU({mainAxis:r+S,alignmentAxis:a}),l&&jU({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?kU():void 0,...I}),l&&MU({...I}),OU({...I,apply:({elements:rr,rects:co,availableWidth:_c,availableHeight:fh})=>{const{width:Cg,height:Rg}=co.reference,la=rr.floating.style;la.setProperty("--radix-popper-available-width",`${_c}px`),la.setProperty("--radix-popper-available-height",`${fh}px`),la.setProperty("--radix-popper-anchor-width",`${Cg}px`),la.setProperty("--radix-popper-anchor-height",`${Rg}px`)}}),C&&LU({element:C,padding:o}),YU({arrowWidth:A,arrowHeight:S}),m&&VU({strategy:"referenceHidden",...I})]}),[X,Q]=tD(L),le=wt(E);Vn(()=>{G&&(le==null||le())},[G,le]);const ue=(Ln=q.arrow)==null?void 0:Ln.x,Z=(oo=q.arrow)==null?void 0:oo.y,je=((Ze=q.arrow)==null?void 0:Ze.centerOffset)!==0,[vt,sr]=y.useState();return Vn(()=>{v&&sr(window.getComputedStyle(v).zIndex)},[v]),c.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:G?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:vt,"--radix-popper-transform-origin":[(Un=q.transformOrigin)==null?void 0:Un.x,(ss=q.transformOrigin)==null?void 0:ss.y].join(" "),...((lo=q.hide)==null?void 0:lo.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(HU,{scope:n,placedSide:X,onArrowChange:P,arrowX:ue,arrowY:Z,shouldHideArrow:je,children:c.jsx(we.div,{"data-side":X,"data-align":Q,...w,ref:_,style:{...w.style,animation:G?void 0:"none"}})})})});ZI.displayName=kx;var JI="PopperArrow",GU={top:"bottom",right:"left",bottom:"top",left:"right"},eD=y.forwardRef(function(e,n){const{__scopePopper:s,...r}=e,i=qU(JI,s),a=GU[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(FU,{...r,ref:n,style:{...r.style,display:"block"}})})});eD.displayName=JI;function $U(t){return t!==null}var YU=t=>({name:"transformOrigin",options:t,fn(e){var x,v,b;const{placement:n,rects:s,middlewareData:r}=e,a=((x=r.arrow)==null?void 0:x.centerOffset)!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[u,h]=tD(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((v=r.arrow)==null?void 0:v.x)??0)+o/2,p=(((b=r.arrow)==null?void 0:b.y)??0)+l/2;let E="",w="";return u==="bottom"?(E=a?f:`${m}px`,w=`${-l}px`):u==="top"?(E=a?f:`${m}px`,w=`${s.floating.height+l}px`):u==="right"?(E=`${-l}px`,w=a?f:`${p}px`):u==="left"&&(E=`${s.floating.width+l}px`,w=a?f:`${p}px`),{data:{x:E,y:w}}}});function tD(t){const[e,n="center"]=t.split("-");return[e,n]}var KU=WI,WU=XI,QU=ZI,XU=eD,ZU="Portal",Mx=y.forwardRef((t,e)=>{var o;const{container:n,...s}=t,[r,i]=y.useState(!1);Vn(()=>i(!0),[]);const a=n||r&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?K5.createPortal(c.jsx(we.div,{...s,ref:e}),a):null});Mx.displayName=ZU;function JU(t,e){return y.useReducer((n,s)=>e[n][s]??n,t)}var Ts=t=>{const{present:e,children:n}=t,s=e9(e),r=typeof n=="function"?n({present:s.isPresent}):y.Children.only(n),i=Qe(s.ref,t9(r));return typeof n=="function"||s.isPresent?y.cloneElement(r,{ref:i}):null};Ts.displayName="Presence";function e9(t){const[e,n]=y.useState(),s=y.useRef(null),r=y.useRef(t),i=y.useRef("none"),a=t?"mounted":"unmounted",[o,l]=JU(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Yh(s.current);i.current=o==="mounted"?u:"none"},[o]),Vn(()=>{const u=s.current,h=r.current;if(h!==t){const m=i.current,p=Yh(u);t?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Vn(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=p=>{const w=Yh(s.current).includes(p.animationName);if(p.target===e&&w&&(l("ANIMATION_END"),!r.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=p=>{p.target===e&&(i.current=Yh(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:y.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function Yh(t){return(t==null?void 0:t.animationName)||"none"}function t9(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var n9=Db[" useInsertionEffect ".trim().toString()]||Vn;function Bd({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[r,i,a]=s9({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:r;{const h=y.useRef(t!==void 0);y.useEffect(()=>{const f=h.current;f!==o&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=o},[o,s])}const u=y.useCallback(h=>{var f;if(o){const m=r9(h)?h(t):h;m!==t&&((f=a.current)==null||f.call(a,m))}else i(h)},[o,t,i,a]);return[l,u]}function s9({defaultProp:t,onChange:e}){const[n,s]=y.useState(t),r=y.useRef(n),i=y.useRef(e);return n9(()=>{i.current=e},[e]),y.useEffect(()=>{var a;r.current!==n&&((a=i.current)==null||a.call(i,n),r.current=n)},[n,r]),[n,s,i]}function r9(t){return typeof t=="function"}var i9=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),a9="VisuallyHidden",Ap=y.forwardRef((t,e)=>c.jsx(we.span,{...t,ref:e,style:{...i9,...t.style}}));Ap.displayName=a9;var o9=Ap,[Cp,ose]=_s("Tooltip",[YI]),Rp=YI(),nD="TooltipProvider",l9=700,v0="tooltip.open",[c9,Ox]=Cp(nD),sD=t=>{const{__scopeTooltip:e,delayDuration:n=l9,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:i}=t,a=y.useRef(!0),o=y.useRef(!1),l=y.useRef(0);return y.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(c9,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,s)},[s]),isPointerInTransitRef:o,onPointerInTransitChange:y.useCallback(u=>{o.current=u},[]),disableHoverableContent:r,children:i})};sD.displayName=nD;var Wu="Tooltip",[u9,Np]=Cp(Wu),rD=t=>{const{__scopeTooltip:e,children:n,open:s,defaultOpen:r,onOpenChange:i,disableHoverableContent:a,delayDuration:o}=t,l=Ox(Wu,t.__scopeTooltip),u=Rp(e),[h,f]=y.useState(null),m=nl(),p=y.useRef(0),E=a??l.disableHoverableContent,w=o??l.delayDuration,x=y.useRef(!1),[v,b]=Bd({prop:s,defaultProp:r??!1,onChange:A=>{A?(l.onOpen(),document.dispatchEvent(new CustomEvent(v0))):l.onClose(),i==null||i(A)},caller:Wu}),_=y.useMemo(()=>v?x.current?"delayed-open":"instant-open":"closed",[v]),C=y.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x.current=!1,b(!0)},[b]),P=y.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),M=y.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{x.current=!0,b(!0),p.current=0},w)},[w,b]);return y.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),c.jsx(KU,{...u,children:c.jsx(u9,{scope:e,contentId:m,open:v,stateAttribute:_,trigger:h,onTriggerChange:f,onTriggerEnter:y.useCallback(()=>{l.isOpenDelayedRef.current?M():C()},[l.isOpenDelayedRef,M,C]),onTriggerLeave:y.useCallback(()=>{E?P():(window.clearTimeout(p.current),p.current=0)},[P,E]),onOpen:C,onClose:P,disableHoverableContent:E,children:n})})};rD.displayName=Wu;var b0="TooltipTrigger",iD=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,r=Np(b0,n),i=Ox(b0,n),a=Rp(n),o=y.useRef(null),l=Qe(e,o,r.onTriggerChange),u=y.useRef(!1),h=y.useRef(!1),f=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(WU,{asChild:!0,...a,children:c.jsx(we.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:l,onPointerMove:fe(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:fe(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:fe(t.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:fe(t.onFocus,()=>{u.current||r.onOpen()}),onBlur:fe(t.onBlur,r.onClose),onClick:fe(t.onClick,r.onClose)})})});iD.displayName=b0;var d9="TooltipPortal",[lse,h9]=Cp(d9,{forceMount:void 0}),Pl="TooltipContent",aD=y.forwardRef((t,e)=>{const n=h9(Pl,t.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...i}=t,a=Np(Pl,t.__scopeTooltip);return c.jsx(Ts,{present:s||a.open,children:a.disableHoverableContent?c.jsx(oD,{side:r,...i,ref:e}):c.jsx(f9,{side:r,...i,ref:e})})}),f9=y.forwardRef((t,e)=>{const n=Np(Pl,t.__scopeTooltip),s=Ox(Pl,t.__scopeTooltip),r=y.useRef(null),i=Qe(e,r),[a,o]=y.useState(null),{trigger:l,onClose:u}=n,h=r.current,{onPointerInTransitChange:f}=s,m=y.useCallback(()=>{o(null),f(!1)},[f]),p=y.useCallback((E,w)=>{const x=E.currentTarget,v={x:E.clientX,y:E.clientY},b=v9(v,x.getBoundingClientRect()),_=b9(v,b),C=x9(w.getBoundingClientRect()),P=_9([..._,...C]);o(P),f(!0)},[f]);return y.useEffect(()=>()=>m(),[m]),y.useEffect(()=>{if(l&&h){const E=x=>p(x,h),w=x=>p(x,l);return l.addEventListener("pointerleave",E),h.addEventListener("pointerleave",w),()=>{l.removeEventListener("pointerleave",E),h.removeEventListener("pointerleave",w)}}},[l,h,p,m]),y.useEffect(()=>{if(a){const E=w=>{const x=w.target,v={x:w.clientX,y:w.clientY},b=(l==null?void 0:l.contains(x))||(h==null?void 0:h.contains(x)),_=!w9(v,a);b?m():_&&(m(),u())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,h,a,u,m]),c.jsx(oD,{...t,ref:i})}),[m9,p9]=Cp(Wu,{isInside:!1}),g9=II("TooltipContent"),oD=y.forwardRef((t,e)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:a,...o}=t,l=Np(Pl,n),u=Rp(n),{onClose:h}=l;return y.useEffect(()=>(document.addEventListener(v0,h),()=>document.removeEventListener(v0,h)),[h]),y.useEffect(()=>{if(l.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(l.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,h]),c.jsx(_p,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:c.jsxs(QU,{"data-state":l.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(g9,{children:s}),c.jsx(m9,{scope:n,isInside:!0,children:c.jsx(o9,{id:l.contentId,role:"tooltip",children:r||s})})]})})});aD.displayName=Pl;var lD="TooltipArrow",y9=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,r=Rp(n);return p9(lD,n).isInside?null:c.jsx(XU,{...r,...s,ref:e})});y9.displayName=lD;function v9(t,e){const n=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,s,r,i)){case i:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function b9(t,e,n=5){const s=[];switch(e){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function x9(t){const{top:e,right:n,bottom:s,left:r}=t;return[{x:r,y:e},{x:n,y:e},{x:n,y:s},{x:r,y:s}]}function w9(t,e){const{x:n,y:s}=t;let r=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const o=e[i],l=e[a],u=o.x,h=o.y,f=l.x,m=l.y;h>s!=m>s&&n<(f-u)*(s-h)/(m-h)+u&&(r=!r)}return r}function _9(t){const e=t.slice();return e.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),T9(e)}function T9(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const r=t[s];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(r.y-a.y)>=(i.y-a.y)*(r.x-a.x))e.pop();else break}e.push(r)}e.pop();const n=[];for(let s=t.length-1;s>=0;s--){const r=t[s];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(r.y-a.y)>=(i.y-a.y)*(r.x-a.x))n.pop();else break}n.push(r)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var E9=sD,S9=rD,A9=iD,cD=aD;function uD(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=uD(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function dD(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=uD(t))&&(s&&(s+=" "),s+=e);return s}const Vx="-",C9=t=>{const e=N9(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{const o=a.split(Vx);return o[0]===""&&o.length!==1&&o.shift(),hD(o,e)||R9(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&s[a]?[...l,...s[a]]:l}}},hD=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?hD(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=t.join(Vx);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},OS=/^\[(.+)\]$/,R9=t=>{if(OS.test(t)){const e=OS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},N9=t=>{const{theme:e,prefix:n}=t,s={nextPart:new Map,validators:[]};return D9(Object.entries(t.classGroups),n).forEach(([i,a])=>{x0(a,s,i,e)}),s},x0=(t,e,n,s)=>{t.forEach(r=>{if(typeof r=="string"){const i=r===""?e:VS(e,r);i.classGroupId=n;return}if(typeof r=="function"){if(I9(r)){x0(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,a])=>{x0(a,VS(e,i),n,s)})})},VS=(t,e)=>{let n=t;return e.split(Vx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},I9=t=>t.isThemeGetter,D9=(t,e)=>e?t.map(([n,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[n,r]}):t,P9=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,s=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){n.has(i)?n.set(i,a):r(i,a)}}},fD="!",j9=t=>{const{separator:e,experimentalParseClassName:n}=t,s=e.length===1,r=e[0],i=e.length,a=o=>{const l=[];let u=0,h=0,f;for(let x=0;x<o.length;x++){let v=o[x];if(u===0){if(v===r&&(s||o.slice(x,x+i)===e)){l.push(o.slice(h,x)),h=x+i;continue}if(v==="/"){f=x;continue}}v==="["?u++:v==="]"&&u--}const m=l.length===0?o:o.substring(h),p=m.startsWith(fD),E=p?m.substring(1):m,w=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:E,maybePostfixModifierPosition:w}};return n?o=>n({className:o,parseClassName:a}):a},k9=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(s=>{s[0]==="["?(e.push(...n.sort(),s),n=[]):n.push(s)}),e.push(...n.sort()),e},M9=t=>({cache:P9(t.cacheSize),parseClassName:j9(t),...C9(t)}),O9=/\s+/,V9=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],a=t.trim().split(O9);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let E=!!p,w=s(E?m.substring(0,p):m);if(!w){if(!E){o=u+(o.length>0?" "+o:o);continue}if(w=s(m),!w){o=u+(o.length>0?" "+o:o);continue}E=!1}const x=k9(h).join(":"),v=f?x+fD:x,b=v+w;if(i.includes(b))continue;i.push(b);const _=r(w,E);for(let C=0;C<_.length;++C){const P=_[C];i.push(v+P)}o=u+(o.length>0?" "+o:o)}return o};function L9(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=mD(e))&&(s&&(s+=" "),s+=n);return s}const mD=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=mD(t[s]))&&(n&&(n+=" "),n+=e);return n};function U9(t,...e){let n,s,r,i=a;function a(l){const u=e.reduce((h,f)=>f(h),t());return n=M9(u),s=n.cache.get,r=n.cache.set,i=o,o(l)}function o(l){const u=s(l);if(u)return u;const h=V9(l,n);return r(l,h),h}return function(){return i(L9.apply(null,arguments))}}const Ge=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},pD=/^\[(?:([a-z-]+):)?(.+)\]$/i,F9=/^\d+\/\d+$/,B9=new Set(["px","full","screen"]),z9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,H9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,G9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ur=t=>rl(t)||B9.has(t)||F9.test(t),Wr=t=>rc(t,"length",eF),rl=t=>!!t&&!Number.isNaN(Number(t)),Py=t=>rc(t,"number",rl),qc=t=>!!t&&Number.isInteger(Number(t)),Y9=t=>t.endsWith("%")&&rl(t.slice(0,-1)),he=t=>pD.test(t),Qr=t=>z9.test(t),K9=new Set(["length","size","percentage"]),W9=t=>rc(t,K9,gD),Q9=t=>rc(t,"position",gD),X9=new Set(["image","url"]),Z9=t=>rc(t,X9,nF),J9=t=>rc(t,"",tF),Gc=()=>!0,rc=(t,e,n)=>{const s=pD.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):n(s[2]):!1},eF=t=>H9.test(t)&&!q9.test(t),gD=()=>!1,tF=t=>G9.test(t),nF=t=>$9.test(t),sF=()=>{const t=Ge("colors"),e=Ge("spacing"),n=Ge("blur"),s=Ge("brightness"),r=Ge("borderColor"),i=Ge("borderRadius"),a=Ge("borderSpacing"),o=Ge("borderWidth"),l=Ge("contrast"),u=Ge("grayscale"),h=Ge("hueRotate"),f=Ge("invert"),m=Ge("gap"),p=Ge("gradientColorStops"),E=Ge("gradientColorStopPositions"),w=Ge("inset"),x=Ge("margin"),v=Ge("opacity"),b=Ge("padding"),_=Ge("saturate"),C=Ge("scale"),P=Ge("sepia"),M=Ge("skew"),A=Ge("space"),S=Ge("translate"),N=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",he,e],k=()=>[he,e],I=()=>["",ur,Wr],H=()=>["auto",rl,he],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],X=()=>["","0",he],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[rl,he];return{cacheSize:500,separator:":",theme:{colors:[Gc],spacing:[ur,Wr],blur:["none","",Qr,he],brightness:le(),borderColor:[t],borderRadius:["none","","full",Qr,he],borderSpacing:k(),borderWidth:I(),contrast:le(),grayscale:X(),hueRotate:le(),invert:X(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[Y9,Wr],inset:j(),margin:j(),opacity:le(),padding:k(),saturate:le(),scale:le(),sepia:X(),skew:le(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",he]}],container:["container"],columns:[{columns:[Qr]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),he]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qc,he]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",he]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",qc,he]}],"grid-cols":[{"grid-cols":[Gc]}],"col-start-end":[{col:["auto",{span:["full",qc,he]},he]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Gc]}],"row-start-end":[{row:["auto",{span:[qc,he]},he]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",he]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",he]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",he,e]}],"min-w":[{"min-w":[he,e,"min","max","fit"]}],"max-w":[{"max-w":[he,e,"none","full","min","max","fit","prose",{screen:[Qr]},Qr]}],h:[{h:[he,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[he,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qr,Wr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Py]}],"font-family":[{font:[Gc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",he]}],"line-clamp":[{"line-clamp":["none",rl,Py]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ur,he]}],"list-image":[{"list-image":["none",he]}],"list-style-type":[{list:["none","disc","decimal",he]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ur,Wr]}],"underline-offset":[{"underline-offset":["auto",ur,he]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),Q9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",W9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Z9]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:L()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[ur,he]}],"outline-w":[{outline:[ur,Wr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ur,Wr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Qr,J9]}],"shadow-color":[{shadow:[Gc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Qr,he]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",he]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",he]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",he]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[qc,he]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",he]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ur,Wr,Py]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rF=U9(sF);function me(...t){return rF(dD(t))}const yD=E9,iF=S9,aF=A9,vD=y.forwardRef(({className:t,sideOffset:e=4,...n},s)=>c.jsx(cD,{ref:s,sideOffset:e,className:me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));vD.displayName=cD.displayName;var Ip=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Dp=typeof window>"u"||"Deno"in globalThis;function as(){}function oF(t,e){return typeof t=="function"?t(e):t}function lF(t){return typeof t=="number"&&t>=0&&t!==1/0}function cF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function LS(t,e){return typeof t=="function"?t(e):t}function uF(t,e){return typeof t=="function"?t(e):t}function US(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:a,stale:o}=t;if(a){if(s){if(e.queryHash!==Lx(a,e.options))return!1}else if(!Xu(e.queryKey,a))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||i&&!i(e))}function FS(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Qu(e.options.mutationKey)!==Qu(i))return!1}else if(!Xu(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function Lx(t,e){return((e==null?void 0:e.queryKeyHashFn)||Qu)(t)}function Qu(t){return JSON.stringify(t,(e,n)=>w0(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Xu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Xu(t[n],e[n])):!1}function bD(t,e){if(t===e)return t;const n=BS(t)&&BS(e);if(n||w0(t)&&w0(e)){const s=n?t:Object.keys(t),r=s.length,i=n?e:Object.keys(e),a=i.length,o=n?[]:{};let l=0;for(let u=0;u<a;u++){const h=n?u:i[u];(!n&&s.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(o[h]=void 0,l++):(o[h]=bD(t[h],e[h]),o[h]===t[h]&&t[h]!==void 0&&l++)}return r===a&&l===r?t:o}return e}function BS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function w0(t){if(!zS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!zS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function zS(t){return Object.prototype.toString.call(t)==="[object Object]"}function dF(t){return new Promise(e=>{setTimeout(e,t)})}function hF(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?bD(t,e):e}function fF(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function mF(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var Ux=Symbol();function xD(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Ux?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Sa,fi,dl,TR,pF=(TR=class extends Ip{constructor(){super();Ne(this,Sa);Ne(this,fi);Ne(this,dl);de(this,dl,e=>{if(!Dp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){F(this,fi)||this.setEventListener(F(this,dl))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,fi))==null||e.call(this),de(this,fi,void 0))}setEventListener(e){var n;de(this,dl,e),(n=F(this,fi))==null||n.call(this),de(this,fi,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){F(this,Sa)!==e&&(de(this,Sa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof F(this,Sa)=="boolean"?F(this,Sa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Sa=new WeakMap,fi=new WeakMap,dl=new WeakMap,TR),wD=new pF,hl,mi,fl,ER,gF=(ER=class extends Ip{constructor(){super();Ne(this,hl,!0);Ne(this,mi);Ne(this,fl);de(this,fl,e=>{if(!Dp&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){F(this,mi)||this.setEventListener(F(this,fl))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,mi))==null||e.call(this),de(this,mi,void 0))}setEventListener(e){var n;de(this,fl,e),(n=F(this,mi))==null||n.call(this),de(this,mi,e(this.setOnline.bind(this)))}setOnline(e){F(this,hl)!==e&&(de(this,hl,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return F(this,hl)}},hl=new WeakMap,mi=new WeakMap,fl=new WeakMap,ER),wm=new gF;function yF(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}function vF(t){return Math.min(1e3*2**t,3e4)}function _D(t){return(t??"online")==="online"?wm.isOnline():!0}var TD=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jy(t){return t instanceof TD}function ED(t){let e=!1,n=0,s=!1,r;const i=yF(),a=w=>{var x;s||(m(new TD(w)),(x=t.abort)==null||x.call(t))},o=()=>{e=!0},l=()=>{e=!1},u=()=>wD.isFocused()&&(t.networkMode==="always"||wm.isOnline())&&t.canRun(),h=()=>_D(t.networkMode)&&t.canRun(),f=w=>{var x;s||(s=!0,(x=t.onSuccess)==null||x.call(t,w),r==null||r(),i.resolve(w))},m=w=>{var x;s||(s=!0,(x=t.onError)==null||x.call(t,w),r==null||r(),i.reject(w))},p=()=>new Promise(w=>{var x;r=v=>{(s||u())&&w(v)},(x=t.onPause)==null||x.call(t)}).then(()=>{var w;r=void 0,s||(w=t.onContinue)==null||w.call(t)}),E=()=>{if(s)return;let w;const x=n===0?t.initialPromise:void 0;try{w=x??t.fn()}catch(v){w=Promise.reject(v)}Promise.resolve(w).then(f).catch(v=>{var M;if(s)return;const b=t.retry??(Dp?0:3),_=t.retryDelay??vF,C=typeof _=="function"?_(n,v):_,P=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,v);if(e||!P){m(v);return}n++,(M=t.onFail)==null||M.call(t,n,v),dF(C).then(()=>u()?void 0:p()).then(()=>{e?m(v):E()})})};return{promise:i,cancel:a,continue:()=>(r==null||r(),i),cancelRetry:o,continueRetry:l,canStart:h,start:()=>(h()?E():p().then(E),i)}}var bF=t=>setTimeout(t,0);function xF(){let t=[],e=0,n=o=>{o()},s=o=>{o()},r=bF;const i=o=>{e?t.push(o):r(()=>{n(o)})},a=()=>{const o=t;t=[],o.length&&r(()=>{s(()=>{o.forEach(l=>{n(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{r=o}}}var rn=xF(),Aa,SR,SD=(SR=class{constructor(){Ne(this,Aa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lF(this.gcTime)&&de(this,Aa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Dp?1/0:5*60*1e3))}clearGcTimeout(){F(this,Aa)&&(clearTimeout(F(this,Aa)),de(this,Aa,void 0))}},Aa=new WeakMap,SR),ml,pl,zn,Ca,Yt,wd,Ra,os,dr,AR,wF=(AR=class extends SD{constructor(n){super();Ne(this,os);Ne(this,ml);Ne(this,pl);Ne(this,zn);Ne(this,Ca);Ne(this,Yt);Ne(this,wd);Ne(this,Ra);de(this,Ra,!1),de(this,wd,n.defaultOptions),this.setOptions(n.options),this.observers=[],de(this,Ca,n.client),de(this,zn,F(this,Ca).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,de(this,ml,TF(this.options)),this.state=n.state??F(this,ml),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=F(this,Yt))==null?void 0:n.promise}setOptions(n){this.options={...F(this,wd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,zn).remove(this)}setData(n,s){const r=hF(this.state.data,n,this.options);return Gt(this,os,dr).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(n,s){Gt(this,os,dr).call(this,{type:"setState",state:n,setStateOptions:s})}cancel(n){var r,i;const s=(r=F(this,Yt))==null?void 0:r.promise;return(i=F(this,Yt))==null||i.cancel(n),s?s.then(as).catch(as):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,ml))}isActive(){return this.observers.some(n=>uF(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ux||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!cF(this.state.dataUpdatedAt,n)}onFocus(){var s;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(s=F(this,Yt))==null||s.continue()}onOnline(){var s;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(s=F(this,Yt))==null||s.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),F(this,zn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(s=>s!==n),this.observers.length||(F(this,Yt)&&(F(this,Ra)?F(this,Yt).cancel({revert:!0}):F(this,Yt).cancelRetry()),this.scheduleGc()),F(this,zn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,os,dr).call(this,{type:"invalidate"})}fetch(n,s){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(F(this,Yt))return F(this,Yt).continueRetry(),F(this,Yt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(de(this,Ra,!0),r.signal)})},a=()=>{const m=xD(this.options,s),p={client:F(this,Ca),queryKey:this.queryKey,meta:this.meta};return i(p),de(this,Ra,!1),this.options.persister?this.options.persister(m,p,this):m(p)},o={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:F(this,Ca),state:this.state,fetchFn:a};i(o),(u=this.options.behavior)==null||u.onFetch(o,this),de(this,pl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&Gt(this,os,dr).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const l=m=>{var p,E,w,x;jy(m)&&m.silent||Gt(this,os,dr).call(this,{type:"error",error:m}),jy(m)||((E=(p=F(this,zn).config).onError)==null||E.call(p,m,this),(x=(w=F(this,zn).config).onSettled)==null||x.call(w,this.state.data,m,this)),this.scheduleGc()};return de(this,Yt,ED({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,E,w,x;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){l(v);return}(E=(p=F(this,zn).config).onSuccess)==null||E.call(p,m,this),(x=(w=F(this,zn).config).onSettled)==null||x.call(w,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,p)=>{Gt(this,os,dr).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Gt(this,os,dr).call(this,{type:"pause"})},onContinue:()=>{Gt(this,os,dr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),F(this,Yt).start()}},ml=new WeakMap,pl=new WeakMap,zn=new WeakMap,Ca=new WeakMap,Yt=new WeakMap,wd=new WeakMap,Ra=new WeakMap,os=new WeakSet,dr=function(n){const s=r=>{switch(n.type){case"failed":return{...r,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,..._F(r.data,this.options),fetchMeta:n.meta??null};case"success":return{...r,data:n.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return jy(i)&&i.revert&&F(this,pl)?{...F(this,pl),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...n.state}}};this.state=s(this.state),rn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),F(this,zn).notify({query:this,type:"updated",action:n})})},AR);function _F(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_D(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function TF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Rs,CR,EF=(CR=class extends Ip{constructor(e={}){super();Ne(this,Rs);this.config=e,de(this,Rs,new Map)}build(e,n,s){const r=n.queryKey,i=n.queryHash??Lx(r,n);let a=this.get(i);return a||(a=new wF({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){F(this,Rs).has(e.queryHash)||(F(this,Rs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=F(this,Rs).get(e.queryHash);n&&(e.destroy(),n===e&&F(this,Rs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return F(this,Rs).get(e)}getAll(){return[...F(this,Rs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>US(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>US(e,s)):n}notify(e){rn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Rs=new WeakMap,CR),Ns,sn,Na,Is,ei,RR,SF=(RR=class extends SD{constructor(n){super();Ne(this,Is);Ne(this,Ns);Ne(this,sn);Ne(this,Na);this.mutationId=n.mutationId,de(this,sn,n.mutationCache),de(this,Ns,[]),this.state=n.state||AF(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){F(this,Ns).includes(n)||(F(this,Ns).push(n),this.clearGcTimeout(),F(this,sn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){de(this,Ns,F(this,Ns).filter(s=>s!==n)),this.scheduleGc(),F(this,sn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){F(this,Ns).length||(this.state.status==="pending"?this.scheduleGc():F(this,sn).remove(this))}continue(){var n;return((n=F(this,Na))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,o,l,u,h,f,m,p,E,w,x,v,b,_,C,P,M,A,S,N;const s=()=>{Gt(this,Is,ei).call(this,{type:"continue"})};de(this,Na,ED({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(R,j)=>{Gt(this,Is,ei).call(this,{type:"failed",failureCount:R,error:j})},onPause:()=>{Gt(this,Is,ei).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,sn).canRun(this)}));const r=this.state.status==="pending",i=!F(this,Na).canStart();try{if(r)s();else{Gt(this,Is,ei).call(this,{type:"pending",variables:n,isPaused:i}),await((o=(a=F(this,sn).config).onMutate)==null?void 0:o.call(a,n,this));const j=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,n));j!==this.state.context&&Gt(this,Is,ei).call(this,{type:"pending",context:j,variables:n,isPaused:i})}const R=await F(this,Na).start();return await((f=(h=F(this,sn).config).onSuccess)==null?void 0:f.call(h,R,n,this.state.context,this)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,R,n,this.state.context)),await((w=(E=F(this,sn).config).onSettled)==null?void 0:w.call(E,R,null,this.state.variables,this.state.context,this)),await((v=(x=this.options).onSettled)==null?void 0:v.call(x,R,null,n,this.state.context)),Gt(this,Is,ei).call(this,{type:"success",data:R}),R}catch(R){try{throw await((_=(b=F(this,sn).config).onError)==null?void 0:_.call(b,R,n,this.state.context,this)),await((P=(C=this.options).onError)==null?void 0:P.call(C,R,n,this.state.context)),await((A=(M=F(this,sn).config).onSettled)==null?void 0:A.call(M,void 0,R,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,R,n,this.state.context)),R}finally{Gt(this,Is,ei).call(this,{type:"error",error:R})}}finally{F(this,sn).runNext(this)}}},Ns=new WeakMap,sn=new WeakMap,Na=new WeakMap,Is=new WeakSet,ei=function(n){const s=r=>{switch(n.type){case"failed":return{...r,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...r,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:n.error,failureCount:r.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=s(this.state),rn.batch(()=>{F(this,Ns).forEach(r=>{r.onMutationUpdate(n)}),F(this,sn).notify({mutation:this,type:"updated",action:n})})},RR);function AF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hr,ls,_d,NR,CF=(NR=class extends Ip{constructor(e={}){super();Ne(this,hr);Ne(this,ls);Ne(this,_d);this.config=e,de(this,hr,new Set),de(this,ls,new Map),de(this,_d,0)}build(e,n,s){const r=new SF({mutationCache:this,mutationId:++Ih(this,_d)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){F(this,hr).add(e);const n=Kh(e);if(typeof n=="string"){const s=F(this,ls).get(n);s?s.push(e):F(this,ls).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(F(this,hr).delete(e)){const n=Kh(e);if(typeof n=="string"){const s=F(this,ls).get(n);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&F(this,ls).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Kh(e);if(typeof n=="string"){const s=F(this,ls).get(n),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const n=Kh(e);if(typeof n=="string"){const r=(s=F(this,ls).get(n))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rn.batch(()=>{F(this,hr).forEach(e=>{this.notify({type:"removed",mutation:e})}),F(this,hr).clear(),F(this,ls).clear()})}getAll(){return Array.from(F(this,hr))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>FS(n,s))}findAll(e={}){return this.getAll().filter(n=>FS(e,n))}notify(e){rn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rn.batch(()=>Promise.all(e.map(n=>n.continue().catch(as))))}},hr=new WeakMap,ls=new WeakMap,_d=new WeakMap,NR);function Kh(t){var e;return(e=t.options.scope)==null?void 0:e.id}function HS(t){return{onFetch:(e,n)=>{var h,f,m,p,E;const s=e.options,r=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],a=((E=e.state.data)==null?void 0:E.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let w=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},v=xD(e.options,e.fetchOptions),b=async(_,C,P)=>{if(w)return Promise.reject();if(C==null&&_.pages.length)return Promise.resolve(_);const M={client:e.client,queryKey:e.queryKey,pageParam:C,direction:P?"backward":"forward",meta:e.options.meta};x(M);const A=await v(M),{maxPages:S}=e.options,N=P?mF:fF;return{pages:N(_.pages,A,S),pageParams:N(_.pageParams,C,S)}};if(r&&i.length){const _=r==="backward",C=_?RF:qS,P={pages:i,pageParams:a},M=C(s,P);o=await b(P,M,_)}else{const _=t??i.length;do{const C=l===0?a[0]??s.initialPageParam:qS(s,o);if(l>0&&C==null)break;o=await b(o,C),l++}while(l<_)}return o};e.options.persister?e.fetchFn=()=>{var w,x;return(x=(w=e.options).persister)==null?void 0:x.call(w,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function qS(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function RF(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var rt,pi,gi,gl,yl,yi,vl,bl,IR,NF=(IR=class{constructor(t={}){Ne(this,rt);Ne(this,pi);Ne(this,gi);Ne(this,gl);Ne(this,yl);Ne(this,yi);Ne(this,vl);Ne(this,bl);de(this,rt,t.queryCache||new EF),de(this,pi,t.mutationCache||new CF),de(this,gi,t.defaultOptions||{}),de(this,gl,new Map),de(this,yl,new Map),de(this,yi,0)}mount(){Ih(this,yi)._++,F(this,yi)===1&&(de(this,vl,wD.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,rt).onFocus())})),de(this,bl,wm.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,rt).onOnline())})))}unmount(){var t,e;Ih(this,yi)._--,F(this,yi)===0&&((t=F(this,vl))==null||t.call(this),de(this,vl,void 0),(e=F(this,bl))==null||e.call(this),de(this,bl,void 0))}isFetching(t){return F(this,rt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return F(this,pi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,rt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=F(this,rt).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(LS(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return F(this,rt).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=F(this,rt).get(s.queryHash),i=r==null?void 0:r.state.data,a=oF(e,i);if(a!==void 0)return F(this,rt).build(this,s).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return rn.batch(()=>F(this,rt).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,rt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=F(this,rt);rn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=F(this,rt);return rn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=rn.batch(()=>F(this,rt).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(as).catch(as)}invalidateQueries(t,e={}){return rn.batch(()=>(F(this,rt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=rn.batch(()=>F(this,rt).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(as)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(as)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=F(this,rt).build(this,e);return n.isStaleByTime(LS(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(as).catch(as)}fetchInfiniteQuery(t){return t.behavior=HS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(as).catch(as)}ensureInfiniteQueryData(t){return t.behavior=HS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return wm.isOnline()?F(this,pi).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,rt)}getMutationCache(){return F(this,pi)}getDefaultOptions(){return F(this,gi)}setDefaultOptions(t){de(this,gi,t)}setQueryDefaults(t,e){F(this,gl).set(Qu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...F(this,gl).values()],n={};return e.forEach(s=>{Xu(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){F(this,yl).set(Qu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...F(this,yl).values()],n={};return e.forEach(s=>{Xu(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...F(this,gi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Lx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ux&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...F(this,gi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){F(this,rt).clear(),F(this,pi).clear()}},rt=new WeakMap,pi=new WeakMap,gi=new WeakMap,gl=new WeakMap,yl=new WeakMap,yi=new WeakMap,vl=new WeakMap,bl=new WeakMap,IR),IF=y.createContext(void 0),DF=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(IF.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zu(){return Zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Zu.apply(this,arguments)}var _i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_i||(_i={}));const GS="popstate";function PF(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:a,hash:o}=s.location;return _0("",{pathname:i,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:_m(r)}return kF(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AD(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jF(){return Math.random().toString(36).substr(2,8)}function $S(t,e){return{usr:t.state,key:t.key,idx:e}}function _0(t,e,n,s){return n===void 0&&(n=null),Zu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ic(e):e,{state:n,key:e&&e.key||s||jF()})}function _m(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ic(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function kF(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,o=_i.Pop,l=null,u=h();u==null&&(u=0,a.replaceState(Zu({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function f(){o=_i.Pop;let x=h(),v=x==null?null:x-u;u=x,l&&l({action:o,location:w.location,delta:v})}function m(x,v){o=_i.Push;let b=_0(w.location,x,v);u=h()+1;let _=$S(b,u),C=w.createHref(b);try{a.pushState(_,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(C)}i&&l&&l({action:o,location:w.location,delta:1})}function p(x,v){o=_i.Replace;let b=_0(w.location,x,v);u=h();let _=$S(b,u),C=w.createHref(b);a.replaceState(_,"",C),i&&l&&l({action:o,location:w.location,delta:0})}function E(x){let v=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof x=="string"?x:_m(x);return b=b.replace(/ $/,"%20"),yt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let w={get action(){return o},get location(){return t(r,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(GS,f),l=x,()=>{r.removeEventListener(GS,f),l=null}},createHref(x){return e(r,x)},createURL:E,encodeLocation(x){let v=E(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(x){return a.go(x)}};return w}var YS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(YS||(YS={}));function MF(t,e,n){return n===void 0&&(n="/"),OF(t,e,n)}function OF(t,e,n,s){let r=typeof e=="string"?ic(e):e,i=Fx(r.pathname||"/",n);if(i==null)return null;let a=CD(t);VF(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=WF(i);o=$F(a[l],u)}return o}function CD(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(yt(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let u=ji([s,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(yt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),CD(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:qF(u,i.index),routesMeta:h})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))r(i,a);else for(let l of RD(i.path))r(i,a,l)}),e}function RD(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=RD(s.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function VF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:GF(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const LF=/^:[\w-]+$/,UF=3,FF=2,BF=1,zF=10,HF=-2,KS=t=>t==="*";function qF(t,e){let n=t.split("/"),s=n.length;return n.some(KS)&&(s+=HF),e&&(s+=FF),n.filter(r=>!KS(r)).reduce((r,i)=>r+(LF.test(i)?UF:i===""?BF:zF),s)}function GF(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function $F(t,e,n){let{routesMeta:s}=t,r={},i="/",a=[];for(let o=0;o<s.length;++o){let l=s[o],u=o===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=YF({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),m=l.route;if(!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:ji([i,f.pathname]),pathnameBase:JF(ji([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ji([i,f.pathnameBase]))}return a}function YF(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=KF(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((u,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let w=o[f]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const E=o[f];return p&&!E?u[m]=void 0:u[m]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function KF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),AD(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(s.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function WF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AD(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function QF(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?ic(t):t;return{pathname:n?n.startsWith("/")?n:XF(n,e):e,search:e8(s),hash:t8(r)}}function XF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ky(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ND(t,e){let n=ZF(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function ID(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=ic(t):(r=Zu({},t),yt(!r.pathname||!r.pathname.includes("?"),ky("?","pathname","search",r)),yt(!r.pathname||!r.pathname.includes("#"),ky("#","pathname","hash",r)),yt(!r.search||!r.search.includes("#"),ky("#","search","hash",r)));let i=t===""||r.pathname==="",a=i?"/":r.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}o=f>=0?e[f]:"/"}let l=QF(r,o),u=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const ji=t=>t.join("/").replace(/\/\/+/g,"/"),JF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),e8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,t8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function n8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DD=["post","put","patch","delete"];new Set(DD);const s8=["get",...DD];new Set(s8);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ju(){return Ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ju.apply(this,arguments)}const Bx=y.createContext(null),r8=y.createContext(null),to=y.createContext(null),Pp=y.createContext(null),no=y.createContext({outlet:null,matches:[],isDataRoute:!1}),PD=y.createContext(null);function i8(t,e){let{relative:n}=e===void 0?{}:e;zd()||yt(!1);let{basename:s,navigator:r}=y.useContext(to),{hash:i,pathname:a,search:o}=kD(t,{relative:n}),l=a;return s!=="/"&&(l=a==="/"?s:ji([s,a])),r.createHref({pathname:l,search:o,hash:i})}function zd(){return y.useContext(Pp)!=null}function Hd(){return zd()||yt(!1),y.useContext(Pp).location}function jD(t){y.useContext(to).static||y.useLayoutEffect(t)}function ea(){let{isDataRoute:t}=y.useContext(no);return t?v8():a8()}function a8(){zd()||yt(!1);let t=y.useContext(Bx),{basename:e,future:n,navigator:s}=y.useContext(to),{matches:r}=y.useContext(no),{pathname:i}=Hd(),a=JSON.stringify(ND(r,n.v7_relativeSplatPath)),o=y.useRef(!1);return jD(()=>{o.current=!0}),y.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){s.go(u);return}let f=ID(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ji([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,a,i,t])}function kD(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=y.useContext(to),{matches:r}=y.useContext(no),{pathname:i}=Hd(),a=JSON.stringify(ND(r,s.v7_relativeSplatPath));return y.useMemo(()=>ID(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function o8(t,e){return l8(t,e)}function l8(t,e,n,s){zd()||yt(!1);let{navigator:r,static:i}=y.useContext(to),{matches:a}=y.useContext(no),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Hd(),f;if(e){var m;let v=typeof e=="string"?ic(e):e;u==="/"||(m=v.pathname)!=null&&m.startsWith(u)||yt(!1),f=v}else f=h;let p=f.pathname||"/",E=p;if(u!=="/"){let v=u.replace(/^\//,"").split("/");E="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=MF(t,{pathname:E}),x=f8(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:ji([u,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:ji([u,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,s);return e&&x?y.createElement(Pp.Provider,{value:{location:Ju({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_i.Pop}},x):x}function c8(){let t=y8(),e=n8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:r},n):null,null)}const u8=y.createElement(c8,null);class d8 extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(no.Provider,{value:this.props.routeContext},y.createElement(PD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h8(t){let{routeContext:e,match:n,children:s}=t,r=y.useContext(Bx);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(no.Provider,{value:e},s)}function f8(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);h>=0||yt(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:p}=n,E=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||E){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let p,E=!1,w=null,x=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||u8,l&&(u<0&&m===0?(b8("route-fallback"),E=!0,x=null):u===m&&(E=!0,x=f.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,m+1)),b=()=>{let _;return p?_=w:E?_=x:f.route.Component?_=y.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,y.createElement(h8,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?y.createElement(d8,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var MD=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(MD||{}),OD=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(OD||{});function m8(t){let e=y.useContext(Bx);return e||yt(!1),e}function p8(t){let e=y.useContext(r8);return e||yt(!1),e}function g8(t){let e=y.useContext(no);return e||yt(!1),e}function VD(t){let e=g8(),n=e.matches[e.matches.length-1];return n.route.id||yt(!1),n.route.id}function y8(){var t;let e=y.useContext(PD),n=p8(),s=VD();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function v8(){let{router:t}=m8(MD.UseNavigateStable),e=VD(OD.UseNavigateStable),n=y.useRef(!1);return jD(()=>{n.current=!0}),y.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ju({fromRouteId:e},i)))},[t,e])}const WS={};function b8(t,e,n){WS[t]||(WS[t]=!0)}function x8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ti(t){yt(!1)}function w8(t){let{basename:e="/",children:n=null,location:s,navigationType:r=_i.Pop,navigator:i,static:a=!1,future:o}=t;zd()&&yt(!1);let l=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:l,navigator:i,static:a,future:Ju({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof s=="string"&&(s=ic(s));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:E="default"}=s,w=y.useMemo(()=>{let x=Fx(h,l);return x==null?null:{location:{pathname:x,search:f,hash:m,state:p,key:E},navigationType:r}},[l,h,f,m,p,E,r]);return w==null?null:y.createElement(to.Provider,{value:u},y.createElement(Pp.Provider,{children:n,value:w}))}function _8(t){let{children:e,location:n}=t;return o8(T0(e),n)}new Promise(()=>{});function T0(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(s,r)=>{if(!y.isValidElement(s))return;let i=[...e,r];if(s.type===y.Fragment){n.push.apply(n,T0(s.props.children,i));return}s.type!==ti&&yt(!1),!s.props.index||!s.props.children||yt(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=T0(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E0(){return E0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},E0.apply(this,arguments)}function T8(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function E8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function S8(t,e){return t.button===0&&(!e||e==="_self")&&!E8(t)}const A8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C8="6";try{window.__reactRouterVersion=C8}catch{}const R8="startTransition",QS=Db[R8];function N8(t){let{basename:e,children:n,future:s,window:r}=t,i=y.useRef();i.current==null&&(i.current=PF({window:r,v5Compat:!0}));let a=i.current,[o,l]=y.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},h=y.useCallback(f=>{u&&QS?QS(()=>l(f)):l(f)},[l,u]);return y.useLayoutEffect(()=>a.listen(h),[a,h]),y.useEffect(()=>x8(s),[s]),y.createElement(w8,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:s})}const I8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",D8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yo=y.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,m=T8(e,A8),{basename:p}=y.useContext(to),E,w=!1;if(typeof u=="string"&&D8.test(u)&&(E=u,I8))try{let _=new URL(window.location.href),C=u.startsWith("//")?new URL(_.protocol+u):new URL(u),P=Fx(C.pathname,p);C.origin===_.origin&&P!=null?u=P+C.search+C.hash:w=!0}catch{}let x=i8(u,{relative:r}),v=P8(u,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:f});function b(_){s&&s(_),_.defaultPrevented||v(_)}return y.createElement("a",E0({},m,{href:E||x,onClick:w||i?s:b,ref:n,target:l}))});var XS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(XS||(XS={}));var ZS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ZS||(ZS={}));function P8(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=ea(),u=Hd(),h=kD(t,{relative:a});return y.useCallback(f=>{if(S8(f,n)){f.preventDefault();let m=s!==void 0?s:_m(u)===_m(h);l(t,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,h,s,r,n,t,i,a,o])}const JS=[{id:"first-paycheck",title:"First Paycheck  Budget or Blow It?",description:"Learn to manage your first salary and make smart financial decisions that impact your future.",ageGroup:"16-20",category:"Financial Literacy",thumbnail:"https://images.unsplash.com/photo-1621905251189-08b45d6a269e?q=80&w=2000&auto=format&fit=crop",initialMetrics:{health:80,money:50,happiness:70,knowledge:50,relationships:75},scenes:[{id:"start",title:"The Alert  You Got Paid!",description:`You wake up to your phone vibrating: "38,000 credited to your account." It's your first ever paycheck. You're thrilled  but now what?`,choices:[{id:"save",text:"Immediately transfer 30% to a savings account",nextSceneId:"wants-vs-needs",metricChanges:{money:10,happiness:-2,knowledge:8},tooltip:"Building good financial habits early pays off"},{id:"post",text:`Screenshot & post it with "Let's GOOOO" on Instagram`,nextSceneId:"wants-vs-needs",metricChanges:{money:0,happiness:7,relationships:5,knowledge:-2},tooltip:"Social validation can feel good, but be careful with financial info"},{id:"call-friend",text:"Call your best friend to plan a celebration",nextSceneId:"wants-vs-needs",metricChanges:{money:-2,happiness:8,relationships:8},tooltip:"Sharing joy with close friends strengthens bonds"}]},{id:"wants-vs-needs",title:"Wants vs. Needs",description:"Your wishlist: New phone, sneakers, that designer hoodie. Your needs: Rent, commute, groceries, loan from a friend.",choices:[{id:"budget-split",text:'Create a "fun" vs "needs" split in a money app',nextSceneId:"roommate-deal",metricChanges:{money:8,knowledge:10,happiness:3}},{id:"ask-parents",text:"Ask parents what they did with their first check",nextSceneId:"roommate-deal",metricChanges:{knowledge:8,relationships:5,money:5}},{id:"go-shopping",text:"Go shopping. You'll budget next month",nextSceneId:"roommate-deal",metricChanges:{money:-10,happiness:10,knowledge:-5}}]},{id:"roommate-deal",title:"The Roommate Deal",description:"Your classmate wants to share a flat near your work. It's close, fun, but expensive. Your parents say stay home and save.",choices:[{id:"move-in",text:"Move in  freedom matters",nextSceneId:"impulse-trap",metricChanges:{money:-15,happiness:10,relationships:5,health:-3}},{id:"negotiate",text:"Negotiate a lower rent with your friend",nextSceneId:"impulse-trap",metricChanges:{money:-5,knowledge:8,relationships:5}},{id:"stay-home",text:"Stay at home for now and save",nextSceneId:"impulse-trap",metricChanges:{money:15,happiness:-5,relationships:-3}}]},{id:"impulse-trap",title:"The Impulse Trap",description:'At the mall, your favorite phone is on sale. Sales rep: "Zero interest EMI! Just 2,500/month!"',choices:[{id:"buy-it",text:"Buy it. You work now",nextSceneId:"celebration-isolation",metricChanges:{money:-15,happiness:15,knowledge:-5}},{id:"compare-deals",text:"Compare with refurbished deals online",nextSceneId:"celebration-isolation",metricChanges:{money:-5,knowledge:10,happiness:3}},{id:"walk-away",text:"Walk away. You'll revisit later",nextSceneId:"celebration-isolation",metricChanges:{money:5,knowledge:8,happiness:-3}}]},{id:"celebration-isolation",title:"Celebration or Isolation?",description:"Friends are planning a night out to celebrate your success. 3,000 split. You also owe your cousin 2,000.",choices:[{id:"join-pay",text:"Join and pay for the group  feel generous",nextSceneId:"emergency",metricChanges:{money:-10,happiness:10,relationships:15}},{id:"skip",text:"Say you're broke  skip and deal with FOMO",nextSceneId:"emergency",metricChanges:{money:5,happiness:-10,relationships:-5}},{id:"budget-limit",text:"Go but set a spending limit",nextSceneId:"emergency",metricChanges:{money:-5,happiness:8,knowledge:5,relationships:7}}]},{id:"emergency",title:"The Emergency",description:"End of week: your laptop dies. Work deadline tomorrow. Repair will cost 4,000. You have 2,000 left.",choices:[{id:"borrow",text:"Ask a friend for a temporary loan",nextSceneId:"help-past-future",metricChanges:{money:0,relationships:-2,happiness:-5}},{id:"emergency-fund",text:"Use your emergency fund (if you made one)",nextSceneId:"help-past-future",metricChanges:{money:-5,knowledge:10,happiness:5}},{id:"diy-fix",text:"Panic and try to DIY fix it",nextSceneId:"help-past-future",metricChanges:{knowledge:5,happiness:-8,health:-5}}]},{id:"help-past-future",title:"Help from the Past or Future?",description:"You find an online finance course: 799. A voice in your head says it's worth it. Another says wait till next month.",choices:[{id:"take-course",text:"Invest in yourself  take the course",nextSceneId:"credit-card-call",metricChanges:{money:-3,knowledge:15,happiness:5}},{id:"bookmark",text:"Bookmark it for later",nextSceneId:"credit-card-call",metricChanges:{money:0,knowledge:0,happiness:-3}},{id:"free-videos",text:"Watch free videos instead",nextSceneId:"credit-card-call",metricChanges:{money:0,knowledge:8,happiness:3}}]},{id:"credit-card-call",title:"Credit Card Call",description:'Your bank offers a credit card. 50,000 limit. "Perfect for first earners like you!" they say.',choices:[{id:"accept",text:"Accept it. Emergency backup, right?",nextSceneId:"rent-due",metricChanges:{money:0,knowledge:-5,happiness:5}},{id:"decline",text:"Decline politely",nextSceneId:"rent-due",metricChanges:{money:3,knowledge:5,happiness:0}},{id:"accept-hide",text:"Accept but keep it hidden until needed",nextSceneId:"rent-due",metricChanges:{money:0,knowledge:3,happiness:3}}]},{id:"rent-due",title:"Rent is Due",description:"If you moved out, this is where rent hits. Unexpected power bill is also due. If you stayed home, this is where you're asked to contribute or help with chores.",choices:[{id:"cut-back",text:"Cut back on food/luxuries to afford bills",nextSceneId:"end-of-month",metricChanges:{money:5,health:-5,happiness:-5}},{id:"early-payment",text:"Ask boss for early payment",nextSceneId:"end-of-month",metricChanges:{money:3,relationships:-3,happiness:-3}},{id:"borrow-again",text:"Borrow again",nextSceneId:"end-of-month",metricChanges:{money:5,relationships:-8,happiness:-5}}]},{id:"end-of-month",title:"End of Month Debrief",description:"You've lived through your first month of adulting. You reflect on: How much is left in your account? How do you feel about your choices? What would you do differently next time?",choices:[{id:"see-future",text:'View a "Future You" scenario if you keep the same habits',nextSceneId:"ending-financial",metricChanges:{},tooltip:"See how your current habits affect your future self"},{id:"replay-saver",text:"Replay path with a saver mindset",nextSceneId:"ending-financial-reflective",metricChanges:{},tooltip:"Learn what might happen with more financial discipline"},{id:"get-template",text:"Download a budget template and start fresh",nextSceneId:"ending-financial-proactive",metricChanges:{},tooltip:"Take practical steps to improve your financial future"}],isEnding:!0},{id:"ending-financial",title:"Your Financial Future",description:"Based on your choices, you've learned important lessons about managing your first income. Your spending habits have set a foundation for your financial future.",choices:[{id:"complete",text:"Complete the journey",nextSceneId:"complete",metricChanges:{}}],isEnding:!0},{id:"ending-financial-reflective",title:"The Path of Saving",description:"You consider how your choices might have been different with a saver's mindset. This reflection gives you clarity for your next paycheck.",choices:[{id:"complete",text:"Complete the journey",nextSceneId:"complete",metricChanges:{}}],isEnding:!0},{id:"ending-financial-proactive",title:"Budget Master",description:"Armed with a budget template, you're ready to take control of your finances with your next paycheck. Financial literacy is a journey!",choices:[{id:"complete",text:"Complete the journey",nextSceneId:"complete",metricChanges:{}}],isEnding:!0}]},{id:"party-pressure",title:"The Party Pressure",description:"Navigate the complex social dynamics of a high school party while staying true to your values and priorities.",ageGroup:"14-18",category:"Social Skills",thumbnail:"https://images.unsplash.com/photo-1574391884720-bbc3740c59d1?q=80&w=2000&auto=format&fit=crop",initialMetrics:{health:85,money:60,happiness:70,knowledge:75,relationships:65},scenes:[{id:"start",title:"The Invite",description:`You're prepping for a high-stakes exam next week when Aryan texts: "Party at mine. It's going to be EPIC. You're in, right?"`,choices:[{id:"say-yes",text:"Say yes immediately",nextSceneId:"hype-pressure",metricChanges:{happiness:5,knowledge:-5,relationships:5},tooltip:"Social acceptance feels good, but could impact your study time"},{id:"say-no",text:"Say no  you need to study",nextSceneId:"hype-pressure",metricChanges:{happiness:-5,knowledge:8,relationships:-5},tooltip:"Prioritizing academics can be tough but valuable"},{id:"say-maybe",text:'Say "maybe" and keep options open',nextSceneId:"hype-pressure",metricChanges:{happiness:2,knowledge:3,relationships:0},tooltip:"Keeping options open gives you time to think"}]},{id:"hype-pressure",title:"Hype and Pressure",description:`You're bombarded with snaps of pre-party excitement. A friend says, "Don't be boring, it's just ONE night."`,choices:[{id:"cave-in",text:"Cave in  make it a short visit",nextSceneId:"crossroads",metricChanges:{happiness:3,relationships:5,knowledge:-3}},{id:"double-down",text:"Double down on studying  exam comes first",nextSceneId:"crossroads",metricChanges:{happiness:-3,relationships:-5,knowledge:10}},{id:"host-movie",text:"Host a chill movie night at home instead",nextSceneId:"crossroads",metricChanges:{happiness:7,relationships:3,knowledge:0}}]},{id:"crossroads",title:"The Crossroads",description:'You get ready. Your sibling asks, "Are you sure this is a good idea?" You hesitate. Your backpack is packed  for the party or the library?',choices:[{id:"go-party",text:"Go to the party. YOLO",nextSceneId:"party-begins",metricChanges:{happiness:8,relationships:5,knowledge:-8}},{id:"go-library",text:"Head to the library",nextSceneId:"library-path",metricChanges:{happiness:-5,relationships:-5,knowledge:15}},{id:"cafe-think",text:"Sit in a caf and think it over",nextSceneId:"cafe-path",metricChanges:{happiness:3,relationships:0,knowledge:5}}]},{id:"party-begins",title:"The Party Begins",description:`Music's loud, drinks everywhere, someone's already passed out on the beanbag. Aryan grins: "Finally! You made it!"`,choices:[{id:"join-dance",text:"Join the dance floor",nextSceneId:"drinks-dares",metricChanges:{happiness:10,relationships:8,health:-3}},{id:"stay-wall",text:"Stay near the wall  observe",nextSceneId:"drinks-dares",metricChanges:{happiness:3,relationships:0,knowledge:5}}]},{id:"drinks-dares",title:"Drinks and Dares",description:`You're at the party. A dare: "Who's the most attractive person in the room?"`,choices:[{id:"answer-dare",text:"Answer the dare",nextSceneId:"party-fun",metricChanges:{happiness:5,relationships:5,knowledge:5}},{id:"ignore-dare",text:"Ignore the dare",nextSceneId:"party-fun",metricChanges:{happiness:0,relationships:0,knowledge:0}}]},{id:"party-fun",title:"Party Fun",description:"You're having a great time. You meet new people, have fun, and enjoy the music.",choices:[{id:"ending-13",text:"See your results",nextSceneId:"ending-party",metricChanges:{},tooltip:"See how your journey turned out"}],isEnding:!0},{id:"ending-party",title:"The Party",description:"You've had a great time at the party. You're tired but happy. You're proud of yourself for staying true to your values.",choices:[{id:"complete",text:"Complete the journey",nextSceneId:"complete",metricChanges:{}}],isEnding:!0}]},{id:"climate-council",title:"The Climate Council",description:"Make difficult decisions about climate policy as part of a youth climate council.",ageGroup:"14-20",category:"Ethics",thumbnail:"https://images.unsplash.com/photo-1518495973542-4542c06a5843",initialMetrics:{health:80,money:65,happiness:70,knowledge:75,relationships:70},scenes:[{id:"start",title:"The Summoning",description:"You're chosen to be on your country's Youth Climate Council. You're joining a summit where decisions will affect global carbon policy.",choices:[{id:"speak-boldly",text:"Speak boldly about climate injustice",nextSceneId:"global-stakeholders",metricChanges:{knowledge:8,relationships:5,happiness:5},tooltip:"Speaking your truth can inspire others"},{id:"focus-realistic",text:"Focus on realistic, economically viable ideas",nextSceneId:"global-stakeholders",metricChanges:{knowledge:5,money:8,relationships:3},tooltip:"Practical solutions may be easier to implement"},{id:"observe",text:"Quietly observe the political dynamics first",nextSceneId:"global-stakeholders",metricChanges:{knowledge:10,happiness:-2,relationships:0},tooltip:"Sometimes it's wise to understand before speaking"}]},{id:"global-stakeholders",title:"Global Stakeholders",description:'You sit in a room with ministers from rich and poor nations. One delegate says: "Developing nations should cut too!" Another replies: "You polluted for 100 years!"',choices:[{id:"push-equity",text:"Push for climate equity  demand fairness",nextSceneId:"industry-pushback",metricChanges:{knowledge:5,relationships:8,happiness:5}},{id:"suggest-universal",text:"Suggest a universal, measurable commitment",nextSceneId:"industry-pushback",metricChanges:{knowledge:8,money:5,relationships:5}},{id:"stay-neutral",text:"Stay neutral  you want to listen more",nextSceneId:"industry-pushback",metricChanges:{knowledge:10,relationships:2,happiness:0}}]},{id:"industry-pushback",title:"Industry Pushback",description:'Big Oil lobbyists warn, "Carbon tax will destroy jobs!" Meanwhile, youth protests chant outside for zero emissions.',choices:[{id:"slow-transition",text:"Support a slow transition  reduce backlash",nextSceneId:"science-briefing",metricChanges:{money:8,happiness:-5,relationships:3}},{id:"green-jobs",text:'Propose a "green jobs" offset program',nextSceneId:"science-briefing",metricChanges:{money:5,knowledge:8,relationships:5}},{id:"strict-regulation",text:"Push for strict regulation, even if unpopular",nextSceneId:"science-briefing",metricChanges:{knowledge:10,money:-8,happiness:5}}]},{id:"science-briefing",title:"The Science Briefing",description:"A secret report shows the world has 8 years to avoid catastrophic damage. But releasing it now could panic investors.",choices:[{id:"leak-anonymously",text:"Leak it anonymously",nextSceneId:"dilemma-delay",metricChanges:{knowledge:5,money:-10,relationships:-5}},{id:"share-leaders",text:"Share it with council leaders only",nextSceneId:"dilemma-delay",metricChanges:{knowledge:8,money:5,relationships:8}},{id:"public-release",text:"Recommend public release with calm framing",nextSceneId:"dilemma-delay",metricChanges:{knowledge:10,happiness:-5,relationships:5}}]},{id:"dilemma-delay",title:"The Dilemma of Delay",description:"A rich nation proposes delaying cuts by 10 years, in exchange for funding green energy in poorer nations.",choices:[{id:"accept-delay",text:"Accept  it's better than nothing",nextSceneId:"protest-storm",metricChanges:{money:10,happiness:-5,relationships:3}},{id:"reject-delay",text:"Reject  delay is deadly",nextSceneId:"protest-storm",metricChanges:{knowledge:8,money:-8,happiness:5}},{id:"negotiate-terms",text:"Negotiate for legally binding terms",nextSceneId:"protest-storm",metricChanges:{knowledge:10,money:5,relationships:8}}]},{id:"protest-storm",title:"The Protest Storm",description:'Activists storm the council building. Your speech earlier is on their signs  "NO PLANET B." Your rep is rising.',choices:[{id:"join-protest",text:"Join the protest",nextSceneId:"green-tech-gamble",metricChanges:{happiness:10,relationships:8,money:-5}},{id:"call-dialogue",text:"Call for dialogue between both sides",nextSceneId:"green-tech-gamble",metricChanges:{knowledge:8,relationships:5,happiness:3}},{id:"distance-yourself",text:"Distance yourself  optics matter",nextSceneId:"green-tech-gamble",metricChanges:{money:5,relationships:-5,happiness:-5}}]},{id:"green-tech-gamble",title:"Green Tech Gamble",description:"You can back a risky but revolutionary climate tech (like direct air capture). But it's expensive and untested.",choices:[{id:"invest-support",text:"Invest full support  this is our moonshot",nextSceneId:"deal-or-no-deal",metricChanges:{knowledge:10,money:-10,happiness:8}},{id:"phased-testing",text:"Recommend phased testing only",nextSceneId:"deal-or-no-deal",metricChanges:{knowledge:8,money:-5,happiness:3}},{id:"known-solutions",text:"Prioritize known solutions instead",nextSceneId:"deal-or-no-deal",metricChanges:{knowledge:5,money:5,happiness:0}}]},{id:"deal-or-no-deal",title:"Deal or No Deal",description:"Final treaty terms are brutal: If you agree, there's backlash at home. If you don't, the talks collapse.",choices:[{id:"sign-agree",text:"Sign and face the consequences",nextSceneId:"local-fallout",metricChanges:{knowledge:8,money:-8,relationships:5}},{id:"walk-out",text:"Walk out  it's not good enough",nextSceneId:"local-fallout",metricChanges:{happiness:5,relationships:-5,money:0}},{id:"temporary-framework",text:"Suggest a temporary framework",nextSceneId:"local-fallout",metricChanges:{knowledge:10,relationships:8,money:3}}]},{id:"local-fallout",title:"Local Fallout",description:"Back home: People are jobless due to the green shift. Protests erupt. News anchors call you a traitor to industry.",choices:[{id:"apologize-relief",text:"Apologize and promise economic relief",nextSceneId:"ten-years-later",metricChanges:{relationships:8,money:-5,happiness:-3}},{id:"defend-choices",text:"Defend your choices proudly",nextSceneId:"ten-years-later",metricChanges:{knowledge:8,relationships:-5,happiness:5}},{id:"go-silent",text:"Go silent  let things cool down",nextSceneId:"ten-years-later",metricChanges:{money:5,relationships:0,happiness:-5}}]},{id:"ten-years-later",title:"10 Years Later",description:'You see the effects of your policy: Oceans rising? Cities adapting? Carbon levels dropping? A young kid interviews you: "What would you do differently if you could go back?"',choices:[{id:"own-everything",text:"Own everything  good and bad",nextSceneId:"ending-climate-leader",metricChanges:{},tooltip:"See how your journey turned out"}],isEnding:!0},{id:"ending-climate-leader",title:"Climate Leader",description:"Your decisions have shaped global climate policy. Whether perfect or flawed, you stood up when it mattered.",choices:[{id:"complete",text:"Complete the journey",nextSceneId:"complete",metricChanges:{}}],isEnding:!0}]},{id:"friend-in-trouble",title:"The Friend in Trouble",description:"Your friend has made a serious mistake. Will you help them, report them, or find another way?",ageGroup:"14-18",category:"Ethics",thumbnail:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=2000&auto=format&fit=crop",initialMetrics:{health:80,money:60,happiness:70,knowledge:70,relationships:85},scenes:[{id:"start",title:"The Midnight Call",description:`It's 1:47 AM. Your phone buzzes. It's your best friend. "Bro, I messed up. Please don't hang up. I don't know who else to call." They're out, panicked, and maybe in trouble with the law.`,choices:[{id:"ask-what-happened",text:"Ask what happened first",nextSceneId:"confession",metricChanges:{knowledge:8,relationships:5,happiness:-3},tooltip:"Gathering information before acting"},{id:"say-on-way",text:"Say you're on your way",nextSceneId:"confession",metricChanges:{relationships:10,happiness:-5,health:-5},tooltip:"Immediate loyalty can strengthen bonds"},{id:"tell-calm-down",text:"Tell them to calm down and call their parents",nextSceneId:"confession",metricChanges:{knowledge:5,relationships:-8,happiness:0},tooltip:"Sometimes the responsible choice isn't popular"}]},{id:"confession",title:"The Confession",description:"They admit it  they were at a party, tried to drive, and crashed a bike. No one is hurt but there was alcohol involved.",choices:[{id:"turn-themselves-in",text:"Tell them to turn themselves in",nextSceneId:"secret-ride",metricChanges:{knowledge:10,relationships:-10,happiness:-5}},{id:"offer-pickup",text:"Offer to pick them up and hide them",nextSceneId:"secret-ride",metricChanges:{relationships:10,happiness:-3,health:-5}},{id:"think-together",text:"Say you'll think of a plan together",nextSceneId:"secret-ride",metricChanges:{knowledge:5,relationships:8,happiness:0}}]},{id:"secret-ride",title:"The Secret Ride",description:"If you choose to meet them, you sneak out and find them bleeding and shaking. A car slowly drives past. Are you being followed?",choices:[{id:"take-home",text:"Take them to your place and clean them up",nextSceneId:"fallout",metricChanges:{relationships:10,happiness:-5,health:-3}},{id:"hospital",text:"Drive them to the hospital, anonymously",nextSceneId:"fallout",metricChanges:{knowledge:8,relationships:5,happiness:-3}},{id:"call-adult",text:"Call a trusted adult to intervene",nextSceneId:"fallout",metricChanges:{knowledge:10,relationships:-5,happiness:-5}}]},{id:"fallout",title:"The Fallout",description:"By morning, news breaks of a hit-and-run. No one died, but the property damage is severe. Your friend is now a suspect.",choices:[{id:"confront-friend",text:"Confront your friend  is this what happened?",nextSceneId:"pressure-mounts",metricChanges:{knowledge:10,relationships:-5,happiness:-3}},{id:"stay-silent",text:"Stay silent  they begged you",nextSceneId:"pressure-mounts",metricChanges:{relationships:5,happiness:-8,health:-5}},{id:"research-legal",text:"Research legal options without telling anyone",nextSceneId:"pressure-mounts",metricChanges:{knowledge:10,happiness:-3,money:-3}}]},{id:"pressure-mounts",title:"The Pressure Mounts",description:`A detective visits your school asking questions. Your teacher looks concerned. You're pulled aside for a "friendly chat."`,choices:[{id:"deny-knowing",text:"Deny knowing anything",nextSceneId:"breaking-point",metricChanges:{relationships:5,happiness:-10,health:-8}},{id:"lie-skillfully",text:"Lie skillfully to protect your friend",nextSceneId:"breaking-point",metricChanges:{knowledge:5,relationships:8,happiness:-5}},{id:"lawyer-up",text:"Say you might know something  ask for a lawyer",nextSceneId:"breaking-point",metricChanges:{knowledge:10,money:-5,happiness:-3}}]},{id:"breaking-point",title:"The Breaking Point",description:"You're overwhelmed. You've missed homework, can't sleep, and your parents are suspicious. Your phone has 12 unread messages from your friend.",choices:[{id:"confront-falling-apart",text:"Confront them  you're falling apart",nextSceneId:"truth-leaks",metricChanges:{relationships:-5,happiness:5,health:8}},{id:"ghost-them",text:"Ghost them  self-preservation first",nextSceneId:"truth-leaks",metricChanges:{relationships:-10,happiness:3,health:5}},{id:"open-up",text:"Open up to a counselor or teacher",nextSceneId:"truth-leaks",metricChanges:{knowledge:8,relationships:-3,happiness:5}}]},{id:"truth-leaks",title:"The Truth Leaks",description:"A bystander posts CCTV footage. People recognize the jacket your friend wore. Rumors explode.",choices:[{id:"tell-confess",text:"Tell your friend to confess and protect you",nextSceneId:"ending-integrity",metricChanges:{knowledge:8,relationships:-5,happiness:5},tooltip:"See how your journey turned out"}],isEnding:!0},{id:"ending-integrity",title:"The Path of Integrity",description:"Through this difficult situation, you learned about the true meaning of friendship, integrity, and the importance of making hard choices.",choices:[{id:"complete",text:"Complete the journey",nextSceneId:"complete",metricChanges:{}}],isEnding:!0}]},{id:"dream-vs-family",title:"The Dream vs Family Expectation",description:"Navigate the challenging balance between pursuing your own passion and meeting your family's expectations.",ageGroup:"16-20",category:"Personal Growth",thumbnail:"https://images.unsplash.com/photo-1532629345422-7515f3d16bb6?q=80&w=2000&auto=format&fit=crop",initialMetrics:{health:75,money:50,happiness:65,knowledge:70,relationships:80},scenes:[{id:"start",title:"The Results Are In",description:"Your grades are in. They're decent  but not top university material. You want to pursue your creative passion, but your family already has plans for you.",choices:[{id:"break-news",text:'Break the news gently  "I have a different dream"',nextSceneId:"living-room-debate",metricChanges:{happiness:5,relationships:-5,knowledge:5},tooltip:"Honesty may be difficult but builds foundation for understanding"},{id:"stay-silent",text:"Stay silent for now  don't rock the boat",nextSceneId:"living-room-debate",metricChanges:{happiness:-5,relationships:5,health:-3},tooltip:"Avoiding conflict sometimes creates inner tension"},{id:"fake-interest",text:"Fake interest in their dream while researching your own",nextSceneId:"living-room-debate",metricChanges:{happiness:-3,knowledge:8,relationships:0},tooltip:"Playing along can buy time to make your own plans"}]},{id:"living-room-debate",title:"The Living Room Debate",description:'You finally bring it up. Your dad sighs. Your mom looks heartbroken. "Do you want to throw your life away for a hobby?"',choices:[{id:"prove-serious",text:"Try to prove how serious you are",nextSceneId:"friends-offer",metricChanges:{knowledge:5,happiness:3,relationships:-3}},{id:"explode",text:`Explode  "It's my life!"`,nextSceneId:"friends-offer",metricChanges:{happiness:5,relationships:-10,health:-5}},{id:"walk-out",text:"Say nothing. Walk out.",nextSceneId:"friends-offer",metricChanges:{happiness:-5,relationships:-5,health:-3}}]},{id:"friends-offer",title:"A Friend's Offer",description:"Your best friend offers to help you build a portfolio/plan/app  but it'll take time and secrecy.",choices:[{id:"accept-secret",text:"Accept. Build your dream in secret",nextSceneId:"comparison-game",metricChanges:{knowledge:10,happiness:5,relationships:-3}},{id:"tell-family",text:"Tell your family  maybe they'll respect the effort",nextSceneId:"comparison-game",metricChanges:{knowledge:5,relationships:3,happiness:3}},{id:"decline-risk",text:"Decline  you don't want to risk more tension",nextSceneId:"comparison-game",metricChanges:{relationships:5,happiness:-5,knowledge:-3}}]},{id:"comparison-game",title:"The Comparison Game",description:`Relatives visit. Your cousin just cracked a top entrance exam. You're asked, "So, what are you doing next?"`,choices:[{id:"tell-truth",text:"Tell the truth proudly",nextSceneId:"the-mentor",metricChanges:{happiness:8,relationships:-8,knowledge:5}},{id:"lie-avoid",text:"Lie to avoid shame",nextSceneId:"the-mentor",metricChanges:{happiness:-5,relationships:5,health:-5}},{id:"still-deciding",text:'Say "still deciding" and escape the convo',nextSceneId:"the-mentor",metricChanges:{happiness:0,relationships:0,knowledge:0}}]},{id:"the-mentor",title:"The Mentor",description:"A teacher notices your talent and offers a connection: internship, contest, bootcamp  but it requires skipping family events.",choices:[{id:"go-break",text:"Go  this could be your break",nextSceneId:"ultimatum",metricChanges:{knowledge:10,happiness:8,relationships:-8}},{id:"ask-permission",text:"Ask family permission first",nextSceneId:"ultimatum",metricChanges:{relationships:5,happiness:-3,knowledge:3}},{id:"decline-risky",text:"Decline  too risky right now",nextSceneId:"ultimatum",metricChanges:{relationships:8,happiness:-8,knowledge:-5}}]},{id:"ultimatum",title:"The Ultimatum",description:'Your family sets conditions: "You want to chase this dream? Fine. No financial support. No excuses." Your college deadline is approaching.',choices:[{id:"choose-dream",text:"Choose your dream  live with uncertainty",nextSceneId:"isolation-period",metricChanges:{happiness:8,money:-10,relationships:-8}},{id:"take-path",text:"Take their path  buy time",nextSceneId:"isolation-period",metricChanges:{money:5,relationships:8,happiness:-10}},{id:"compromise",text:"Try for a compromise: double major/minor/flexible path",nextSceneId:"isolation-period",metricChanges:{knowledge:5,relationships:5,happiness:3}}]},{id:"isolation-period",title:"Isolation Period",description:`You feel alone. Your friends don't get it. Family barely speaks. Doubts creep in. "Am I being selfish? What if I fail?"`,choices:[{id:"seek-therapy",text:"Seek therapy or guidance",nextSceneId:"ending-balanced",metricChanges:{health:10,knowledge:8,happiness:5},tooltip:"See how your journey turned out"}],isEnding:!0},{id:"ending-balanced",title:"The Balanced Path",description:"You've learned to navigate the challenging balance between your own dreams and your family's expectations. This journey has helped you grow as a person.",choices:[{id:"complete",text:"Complete the journey",nextSceneId:"complete",metricChanges:{}}],isEnding:!0}]}],j8=1,k8=1e6;let My=0;function M8(){return My=(My+1)%Number.MAX_SAFE_INTEGER,My.toString()}const Oy=new Map,e1=t=>{if(Oy.has(t))return;const e=setTimeout(()=>{Oy.delete(t),bu({type:"REMOVE_TOAST",toastId:t})},k8);Oy.set(t,e)},O8=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,j8)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?e1(n):t.toasts.forEach(s=>{e1(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ef=[];let Sf={toasts:[]};function bu(t){Sf=O8(Sf,t),Ef.forEach(e=>{e(Sf)})}function V8({...t}){const e=M8(),n=r=>bu({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>bu({type:"DISMISS_TOAST",toastId:e});return bu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:n}}function er(){const[t,e]=y.useState(Sf);return y.useEffect(()=>(Ef.push(e),()=>{const n=Ef.indexOf(e);n>-1&&Ef.splice(n,1)}),[t]),{...t,toast:V8,dismiss:n=>bu({type:"DISMISS_TOAST",toastId:n})}}const L8=()=>{};var t1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},U8=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},UD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,f=(i&3)<<4|o>>4;let m=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(m=64)),s.push(n[h],n[f],n[m],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):U8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||u==null||f==null)throw new F8;const m=i<<2|o>>4;if(s.push(m),u!==64){const p=o<<4&240|u>>2;if(s.push(p),f!==64){const E=u<<6&192|f;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class F8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B8=function(t){const e=LD(t);return UD.encodeByteArray(e,!0)},Tm=function(t){return B8(t).replace(/\./g,"")},FD=function(t){try{return UD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=()=>z8().__FIREBASE_DEFAULTS__,q8=()=>{if(typeof process>"u"||typeof t1>"u")return;const t=t1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},G8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FD(t[1]);return e&&JSON.parse(e)},jp=()=>{try{return L8()||H8()||q8()||G8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BD=t=>{var e,n;return(n=(e=jp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$8=t=>{const e=BD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},zD=()=>{var t;return(t=jp())===null||t===void 0?void 0:t.config},HD=t=>{var e;return(e=jp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tm(JSON.stringify(n)),Tm(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function Q8(){var t;const e=(t=jp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Z8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J8(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eB(){return!Q8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GD(){try{return typeof indexedDB=="object"}catch{return!1}}function $D(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function tB(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="FirebaseError";class Es extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=nB,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,so.prototype.create)}}class so{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?sB(i,s):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new Es(r,o,s)}}function sB(t,e){return t.replace(rB,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const rB=/\{\$([^}]+)}/g;function iB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(n1(i)&&n1(a)){if(!jr(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function n1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Zc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aB(t,e){const n=new oB(t,e);return n.subscribe.bind(n)}class oB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");lB(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Vy),r.error===void 0&&(r.error=Vy),r.complete===void 0&&(r.complete=Vy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=1e3,uB=2,dB=4*60*60*1e3,hB=.5;function s1(t,e=cB,n=uB){const s=e*Math.pow(n,t),r=Math.round(hB*s*(Math.random()-.5)*2);return Math.min(dB,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class vs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fB=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Y8;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pB(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);s===o&&a.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mB(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mB(t){return t===va?void 0:t}function pB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const yB={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},vB=_e.INFO,bB={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},xB=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=bB[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kp{constructor(e){this.name=e,this._logLevel=vB,this._logHandler=xB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const wB=(t,e)=>e.some(n=>t instanceof n);let r1,i1;function _B(){return r1||(r1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TB(){return i1||(i1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YD=new WeakMap,S0=new WeakMap,KD=new WeakMap,Ly=new WeakMap,zx=new WeakMap;function EB(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ki(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&YD.set(n,t)}).catch(()=>{}),zx.set(e,t),e}function SB(t){if(S0.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});S0.set(t,e)}let A0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return S0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AB(t){A0=t(A0)}function CB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Uy(this),e,...n);return KD.set(s,e.sort?e.sort():[e]),ki(s)}:TB().includes(t)?function(...e){return t.apply(Uy(this),e),ki(YD.get(this))}:function(...e){return ki(t.apply(Uy(this),e))}}function RB(t){return typeof t=="function"?CB(t):(t instanceof IDBTransaction&&SB(t),wB(t,_B())?new Proxy(t,A0):t)}function ki(t){if(t instanceof IDBRequest)return EB(t);if(Ly.has(t))return Ly.get(t);const e=RB(t);return e!==t&&(Ly.set(t,e),zx.set(e,t)),e}const Uy=t=>zx.get(t);function WD(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),o=ki(a);return s&&a.addEventListener("upgradeneeded",l=>{s(ki(a.result),l.oldVersion,l.newVersion,ki(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const NB=["get","getKey","getAll","getAllKeys","count"],IB=["put","add","delete","clear"],Fy=new Map;function a1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fy.get(e))return Fy.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=IB.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||NB.includes(n)))return;const i=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),r&&l.done]))[0]};return Fy.set(e,i),i}AB(t=>({...t,get:(e,n,s)=>a1(e,n)||t.get(e,n,s),has:(e,n)=>!!a1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PB(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function PB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const C0="@firebase/app",o1="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new kp("@firebase/app"),jB="@firebase/app-compat",kB="@firebase/analytics-compat",MB="@firebase/analytics",OB="@firebase/app-check-compat",VB="@firebase/app-check",LB="@firebase/auth",UB="@firebase/auth-compat",FB="@firebase/database",BB="@firebase/data-connect",zB="@firebase/database-compat",HB="@firebase/functions",qB="@firebase/functions-compat",GB="@firebase/installations",$B="@firebase/installations-compat",YB="@firebase/messaging",KB="@firebase/messaging-compat",WB="@firebase/performance",QB="@firebase/performance-compat",XB="@firebase/remote-config",ZB="@firebase/remote-config-compat",JB="@firebase/storage",ez="@firebase/storage-compat",tz="@firebase/firestore",nz="@firebase/vertexai",sz="@firebase/firestore-compat",rz="firebase",iz="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="[DEFAULT]",az={[C0]:"fire-core",[jB]:"fire-core-compat",[MB]:"fire-analytics",[kB]:"fire-analytics-compat",[VB]:"fire-app-check",[OB]:"fire-app-check-compat",[LB]:"fire-auth",[UB]:"fire-auth-compat",[FB]:"fire-rtdb",[BB]:"fire-data-connect",[zB]:"fire-rtdb-compat",[HB]:"fire-fn",[qB]:"fire-fn-compat",[GB]:"fire-iid",[$B]:"fire-iid-compat",[YB]:"fire-fcm",[KB]:"fire-fcm-compat",[WB]:"fire-perf",[QB]:"fire-perf-compat",[XB]:"fire-rc",[ZB]:"fire-rc-compat",[JB]:"fire-gcs",[ez]:"fire-gcs-compat",[tz]:"fire-fst",[sz]:"fire-fst-compat",[nz]:"fire-vertex","fire-js":"fire-js",[rz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=new Map,oz=new Map,N0=new Map;function l1(t,e){try{t.container.addComponent(e)}catch(n){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gs(t){const e=t.name;if(N0.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;N0.set(e,t);for(const n of Em.values())l1(n,t);for(const n of oz.values())l1(n,t);return!0}function ro(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new so("app","Firebase",lz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=iz;function QD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:R0,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw Mi.create("bad-app-name",{appName:String(r)});if(n||(n=zD()),!n)throw Mi.create("no-options");const i=Em.get(r);if(i){if(jr(n,i.options)&&jr(s,i.config))return i;throw Mi.create("duplicate-app",{appName:r})}const a=new gB(r);for(const l of N0.values())a.addComponent(l);const o=new cz(n,s,a);return Em.set(r,o),o}function Hx(t=R0){const e=Em.get(t);if(!e&&t===R0&&zD())return QD();if(!e)throw Mi.create("no-app",{appName:t});return e}function Qn(t,e,n){var s;let r=(s=az[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(o.join(" "));return}Gs(new vs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz="firebase-heartbeat-database",dz=1,ed="firebase-heartbeat-store";let By=null;function XD(){return By||(By=WD(uz,dz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ed)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mi.create("idb-open",{originalErrorMessage:t.message})})),By}async function hz(t){try{const n=(await XD()).transaction(ed),s=await n.objectStore(ed).get(ZD(t));return await n.done,s}catch(e){if(e instanceof Es)kr.warn(e.message);else{const n=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kr.warn(n.message)}}}async function c1(t,e){try{const s=(await XD()).transaction(ed,"readwrite");await s.objectStore(ed).put(e,ZD(t)),await s.done}catch(n){if(n instanceof Es)kr.warn(n.message);else{const s=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kr.warn(s.message)}}}function ZD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=1024,mz=30;class pz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yz(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=u1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>mz){const a=vz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){kr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u1(),{heartbeatsToSend:s,unsentEntries:r}=gz(this._heartbeatsCache.heartbeats),i=Tm(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return kr.warn(n),""}}}function u1(){return new Date().toISOString().substring(0,10)}function gz(t,e=fz){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),d1(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),d1(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class yz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GD()?$D().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return c1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return c1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function d1(t){return Tm(JSON.stringify({version:2,heartbeats:t})).length}function vz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(t){Gs(new vs("platform-logger",e=>new DB(e),"PRIVATE")),Gs(new vs("heartbeat",e=>new pz(e),"PRIVATE")),Qn(C0,o1,t),Qn(C0,o1,"esm2017"),Qn("fire-js","")}bz("");var xz="firebase",wz="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(xz,wz,"app");var Ps=function(){return Ps=Object.assign||function(e){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ps.apply(this,arguments)};function Gd(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function _z(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}function JD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tz=JD,eP=new so("auth","Firebase",JD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new kp("@firebase/auth");function Ez(t,...e){Sm.logLevel<=_e.WARN&&Sm.warn(`Auth (${ac}): ${t}`,...e)}function Af(t,...e){Sm.logLevel<=_e.ERROR&&Sm.error(`Auth (${ac}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,...e){throw Gx(t,...e)}function ps(t,...e){return Gx(t,...e)}function qx(t,e,n){const s=Object.assign(Object.assign({},Tz()),{[e]:n});return new so("auth","Firebase",s).create(e,{appName:t.name})}function Ar(t){return qx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sz(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&es(t,"argument-error"),qx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return eP.create(t,...e)}function ie(t,e,...n){if(!t)throw Gx(e,...n)}function xr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Af(e),new Error(e)}function Mr(t,e){t||xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Az(){return h1()==="http:"||h1()==="https:"}function h1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Az()||qD()||"connection"in navigator)?navigator.onLine:!0}function Rz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=W8()||Z8()}get(){return Cz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Dz=new $d(3e4,6e4);function ta(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function na(t,e,n,s,r={}){return nP(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const o=qd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return X8()||(u.referrerPolicy="no-referrer"),tP.fetch()(await sP(t,t.config.apiHost,n,o),u)})}async function nP(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},Nz),e);try{const r=new jz(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Wh(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wh(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Wh(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Wh(t,"user-disabled",a);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qx(t,h,u);es(t,h)}}catch(r){if(r instanceof Es)throw r;es(t,"network-request-failed",{message:String(r)})}}async function Yd(t,e,n,s,r={}){const i=await na(t,e,n,s,r);return"mfaPendingCredential"in i&&es(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function sP(t,e,n,s){const r=`${e}${n}?${s}`,i=t,a=i.config.emulator?$x(t.config,r):`${t.config.apiScheme}://${r}`;return Iz.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function Pz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ps(this.auth,"network-request-failed")),Dz.get())})}}function Wh(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=ps(t,e,s);return r.customData._tokenResponse=n,r}function f1(t){return t!==void 0&&t.enterprise!==void 0}class kz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Pz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mz(t,e){return na(t,"GET","/v2/recaptchaConfig",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oz(t,e){return na(t,"POST","/v1/accounts:delete",e)}async function Am(t,e){return na(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vz(t,e=!1){const n=Xe(t),s=await n.getIdToken(e),r=Yx(s);ie(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:xu(zy(r.auth_time)),issuedAtTime:xu(zy(r.iat)),expirationTime:xu(zy(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zy(t){return Number(t)*1e3}function Yx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Af("JWT malformed, contained fewer than 3 sections"),null;try{const r=FD(n);return r?JSON.parse(r):(Af("Failed to decode base64 JWT payload"),null)}catch(r){return Af("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function m1(t){const e=Yx(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Es&&Lz(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Lz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cm(t){var e;const n=t.auth,s=await t.getIdToken(),r=await td(t,Am(n,{idToken:s}));ie(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?rP(i.providerUserInfo):[],o=Bz(t.providerData,a),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new D0(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function Fz(t){const e=Xe(t);await Cm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Bz(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function rP(t){return t.map(e=>{var{providerId:n}=e,s=Gd(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zz(t,e){const n=await nP(t,{},async()=>{const s=qd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=await sP(t,r,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",tP.fetch()(a,{method:"POST",headers:o,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Hz(t,e){return na(t,"POST","/v2/accounts:revokeToken",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=m1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await zz(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new il;return s&&(ie(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(ie(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(ie(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new il,this.toJSON())}_performRefresh(){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hs{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Gd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new D0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await td(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vz(this,e)}reload(){return Fz(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Cm(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await td(this,Oz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,a,o,l,u,h;const f=(s=n.displayName)!==null&&s!==void 0?s:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(a=n.photoURL)!==null&&a!==void 0?a:void 0,w=(o=n.tenantId)!==null&&o!==void 0?o:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:C,isAnonymous:P,providerData:M,stsTokenManager:A}=n;ie(_&&A,e,"internal-error");const S=il.fromJSON(this.name,A);ie(typeof _=="string",e,"internal-error"),Xr(f,e.name),Xr(m,e.name),ie(typeof C=="boolean",e,"internal-error"),ie(typeof P=="boolean",e,"internal-error"),Xr(p,e.name),Xr(E,e.name),Xr(w,e.name),Xr(x,e.name),Xr(v,e.name),Xr(b,e.name);const N=new hs({uid:_,auth:e,email:m,emailVerified:C,displayName:f,isAnonymous:P,photoURL:E,phoneNumber:p,tenantId:w,stsTokenManager:S,createdAt:v,lastLoginAt:b});return M&&Array.isArray(M)&&(N.providerData=M.map(R=>Object.assign({},R))),x&&(N._redirectEventId=x),N}static async _fromIdTokenResponse(e,n,s=!1){const r=new il;r.updateFromServerResponse(n);const i=new hs({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Cm(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ie(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?rP(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),o=new il;o.updateFromIdToken(s);const l=new hs({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new D0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Map;function wr(t){Mr(t instanceof Function,"Expected a class definition");let e=p1.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,p1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iP.type="NONE";const g1=iP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t,e,n){return`firebase:${t}:${e}:${n}`}class al{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Cf(this.userKey,r.apiKey,i),this.fullPersistenceKey=Cf("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Am(this.auth,{idToken:e}).catch(()=>{});return n?hs._fromGetAccountInfoResponse(this.auth,n,e):null}return hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new al(wr(g1),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||wr(g1);const a=Cf(s,e.config.apiKey,e.name);let o=null;for(const u of n)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const m=await Am(e,{idToken:h}).catch(()=>{});if(!m)break;f=await hs._fromGetAccountInfoResponse(e,m,h)}else f=hs._fromJSON(e,h);u!==i&&(o=f),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new al(i,e,s):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new al(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dP(e))return"Blackberry";if(hP(e))return"Webos";if(oP(e))return"Safari";if((e.includes("chrome/")||lP(e))&&!e.includes("edge/"))return"Chrome";if(uP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function aP(t=en()){return/firefox\//i.test(t)}function oP(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lP(t=en()){return/crios\//i.test(t)}function cP(t=en()){return/iemobile/i.test(t)}function uP(t=en()){return/android/i.test(t)}function dP(t=en()){return/blackberry/i.test(t)}function hP(t=en()){return/webos/i.test(t)}function Kx(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qz(t=en()){var e;return Kx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Gz(){return J8()&&document.documentMode===10}function fP(t=en()){return Kx(t)||uP(t)||hP(t)||dP(t)||/windows phone/i.test(t)||cP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t,e=[]){let n;switch(t){case"Browser":n=y1(en());break;case"Worker":n=`${y1(en())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ac}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yz(t,e={}){return na(t,"GET","/v2/passwordPolicy",ta(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=6;class Wz{constructor(e){var n,s,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:Kz,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v1(this),this.idTokenSubscription=new v1(this),this.beforeStateQueue=new $z(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wr(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await al.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Am(this,{idToken:e}),s=await hs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Cn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(Ar(this));const n=e?Xe(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yz(this),n=new Wz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new so("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Hz(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await al.create(this,[wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Ez(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sa(t){return Xe(t)}class v1{constructor(e){this.auth=e,this.observer=null,this.addObserver=aB(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xz(t){Mp=t}function pP(t){return Mp.loadJS(t)}function Zz(){return Mp.recaptchaEnterpriseScript}function Jz(){return Mp.gapiScript}function e7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class t7{constructor(){this.enterprise=new n7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class n7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const s7="recaptcha-enterprise",gP="NO_RECAPTCHA";class r7{constructor(e){this.type=s7,this.auth=sa(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{Mz(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new kz(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function r(i,a,o){const l=window.grecaptcha;f1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(gP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t7().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{s(this.auth).then(o=>{if(!n&&f1(window.grecaptcha))r(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Zz();l.length!==0&&(l+=o),pP(l).then(()=>{r(o,i,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function b1(t,e,n,s=!1,r=!1){const i=new r7(t);let a;if(r)a=gP;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function P0(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await b1(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await b1(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t,e){const n=ro(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(jr(i,e??{}))return r;es(r,"already-initialized")}return n.initialize({options:e})}function a7(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function o7(t,e,n){const s=sa(t);ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=yP(e),{host:a,port:o}=l7(e),l=o===null?"":`:${o}`,u={url:`${i}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ie(jr(u,s.config.emulator)&&jr(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,c7()}function yP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l7(t){const e=yP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:x1(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:x1(a)}}}function x1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,n){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function u7(t,e){return na(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(t,e){return Yd(t,"POST","/v1/accounts:signInWithPassword",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(t,e){return Yd(t,"POST","/v1/accounts:signInWithEmailLink",ta(t,e))}async function f7(t,e){return Yd(t,"POST","/v1/accounts:signInWithEmailLink",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends Wx{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new nd(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new nd(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P0(e,n,"signInWithPassword",d7);case"emailLink":return h7(e,{email:this._email,oobCode:this._password});default:es(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P0(e,s,"signUpPassword",u7);case"emailLink":return f7(e,{idToken:n,email:this._email,oobCode:this._password});default:es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t,e){return Yd(t,"POST","/v1/accounts:signInWithIdp",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7="http://localhost";class Ha extends Wx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):es("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Gd(n,["providerId","signInMethod"]);if(!s||!r)return null;const a=new Ha(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ol(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ol(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ol(e,n)}buildRequest(){const e={requestUri:m7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g7(t){const e=Xc(Zc(t)).link,n=e?Xc(Zc(e)).deep_link_id:null,s=Xc(Zc(t)).deep_link_id;return(s?Xc(Zc(s)).link:null)||s||n||e||t}class Qx{constructor(e){var n,s,r,i,a,o;const l=Xc(Zc(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(s=l.oobCode)!==null&&s!==void 0?s:null,f=p7((r=l.mode)!==null&&r!==void 0?r:null);ie(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.lang)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=g7(e);try{return new Qx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.providerId=oc.PROVIDER_ID}static credential(e,n){return nd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Qx.parseLink(n);return ie(s,"argument-error"),nd._fromEmailAndCode(e,s.code,s.tenantId)}}oc.PROVIDER_ID="password";oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends Xx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Kd{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Kd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ha._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return mr.credential(n,s)}catch{return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Kd{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Kd{constructor(){super("twitter.com")}static credential(e,n){return Ha._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return hi.credential(n,s)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y7(t,e){return Yd(t,"POST","/v1/accounts:signUp",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await hs._fromIdTokenResponse(e,s,r),a=w1(s);return new qa({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=w1(s);return new qa({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function w1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm extends Es{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Rm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Rm(e,n,s,r)}}function vP(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Rm._fromErrorAndOperation(t,i,e,s):i})}async function v7(t,e,n=!1){const s=await td(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qa._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b7(t,e,n=!1){const{auth:s}=t;if(Cn(s.app))return Promise.reject(Ar(s));const r="reauthenticate";try{const i=await td(t,vP(s,r,e,t),n);ie(i.idToken,s,"internal-error");const a=Yx(i.idToken);ie(a,s,"internal-error");const{sub:o}=a;return ie(t.uid===o,s,"user-mismatch"),qa._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&es(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(t,e,n=!1){if(Cn(t.app))return Promise.reject(Ar(t));const s="signIn",r=await vP(t,s,e),i=await qa._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function x7(t,e){return bP(sa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(t){const e=sa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w7(t,e,n){if(Cn(t.app))return Promise.reject(Ar(t));const s=sa(t),a=await P0(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y7).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xP(t),l}),o=await qa._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(o.user),o}function _7(t,e,n){return Cn(t.app)?Promise.reject(Ar(t)):x7(Xe(t),oc.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&xP(t),s})}function T7(t,e,n,s){return Xe(t).onIdTokenChanged(e,n,s)}function E7(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function S7(t,e,n,s){return Xe(t).onAuthStateChanged(e,n,s)}function A7(t){return Xe(t).signOut()}const Nm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nm,"1"),this.storage.removeItem(Nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=1e3,R7=10;class _P extends wP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);Gz()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,R7):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},C7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_P.type="LOCAL";const N7=_P;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP extends wP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TP.type="SESSION";const EP=TP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Op(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const o=Array.from(a).map(async u=>u(n.origin,i)),l=await I7(o);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Op.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const u=Zx("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return window}function P7(t){Ls().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(){return typeof Ls().WorkerGlobalScope<"u"&&typeof Ls().importScripts=="function"}async function j7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function M7(){return SP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="firebaseLocalStorageDb",O7=1,Im="firebaseLocalStorage",CP="fbase_key";class Wd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vp(t,e){return t.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function V7(){const t=indexedDB.deleteDatabase(AP);return new Wd(t).toPromise()}function j0(){const t=indexedDB.open(AP,O7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Im,{keyPath:CP})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Im)?e(s):(s.close(),await V7(),e(await j0()))})})}async function _1(t,e,n){const s=Vp(t,!0).put({[CP]:e,value:n});return new Wd(s).toPromise()}async function L7(t,e){const n=Vp(t,!1).get(e),s=await new Wd(n).toPromise();return s===void 0?null:s.value}function T1(t,e){const n=Vp(t,!0).delete(e);return new Wd(n).toPromise()}const U7=800,F7=3;class RP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await j0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>F7)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Op._getInstance(M7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await j7(),!this.activeServiceWorker)return;this.sender=new D7(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await j0();return await _1(e,Nm,"1"),await T1(e,Nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_1(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>L7(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>T1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Vp(r,!1).getAll();return new Wd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RP.type="LOCAL";const B7=RP;new $d(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t,e){return e?wr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx extends Wx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ol(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ol(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function z7(t){return bP(t.auth,new Jx(t),t.bypassAuthState)}function H7(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),b7(n,new Jx(t),t.bypassAuthState)}async function q7(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),v7(n,new Jx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z7;case"linkViaPopup":case"linkViaRedirect":return q7;case"reauthViaPopup":case"reauthViaRedirect":return H7;default:es(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7=new $d(2e3,1e4);async function $7(t,e,n){if(Cn(t.app))return Promise.reject(ps(t,"operation-not-supported-in-this-environment"));const s=sa(t);Sz(t,e,Xx);const r=NP(s,n);return new xa(s,"signInViaPopup",e,r).executeNotNull()}class xa extends IP{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,xa.currentPopupAction&&xa.currentPopupAction.cancel(),xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Zx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G7.get())};e()}}xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7="pendingRedirect",Rf=new Map;class K7 extends IP{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Rf.get(this.auth._key());if(!e){try{const s=await W7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Rf.set(this.auth._key(),e)}return this.bypassAuthState||Rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function W7(t,e){const n=Z7(e),s=X7(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Q7(t,e){Rf.set(t._key(),e)}function X7(t){return wr(t._redirectPersistence)}function Z7(t){return Cf(Y7,t.config.apiKey,t.name)}async function J7(t,e,n=!1){if(Cn(t.app))return Promise.reject(Ar(t));const s=sa(t),r=NP(s,e),a=await new K7(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=10*60*1e3;class tH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!DP(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ps(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eH&&this.cachedEventUids.clear(),this.cachedEventUids.has(E1(e))}saveEventToCache(e){this.cachedEventUids.add(E1(e)),this.lastProcessedEventTime=Date.now()}}function E1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sH(t,e={}){return na(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iH=/^https?/;async function aH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sH(t);for(const n of e)try{if(oH(n))return}catch{}es(t,"unauthorized-domain")}function oH(t){const e=I0(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!iH.test(n))return!1;if(rH.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH=new $d(3e4,6e4);function S1(){const t=Ls().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cH(t){return new Promise((e,n)=>{var s,r,i;function a(){S1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S1(),n(ps(t,"network-request-failed"))},timeout:lH.get()})}if(!((r=(s=Ls().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=Ls().gapi)===null||i===void 0)&&i.load)a();else{const o=e7("iframefcb");return Ls()[o]=()=>{gapi.load?a():n(ps(t,"network-request-failed"))},pP(`${Jz()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Nf=null,e})}let Nf=null;function uH(t){return Nf=Nf||cH(t),Nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH=new $d(5e3,15e3),hH="__/auth/iframe",fH="emulator/auth/iframe",mH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gH(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$x(e,fH):`https://${t.config.authDomain}/${hH}`,s={apiKey:e.apiKey,appName:t.name,v:ac},r=pH.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${qd(s).slice(1)}`}async function yH(t){const e=await uH(t),n=Ls().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:gH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mH,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=ps(t,"network-request-failed"),o=Ls().setTimeout(()=>{i(a)},dH.get());function l(){Ls().clearTimeout(o),r(s)}s.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bH=500,xH=600,wH="_blank",_H="http://localhost";class A1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TH(t,e,n,s=bH,r=xH){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let o="";const l=Object.assign(Object.assign({},vH),{width:s.toString(),height:r.toString(),top:i,left:a}),u=en().toLowerCase();n&&(o=lP(u)?wH:n),aP(u)&&(e=e||_H,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[p,E])=>`${m}${p}=${E},`,"");if(qz(u)&&o!=="_self")return EH(e||"",o),new A1(null);const f=window.open(e||"",o,h);ie(f,t,"popup-blocked");try{f.focus()}catch{}return new A1(f)}function EH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH="__/auth/handler",AH="emulator/auth/handler",CH=encodeURIComponent("fac");async function C1(t,e,n,s,r,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ac,eventId:r};if(e instanceof Xx){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",iB(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof Kd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),u=l?`#${CH}=${encodeURIComponent(l)}`:"";return`${RH(t)}?${qd(o).slice(1)}${u}`}function RH({config:t}){return t.emulator?$x(t,AH):`https://${t.authDomain}/${SH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="webStorageSupport";class NH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EP,this._completeRedirectFn=J7,this._overrideRedirectResult=Q7}async _openPopup(e,n,s,r){var i;Mr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await C1(e,n,s,I0(),r);return TH(e,a,Zx())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await C1(e,n,s,I0(),r);return P7(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Mr(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await yH(e),s=new tH(e);return n.register("authEvent",r=>(ie(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hy,{type:Hy},r=>{var i;const a=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Hy];a!==void 0&&n(!!a),es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fP()||oP()||Kx()}}const IH=NH;var R1="@firebase/auth",N1="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jH(t){Gs(new vs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=s.options;ie(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mP(t)},u=new Qz(s,r,i,l);return a7(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Gs(new vs("auth-internal",e=>{const n=sa(e.getProvider("auth").getImmediate());return(s=>new DH(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(R1,N1,PH(t)),Qn(R1,N1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=5*60,MH=HD("authIdTokenMaxAge")||kH;let I1=null;const OH=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>MH)return;const r=n==null?void 0:n.token;I1!==r&&(I1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function VH(t=Hx()){const e=ro(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i7(t,{popupRedirectResolver:IH,persistence:[B7,N7,EP]}),s=HD("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const a=OH(i.toString());E7(n,a,()=>a(n.currentUser)),T7(n,o=>a(o))}}const r=BD("auth");return r&&o7(n,`http://${r}`),n}function LH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Xz({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=ps("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",LH().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jH("Browser");var D1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oi,PP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function N(){}N.prototype=S.prototype,A.D=S.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(R,j,k){for(var I=Array(arguments.length-2),H=2;H<arguments.length;H++)I[H-2]=arguments[H];return S.prototype[j].apply(R,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,S,N){N||(N=0);var R=Array(16);if(typeof S=="string")for(var j=0;16>j;++j)R[j]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(j=0;16>j;++j)R[j]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=A.g[0],N=A.g[1],j=A.g[2];var k=A.g[3],I=S+(k^N&(j^k))+R[0]+3614090360&4294967295;S=N+(I<<7&4294967295|I>>>25),I=k+(j^S&(N^j))+R[1]+3905402710&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(N^k&(S^N))+R[2]+606105819&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(S^j&(k^S))+R[3]+3250441966&4294967295,N=j+(I<<22&4294967295|I>>>10),I=S+(k^N&(j^k))+R[4]+4118548399&4294967295,S=N+(I<<7&4294967295|I>>>25),I=k+(j^S&(N^j))+R[5]+1200080426&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(N^k&(S^N))+R[6]+2821735955&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(S^j&(k^S))+R[7]+4249261313&4294967295,N=j+(I<<22&4294967295|I>>>10),I=S+(k^N&(j^k))+R[8]+1770035416&4294967295,S=N+(I<<7&4294967295|I>>>25),I=k+(j^S&(N^j))+R[9]+2336552879&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(N^k&(S^N))+R[10]+4294925233&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(S^j&(k^S))+R[11]+2304563134&4294967295,N=j+(I<<22&4294967295|I>>>10),I=S+(k^N&(j^k))+R[12]+1804603682&4294967295,S=N+(I<<7&4294967295|I>>>25),I=k+(j^S&(N^j))+R[13]+4254626195&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(N^k&(S^N))+R[14]+2792965006&4294967295,j=k+(I<<17&4294967295|I>>>15),I=N+(S^j&(k^S))+R[15]+1236535329&4294967295,N=j+(I<<22&4294967295|I>>>10),I=S+(j^k&(N^j))+R[1]+4129170786&4294967295,S=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(S^N))+R[6]+3225465664&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^N&(k^S))+R[11]+643717713&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^S&(j^k))+R[0]+3921069994&4294967295,N=j+(I<<20&4294967295|I>>>12),I=S+(j^k&(N^j))+R[5]+3593408605&4294967295,S=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(S^N))+R[10]+38016083&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^N&(k^S))+R[15]+3634488961&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^S&(j^k))+R[4]+3889429448&4294967295,N=j+(I<<20&4294967295|I>>>12),I=S+(j^k&(N^j))+R[9]+568446438&4294967295,S=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(S^N))+R[14]+3275163606&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^N&(k^S))+R[3]+4107603335&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^S&(j^k))+R[8]+1163531501&4294967295,N=j+(I<<20&4294967295|I>>>12),I=S+(j^k&(N^j))+R[13]+2850285829&4294967295,S=N+(I<<5&4294967295|I>>>27),I=k+(N^j&(S^N))+R[2]+4243563512&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^N&(k^S))+R[7]+1735328473&4294967295,j=k+(I<<14&4294967295|I>>>18),I=N+(k^S&(j^k))+R[12]+2368359562&4294967295,N=j+(I<<20&4294967295|I>>>12),I=S+(N^j^k)+R[5]+4294588738&4294967295,S=N+(I<<4&4294967295|I>>>28),I=k+(S^N^j)+R[8]+2272392833&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^N)+R[11]+1839030562&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^S)+R[14]+4259657740&4294967295,N=j+(I<<23&4294967295|I>>>9),I=S+(N^j^k)+R[1]+2763975236&4294967295,S=N+(I<<4&4294967295|I>>>28),I=k+(S^N^j)+R[4]+1272893353&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^N)+R[7]+4139469664&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^S)+R[10]+3200236656&4294967295,N=j+(I<<23&4294967295|I>>>9),I=S+(N^j^k)+R[13]+681279174&4294967295,S=N+(I<<4&4294967295|I>>>28),I=k+(S^N^j)+R[0]+3936430074&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^N)+R[3]+3572445317&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^S)+R[6]+76029189&4294967295,N=j+(I<<23&4294967295|I>>>9),I=S+(N^j^k)+R[9]+3654602809&4294967295,S=N+(I<<4&4294967295|I>>>28),I=k+(S^N^j)+R[12]+3873151461&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^N)+R[15]+530742520&4294967295,j=k+(I<<16&4294967295|I>>>16),I=N+(j^k^S)+R[2]+3299628645&4294967295,N=j+(I<<23&4294967295|I>>>9),I=S+(j^(N|~k))+R[0]+4096336452&4294967295,S=N+(I<<6&4294967295|I>>>26),I=k+(N^(S|~j))+R[7]+1126891415&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~N))+R[14]+2878612391&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~S))+R[5]+4237533241&4294967295,N=j+(I<<21&4294967295|I>>>11),I=S+(j^(N|~k))+R[12]+1700485571&4294967295,S=N+(I<<6&4294967295|I>>>26),I=k+(N^(S|~j))+R[3]+2399980690&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~N))+R[10]+4293915773&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~S))+R[1]+2240044497&4294967295,N=j+(I<<21&4294967295|I>>>11),I=S+(j^(N|~k))+R[8]+1873313359&4294967295,S=N+(I<<6&4294967295|I>>>26),I=k+(N^(S|~j))+R[15]+4264355552&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~N))+R[6]+2734768916&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~S))+R[13]+1309151649&4294967295,N=j+(I<<21&4294967295|I>>>11),I=S+(j^(N|~k))+R[4]+4149444226&4294967295,S=N+(I<<6&4294967295|I>>>26),I=k+(N^(S|~j))+R[11]+3174756917&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~N))+R[2]+718787259&4294967295,j=k+(I<<15&4294967295|I>>>17),I=N+(k^(j|~S))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+k&4294967295}s.prototype.u=function(A,S){S===void 0&&(S=A.length);for(var N=S-this.blockSize,R=this.B,j=this.h,k=0;k<S;){if(j==0)for(;k<=N;)r(this,A,k),k+=this.blockSize;if(typeof A=="string"){for(;k<S;)if(R[j++]=A.charCodeAt(k++),j==this.blockSize){r(this,R),j=0;break}}else for(;k<S;)if(R[j++]=A[k++],j==this.blockSize){r(this,R),j=0;break}}this.h=j,this.o+=S},s.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;var N=8*this.o;for(S=A.length-8;S<A.length;++S)A[S]=N&255,N/=256;for(this.u(A),A=Array(16),S=N=0;4>S;++S)for(var R=0;32>R;R+=8)A[N++]=this.g[S]>>>R&255;return A};function i(A,S){var N=o;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=S(A)}function a(A,S){this.h=S;for(var N=[],R=!0,j=A.length-1;0<=j;j--){var k=A[j]|0;R&&k==S||(N[j]=k,R=!1)}this.g=N}var o={};function l(A){return-128<=A&&128>A?i(A,function(S){return new a([S|0],0>S?-1:0)}):new a([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return x(u(-A));for(var S=[],N=1,R=0;A>=N;R++)S[R]=A/N|0,N*=4294967296;return new a(S,0)}function h(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return x(h(A.substring(1),S));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(S,8)),R=f,j=0;j<A.length;j+=8){var k=Math.min(8,A.length-j),I=parseInt(A.substring(j,j+k),S);8>k?(k=u(Math.pow(S,k)),R=R.j(k).add(u(I))):(R=R.j(N),R=R.add(u(I)))}return R}var f=l(0),m=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(w(this))return-x(this).m();for(var A=0,S=1,N=0;N<this.g.length;N++){var R=this.i(N);A+=(0<=R?R:4294967296+R)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(E(this))return"0";if(w(this))return"-"+x(this).toString(A);for(var S=u(Math.pow(A,6)),N=this,R="";;){var j=C(N,S).g;N=v(N,j.j(S));var k=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=j,E(N))return k+R;for(;6>k.length;)k="0"+k;R=k+R}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function E(A){if(A.h!=0)return!1;for(var S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=v(this,A),w(A)?-1:E(A)?0:1};function x(A){for(var S=A.g.length,N=[],R=0;R<S;R++)N[R]=~A.g[R];return new a(N,~A.h).add(m)}t.abs=function(){return w(this)?x(this):this},t.add=function(A){for(var S=Math.max(this.g.length,A.g.length),N=[],R=0,j=0;j<=S;j++){var k=R+(this.i(j)&65535)+(A.i(j)&65535),I=(k>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);R=I>>>16,k&=65535,I&=65535,N[j]=I<<16|k}return new a(N,N[N.length-1]&-2147483648?-1:0)};function v(A,S){return A.add(x(S))}t.j=function(A){if(E(this)||E(A))return f;if(w(this))return w(A)?x(this).j(x(A)):x(x(this).j(A));if(w(A))return x(this.j(x(A)));if(0>this.l(p)&&0>A.l(p))return u(this.m()*A.m());for(var S=this.g.length+A.g.length,N=[],R=0;R<2*S;R++)N[R]=0;for(R=0;R<this.g.length;R++)for(var j=0;j<A.g.length;j++){var k=this.i(R)>>>16,I=this.i(R)&65535,H=A.i(j)>>>16,$=A.i(j)&65535;N[2*R+2*j]+=I*$,b(N,2*R+2*j),N[2*R+2*j+1]+=k*$,b(N,2*R+2*j+1),N[2*R+2*j+1]+=I*H,b(N,2*R+2*j+1),N[2*R+2*j+2]+=k*H,b(N,2*R+2*j+2)}for(R=0;R<S;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=S;R<2*S;R++)N[R]=0;return new a(N,0)};function b(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function _(A,S){this.g=A,this.h=S}function C(A,S){if(E(S))throw Error("division by zero");if(E(A))return new _(f,f);if(w(A))return S=C(x(A),S),new _(x(S.g),x(S.h));if(w(S))return S=C(A,x(S)),new _(x(S.g),S.h);if(30<A.g.length){if(w(A)||w(S))throw Error("slowDivide_ only works with positive integers.");for(var N=m,R=S;0>=R.l(A);)N=P(N),R=P(R);var j=M(N,1),k=M(R,1);for(R=M(R,2),N=M(N,2);!E(R);){var I=k.add(R);0>=I.l(A)&&(j=j.add(N),k=I),R=M(R,1),N=M(N,1)}return S=v(A,j.j(S)),new _(j,S)}for(j=f;0<=A.l(S);){for(N=Math.max(1,Math.floor(A.m()/S.m())),R=Math.ceil(Math.log(N)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),k=u(N),I=k.j(S);w(I)||0<I.l(A);)N-=R,k=u(N),I=k.j(S);E(k)&&(k=m),j=j.add(k),A=v(A,I)}return new _(j,A)}t.A=function(A){return C(this,A).h},t.and=function(A){for(var S=Math.max(this.g.length,A.g.length),N=[],R=0;R<S;R++)N[R]=this.i(R)&A.i(R);return new a(N,this.h&A.h)},t.or=function(A){for(var S=Math.max(this.g.length,A.g.length),N=[],R=0;R<S;R++)N[R]=this.i(R)|A.i(R);return new a(N,this.h|A.h)},t.xor=function(A){for(var S=Math.max(this.g.length,A.g.length),N=[],R=0;R<S;R++)N[R]=this.i(R)^A.i(R);return new a(N,this.h^A.h)};function P(A){for(var S=A.g.length+1,N=[],R=0;R<S;R++)N[R]=A.i(R)<<1|A.i(R-1)>>>31;return new a(N,A.h)}function M(A,S){var N=S>>5;S%=32;for(var R=A.g.length-N,j=[],k=0;k<R;k++)j[k]=0<S?A.i(k+N)>>>S|A.i(k+N+1)<<32-S:A.i(k+N);return new a(j,A.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,PP=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Oi=a}).apply(typeof D1<"u"?D1:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jP,Jc,kP,If,k0,MP,OP,VP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,T){return d==Array.prototype||d==Object.prototype||(d[g]=T.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var g=0;g<d.length;++g){var T=d[g];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=n(this);function r(d,g){if(g)e:{var T=s;d=d.split(".");for(var D=0;D<d.length-1;D++){var O=d[D];if(!(O in T))break e;T=T[O]}d=d[d.length-1],D=T[d],g=g(D),g!=D&&g!=null&&e(T,d,{configurable:!0,writable:!0,value:g})}}function i(d,g){d instanceof String&&(d+="");var T=0,D=!1,O={next:function(){if(!D&&T<d.length){var V=T++;return{value:g(V,d[V]),done:!1}}return D=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(d){return d||function(){return i(this,function(g,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,T){return d.call.apply(d.bind,arguments)}function f(d,g,T){if(!d)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,D),d.apply(g,O)}}return function(){return d.apply(g,arguments)}}function m(d,g,T){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function p(d,g){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function E(d,g){function T(){}T.prototype=g.prototype,d.aa=g.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(D,O,V){for(var Y=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Y[Ue-2]=arguments[Ue];return g.prototype[O].apply(D,Y)}}function w(d){const g=d.length;if(0<g){const T=Array(g);for(let D=0;D<g;D++)T[D]=d[D];return T}return[]}function x(d,g){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(l(D)){const O=d.length||0,V=D.length||0;d.length=O+V;for(let Y=0;Y<V;Y++)d[O+Y]=D[Y]}else d.push(D)}}class v{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(d){return/^[\s\xa0]*$/.test(d)}function _(){var d=o.navigator;return d&&(d=d.userAgent)?d:""}function C(d){return C[" "](d),d}C[" "]=function(){};var P=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function M(d,g,T){for(const D in d)g.call(T,d[D],D,d)}function A(d,g){for(const T in d)g.call(void 0,d[T],T,d)}function S(d){const g={};for(const T in d)g[T]=d[T];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,g){let T,D;for(let O=1;O<arguments.length;O++){D=arguments[O];for(T in D)d[T]=D[T];for(let V=0;V<N.length;V++)T=N[V],Object.prototype.hasOwnProperty.call(D,T)&&(d[T]=D[T])}}function j(d){var g=1;d=d.split(":");const T=[];for(;0<g&&d.length;)T.push(d.shift()),g--;return d.length&&T.push(d.join(":")),T}function k(d){o.setTimeout(()=>{throw d},0)}function I(){var d=X;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class H{constructor(){this.h=this.g=null}add(g,T){const D=$.get();D.set(g,T),this.h?this.h.next=D:this.g=D,this.h=D}}var $=new v(()=>new L,d=>d.reset());class L{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let G,q=!1,X=new H,Q=()=>{const d=o.Promise.resolve(void 0);G=()=>{d.then(le)}};var le=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(T){k(T)}var g=$;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}q=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var je=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};o.addEventListener("test",T,g),o.removeEventListener("test",T,g)}catch{}return d}();function vt(d,g){if(Z.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(P){e:{try{C(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else T=="mouseover"?g=d.fromElement:T=="mouseout"&&(g=d.toElement);this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:sr[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&vt.aa.h.call(this)}}E(vt,Z);var sr={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ln="closure_listenable_"+(1e6*Math.random()|0),oo=0;function Ze(d,g,T,D,O){this.listener=d,this.proxy=null,this.src=g,this.type=T,this.capture=!!D,this.ha=O,this.key=++oo,this.da=this.fa=!1}function Un(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ss(d){this.src=d,this.g={},this.h=0}ss.prototype.add=function(d,g,T,D,O){var V=d.toString();d=this.g[V],d||(d=this.g[V]=[],this.h++);var Y=rr(d,g,D,O);return-1<Y?(g=d[Y],T||(g.fa=!1)):(g=new Ze(g,this.src,V,!!D,O),g.fa=T,d.push(g)),g};function lo(d,g){var T=g.type;if(T in d.g){var D=d.g[T],O=Array.prototype.indexOf.call(D,g,void 0),V;(V=0<=O)&&Array.prototype.splice.call(D,O,1),V&&(Un(g),d.g[T].length==0&&(delete d.g[T],d.h--))}}function rr(d,g,T,D){for(var O=0;O<d.length;++O){var V=d[O];if(!V.da&&V.listener==g&&V.capture==!!T&&V.ha==D)return O}return-1}var co="closure_lm_"+(1e6*Math.random()|0),_c={};function fh(d,g,T,D,O){if(Array.isArray(g)){for(var V=0;V<g.length;V++)fh(d,g[V],T,D,O);return null}return T=sT(T),d&&d[Ln]?d.K(g,T,u(D)?!!D.capture:!1,O):Cg(d,g,T,!1,D,O)}function Cg(d,g,T,D,O,V){if(!g)throw Error("Invalid event type");var Y=u(O)?!!O.capture:!!O,Ue=Ig(d);if(Ue||(d[co]=Ue=new ss(d)),T=Ue.add(g,T,D,Y,V),T.proxy)return T;if(D=Rg(),T.proxy=D,D.src=d,D.listener=T,d.addEventListener)je||(O=Y),O===void 0&&(O=!1),d.addEventListener(g.toString(),D,O);else if(d.attachEvent)d.attachEvent(nT(g.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Rg(){function d(T){return g.call(d.src,d.listener,T)}const g=JV;return d}function la(d,g,T,D,O){if(Array.isArray(g))for(var V=0;V<g.length;V++)la(d,g[V],T,D,O);else D=u(D)?!!D.capture:!!D,T=sT(T),d&&d[Ln]?(d=d.i,g=String(g).toString(),g in d.g&&(V=d.g[g],T=rr(V,T,D,O),-1<T&&(Un(V[T]),Array.prototype.splice.call(V,T,1),V.length==0&&(delete d.g[g],d.h--)))):d&&(d=Ig(d))&&(g=d.g[g.toString()],d=-1,g&&(d=rr(g,T,D,O)),(T=-1<d?g[d]:null)&&Ng(T))}function Ng(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ln])lo(g.i,d);else{var T=d.type,D=d.proxy;g.removeEventListener?g.removeEventListener(T,D,d.capture):g.detachEvent?g.detachEvent(nT(T),D):g.addListener&&g.removeListener&&g.removeListener(D),(T=Ig(g))?(lo(T,d),T.h==0&&(T.src=null,g[co]=null)):Un(d)}}}function nT(d){return d in _c?_c[d]:_c[d]="on"+d}function JV(d,g){if(d.da)d=!0;else{g=new vt(g,this);var T=d.listener,D=d.ha||d.src;d.fa&&Ng(d),d=T.call(D,g)}return d}function Ig(d){return d=d[co],d instanceof ss?d:null}var Dg="__closure_events_fn_"+(1e9*Math.random()>>>0);function sT(d){return typeof d=="function"?d:(d[Dg]||(d[Dg]=function(g){return d.handleEvent(g)}),d[Dg])}function zt(){ue.call(this),this.i=new ss(this),this.M=this,this.F=null}E(zt,ue),zt.prototype[Ln]=!0,zt.prototype.removeEventListener=function(d,g,T,D){la(this,d,g,T,D)};function tn(d,g){var T,D=d.F;if(D)for(T=[];D;D=D.F)T.push(D);if(d=d.M,D=g.type||g,typeof g=="string")g=new Z(g,d);else if(g instanceof Z)g.target=g.target||d;else{var O=g;g=new Z(D,d),R(g,O)}if(O=!0,T)for(var V=T.length-1;0<=V;V--){var Y=g.g=T[V];O=mh(Y,D,!0,g)&&O}if(Y=g.g=d,O=mh(Y,D,!0,g)&&O,O=mh(Y,D,!1,g)&&O,T)for(V=0;V<T.length;V++)Y=g.g=T[V],O=mh(Y,D,!1,g)&&O}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var T=d.g[g],D=0;D<T.length;D++)Un(T[D]);delete d.g[g],d.h--}}this.F=null},zt.prototype.K=function(d,g,T,D){return this.i.add(String(d),g,!1,T,D)},zt.prototype.L=function(d,g,T,D){return this.i.add(String(d),g,!0,T,D)};function mh(d,g,T,D){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,V=0;V<g.length;++V){var Y=g[V];if(Y&&!Y.da&&Y.capture==T){var Ue=Y.listener,Pt=Y.ha||Y.src;Y.fa&&lo(d.i,Y),O=Ue.call(Pt,D)!==!1&&O}}return O&&!D.defaultPrevented}function rT(d,g,T){if(typeof d=="function")T&&(d=m(d,T));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(d,g||0)}function iT(d){d.g=rT(()=>{d.g=null,d.i&&(d.i=!1,iT(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class e5 extends ue{constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:iT(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tc(d){ue.call(this),this.h=d,this.g={}}E(Tc,ue);var aT=[];function oT(d){M(d.g,function(g,T){this.g.hasOwnProperty(T)&&Ng(g)},d),d.g={}}Tc.prototype.N=function(){Tc.aa.N.call(this),oT(this)},Tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pg=o.JSON.stringify,t5=o.JSON.parse,n5=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function jg(){}jg.prototype.h=null;function lT(d){return d.h||(d.h=d.i())}function cT(){}var Ec={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kg(){Z.call(this,"d")}E(kg,Z);function Mg(){Z.call(this,"c")}E(Mg,Z);var ca={},uT=null;function ph(){return uT=uT||new zt}ca.La="serverreachability";function dT(d){Z.call(this,ca.La,d)}E(dT,Z);function Sc(d){const g=ph();tn(g,new dT(g))}ca.STAT_EVENT="statevent";function hT(d,g){Z.call(this,ca.STAT_EVENT,d),this.stat=g}E(hT,Z);function nn(d){const g=ph();tn(g,new hT(g,d))}ca.Ma="timingevent";function fT(d,g){Z.call(this,ca.Ma,d),this.size=g}E(fT,Z);function Ac(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function Cc(){this.g=!0}Cc.prototype.xa=function(){this.g=!1};function s5(d,g,T,D,O,V){d.info(function(){if(d.g)if(V)for(var Y="",Ue=V.split("&"),Pt=0;Pt<Ue.length;Pt++){var Re=Ue[Pt].split("=");if(1<Re.length){var Ht=Re[0];Re=Re[1];var qt=Ht.split("_");Y=2<=qt.length&&qt[1]=="type"?Y+(Ht+"="+Re+"&"):Y+(Ht+"=redacted&")}}else Y=null;else Y=V;return"XMLHTTP REQ ("+D+") [attempt "+O+"]: "+g+`
`+T+`
`+Y})}function r5(d,g,T,D,O,V,Y){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+O+"]: "+g+`
`+T+`
`+V+" "+Y})}function uo(d,g,T,D){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+a5(d,T)+(D?" "+D:"")})}function i5(d,g){d.info(function(){return"TIMEOUT: "+g})}Cc.prototype.info=function(){};function a5(d,g){if(!d.g)return g;if(!g)return null;try{var T=JSON.parse(g);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var D=T[d];if(!(2>D.length)){var O=D[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var Y=1;Y<O.length;Y++)O[Y]=""}}}}return Pg(T)}catch{return g}}var gh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Og;function yh(){}E(yh,jg),yh.prototype.g=function(){return new XMLHttpRequest},yh.prototype.i=function(){return{}},Og=new yh;function qr(d,g,T,D){this.j=d,this.i=g,this.l=T,this.R=D||1,this.U=new Tc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pT}function pT(){this.i=null,this.g="",this.h=!1}var gT={},Vg={};function Lg(d,g,T){d.L=1,d.v=wh(ir(g)),d.m=T,d.P=!0,yT(d,null)}function yT(d,g){d.F=Date.now(),vh(d),d.A=ir(d.v);var T=d.A,D=d.R;Array.isArray(D)||(D=[String(D)]),DT(T.i,"t",D),d.C=0,T=d.j.J,d.h=new pT,d.g=WT(d.j,T?g:null,!d.m),0<d.O&&(d.M=new e5(m(d.Y,d,d.g),d.O)),g=d.U,T=d.g,D=d.ca;var O="readystatechange";Array.isArray(O)||(O&&(aT[0]=O.toString()),O=aT);for(var V=0;V<O.length;V++){var Y=fh(T,O[V],D||g.handleEvent,!1,g.h||g);if(!Y)break;g.g[Y.key]=Y}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Sc(),s5(d.i,d.u,d.A,d.l,d.R,d.m)}qr.prototype.ca=function(d){d=d.target;const g=this.M;g&&ar(d)==3?g.j():this.Y(d)},qr.prototype.Y=function(d){try{if(d==this.g)e:{const qt=ar(this.g);var g=this.g.Ba();const mo=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||LT(this.g)))){this.J||qt!=4||g==7||(g==8||0>=mo?Sc(3):Sc(2)),Ug(this);var T=this.g.Z();this.X=T;t:if(vT(this)){var D=LT(this.g);d="";var O=D.length,V=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),Rc(this);var Y="";break t}this.h.i=new o.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,d+=this.h.i.decode(D[g],{stream:!(V&&g==O-1)});D.length=0,this.h.g+=d,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=T==200,r5(this.i,this.u,this.A,this.l,this.R,qt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Pt=this.g;if((Ue=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ue)){var Re=Ue;break t}}Re=null}if(T=Re)uo(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fg(this,T);else{this.o=!1,this.s=3,nn(12),ua(this),Rc(this);break e}}if(this.P){T=!0;let rs;for(;!this.J&&this.C<Y.length;)if(rs=o5(this,Y),rs==Vg){qt==4&&(this.s=4,nn(14),T=!1),uo(this.i,this.l,null,"[Incomplete Response]");break}else if(rs==gT){this.s=4,nn(15),uo(this.i,this.l,Y,"[Invalid Chunk]"),T=!1;break}else uo(this.i,this.l,rs,null),Fg(this,rs);if(vT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||Y.length!=0||this.h.h||(this.s=1,nn(16),T=!1),this.o=this.o&&T,!T)uo(this.i,this.l,Y,"[Invalid Chunked Response]"),ua(this),Rc(this);else if(0<Y.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),$g(Ht),Ht.M=!0,nn(11))}}else uo(this.i,this.l,Y,null),Fg(this,Y);qt==4&&ua(this),this.o&&!this.J&&(qt==4?GT(this.j,this):(this.o=!1,vh(this)))}else E5(this.g),T==400&&0<Y.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),ua(this),Rc(this)}}}catch{}finally{}};function vT(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function o5(d,g){var T=d.C,D=g.indexOf(`
`,T);return D==-1?Vg:(T=Number(g.substring(T,D)),isNaN(T)?gT:(D+=1,D+T>g.length?Vg:(g=g.slice(D,D+T),d.C=D+T,g)))}qr.prototype.cancel=function(){this.J=!0,ua(this)};function vh(d){d.S=Date.now()+d.I,bT(d,d.I)}function bT(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ac(m(d.ba,d),g)}function Ug(d){d.B&&(o.clearTimeout(d.B),d.B=null)}qr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(i5(this.i,this.A),this.L!=2&&(Sc(),nn(17)),ua(this),this.s=2,Rc(this)):bT(this,this.S-d)};function Rc(d){d.j.G==0||d.J||GT(d.j,d)}function ua(d){Ug(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,oT(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Fg(d,g){try{var T=d.j;if(T.G!=0&&(T.g==d||Bg(T.h,d))){if(!d.K&&Bg(T.h,d)&&T.G==3){try{var D=T.Da.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var O=D;if(O[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)Ch(T),Sh(T);else break e;Gg(T),nn(18)}}else T.za=O[1],0<T.za-T.T&&37500>O[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ac(m(T.Za,T),6e3));if(1>=_T(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ha(T,11)}else if((d.K||T.g==d)&&Ch(T),!b(g))for(O=T.Da.g.parse(g),g=0;g<O.length;g++){let Re=O[g];if(T.T=Re[0],Re=Re[1],T.G==2)if(Re[0]=="c"){T.K=Re[1],T.ia=Re[2];const Ht=Re[3];Ht!=null&&(T.la=Ht,T.j.info("VER="+T.la));const qt=Re[4];qt!=null&&(T.Aa=qt,T.j.info("SVER="+T.Aa));const mo=Re[5];mo!=null&&typeof mo=="number"&&0<mo&&(D=1.5*mo,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const rs=d.g;if(rs){const Nh=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nh){var V=D.h;V.g||Nh.indexOf("spdy")==-1&&Nh.indexOf("quic")==-1&&Nh.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(zg(V,V.h),V.h=null))}if(D.D){const Yg=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;Yg&&(D.ya=Yg,qe(D.I,D.D,Yg))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var Y=d;if(D.qa=KT(D,D.J?D.ia:null,D.W),Y.K){TT(D.h,Y);var Ue=Y,Pt=D.L;Pt&&(Ue.I=Pt),Ue.B&&(Ug(Ue),vh(Ue)),D.g=Y}else HT(D);0<T.i.length&&Ah(T)}else Re[0]!="stop"&&Re[0]!="close"||ha(T,7);else T.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?ha(T,7):qg(T):Re[0]!="noop"&&T.l&&T.l.ta(Re),T.v=0)}}Sc(4)}catch{}}var l5=class{constructor(d,g){this.g=d,this.map=g}};function xT(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wT(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function _T(d){return d.h?1:d.g?d.g.size:0}function Bg(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function zg(d,g){d.g?d.g.add(g):d.h=g}function TT(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}xT.prototype.cancel=function(){if(this.i=ET(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ET(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const T of d.g.values())g=g.concat(T.D);return g}return w(d.i)}function c5(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],T=d.length,D=0;D<T;D++)g.push(d[D]);return g}g=[],T=0;for(D in d)g[T++]=d[D];return g}function u5(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var T=0;T<d;T++)g.push(T);return g}g=[],T=0;for(const D in d)g[T++]=D;return g}}}function ST(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var T=u5(d),D=c5(d),O=D.length,V=0;V<O;V++)g.call(void 0,D[V],T&&T[V],d)}var AT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d5(d,g){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var D=d[T].indexOf("="),O=null;if(0<=D){var V=d[T].substring(0,D);O=d[T].substring(D+1)}else V=d[T];g(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function da(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof da){this.h=d.h,bh(this,d.j),this.o=d.o,this.g=d.g,xh(this,d.s),this.l=d.l;var g=d.i,T=new Dc;T.i=g.i,g.g&&(T.g=new Map(g.g),T.h=g.h),CT(this,T),this.m=d.m}else d&&(g=String(d).match(AT))?(this.h=!1,bh(this,g[1]||"",!0),this.o=Nc(g[2]||""),this.g=Nc(g[3]||"",!0),xh(this,g[4]),this.l=Nc(g[5]||"",!0),CT(this,g[6]||"",!0),this.m=Nc(g[7]||"")):(this.h=!1,this.i=new Dc(null,this.h))}da.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Ic(g,RT,!0),":");var T=this.g;return(T||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Ic(g,RT,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Ic(T,T.charAt(0)=="/"?m5:f5,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Ic(T,g5)),d.join("")};function ir(d){return new da(d)}function bh(d,g,T){d.j=T?Nc(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function xh(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function CT(d,g,T){g instanceof Dc?(d.i=g,y5(d.i,d.h)):(T||(g=Ic(g,p5)),d.i=new Dc(g,d.h))}function qe(d,g,T){d.i.set(g,T)}function wh(d){return qe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Nc(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ic(d,g,T){return typeof d=="string"?(d=encodeURI(d).replace(g,h5),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function h5(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var RT=/[#\/\?@]/g,f5=/[#\?:]/g,m5=/[#\?]/g,p5=/[#\?@]/g,g5=/#/g;function Dc(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Gr(d){d.g||(d.g=new Map,d.h=0,d.i&&d5(d.i,function(g,T){d.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}t=Dc.prototype,t.add=function(d,g){Gr(this),this.i=null,d=ho(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(g),this.h+=1,this};function NT(d,g){Gr(d),g=ho(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function IT(d,g){return Gr(d),g=ho(d,g),d.g.has(g)}t.forEach=function(d,g){Gr(this),this.g.forEach(function(T,D){T.forEach(function(O){d.call(g,O,D,this)},this)},this)},t.na=function(){Gr(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),T=[];for(let D=0;D<g.length;D++){const O=d[D];for(let V=0;V<O.length;V++)T.push(g[D])}return T},t.V=function(d){Gr(this);let g=[];if(typeof d=="string")IT(this,d)&&(g=g.concat(this.g.get(ho(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)g=g.concat(d[T])}return g},t.set=function(d,g){return Gr(this),this.i=null,d=ho(this,d),IT(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function DT(d,g,T){NT(d,g),0<T.length&&(d.i=null,d.g.set(ho(d,g),w(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var T=0;T<g.length;T++){var D=g[T];const V=encodeURIComponent(String(D)),Y=this.V(D);for(D=0;D<Y.length;D++){var O=V;Y[D]!==""&&(O+="="+encodeURIComponent(String(Y[D]))),d.push(O)}}return this.i=d.join("&")};function ho(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function y5(d,g){g&&!d.j&&(Gr(d),d.i=null,d.g.forEach(function(T,D){var O=D.toLowerCase();D!=O&&(NT(this,D),DT(this,O,T))},d)),d.j=g}function v5(d,g){const T=new Cc;if(o.Image){const D=new Image;D.onload=p($r,T,"TestLoadImage: loaded",!0,g,D),D.onerror=p($r,T,"TestLoadImage: error",!1,g,D),D.onabort=p($r,T,"TestLoadImage: abort",!1,g,D),D.ontimeout=p($r,T,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else g(!1)}function b5(d,g){const T=new Cc,D=new AbortController,O=setTimeout(()=>{D.abort(),$r(T,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:D.signal}).then(V=>{clearTimeout(O),V.ok?$r(T,"TestPingServer: ok",!0,g):$r(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),$r(T,"TestPingServer: error",!1,g)})}function $r(d,g,T,D,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),D(T)}catch{}}function x5(){this.g=new n5}function w5(d,g,T){const D=T||"";try{ST(d,function(O,V){let Y=O;u(O)&&(Y=Pg(O)),g.push(D+V+"="+encodeURIComponent(Y))})}catch(O){throw g.push(D+"type="+encodeURIComponent("_badmap")),O}}function _h(d){this.l=d.Ub||null,this.j=d.eb||!1}E(_h,jg),_h.prototype.g=function(){return new Th(this.l,this.j)},_h.prototype.i=function(d){return function(){return d}}({});function Th(d,g){zt.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Th,zt),t=Th.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,jc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pc(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PT(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function PT(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Pc(this):jc(this),this.readyState==3&&PT(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Pc(this))},t.Qa=function(d){this.g&&(this.response=d,Pc(this))},t.ga=function(){this.g&&Pc(this)};function Pc(d){d.readyState=4,d.l=null,d.j=null,d.v=null,jc(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=g.next();return d.join(`\r
`)};function jc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Th.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function jT(d){let g="";return M(d,function(T,D){g+=D,g+=":",g+=T,g+=`\r
`}),g}function Hg(d,g,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=jT(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):qe(d,g,T))}function st(d){zt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(st,zt);var _5=/^https?$/i,T5=["POST","PUT"];t=st.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Og.g(),this.v=this.o?lT(this.o):lT(Og),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(V){kT(this,V);return}if(d=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var O in D)T.set(O,D[O]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const V of D.keys())T.set(V,D.get(V));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(V=>V.toLowerCase()=="content-type"),O=o.FormData&&d instanceof o.FormData,!(0<=Array.prototype.indexOf.call(T5,g,void 0))||D||O||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Y]of T)this.g.setRequestHeader(V,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{VT(this),this.u=!0,this.g.send(d),this.u=!1}catch(V){kT(this,V)}};function kT(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,MT(d),Eh(d)}function MT(d){d.A||(d.A=!0,tn(d,"complete"),tn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,tn(this,"complete"),tn(this,"abort"),Eh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eh(this,!0)),st.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?OT(this):this.bb())},t.bb=function(){OT(this)};function OT(d){if(d.h&&typeof a<"u"&&(!d.v[1]||ar(d)!=4||d.Z()!=2)){if(d.u&&ar(d)==4)rT(d.Ea,0,d);else if(tn(d,"readystatechange"),ar(d)==4){d.h=!1;try{const Y=d.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var D;if(D=Y===0){var O=String(d.D).match(AT)[1]||null;!O&&o.self&&o.self.location&&(O=o.self.location.protocol.slice(0,-1)),D=!_5.test(O?O.toLowerCase():"")}T=D}if(T)tn(d,"complete"),tn(d,"success");else{d.m=6;try{var V=2<ar(d)?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.Z()+"]",MT(d)}}finally{Eh(d)}}}}function Eh(d,g){if(d.g){VT(d);const T=d.g,D=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||tn(d,"ready");try{T.onreadystatechange=D}catch{}}}function VT(d){d.I&&(o.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ar(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),t5(g)}};function LT(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function E5(d){const g={};d=(d.g&&2<=ar(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(b(d[D]))continue;var T=j(d[D]);const O=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const V=g[O]||[];g[O]=V,V.push(T)}A(g,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kc(d,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||g}function UT(d){this.Aa=0,this.i=[],this.j=new Cc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kc("baseRetryDelayMs",5e3,d),this.cb=kc("retryDelaySeedMs",1e4,d),this.Wa=kc("forwardChannelMaxRetries",2,d),this.wa=kc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new xT(d&&d.concurrentRequestLimit),this.Da=new x5,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=UT.prototype,t.la=8,t.G=1,t.connect=function(d,g,T,D){nn(0),this.W=d,this.H=g||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=KT(this,null,this.W),Ah(this)};function qg(d){if(FT(d),d.G==3){var g=d.U++,T=ir(d.I);if(qe(T,"SID",d.K),qe(T,"RID",g),qe(T,"TYPE","terminate"),Mc(d,T),g=new qr(d,d.j,g),g.L=2,g.v=wh(ir(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!T&&o.Image&&(new Image().src=g.v,T=!0),T||(g.g=WT(g.j,null),g.g.ea(g.v)),g.F=Date.now(),vh(g)}YT(d)}function Sh(d){d.g&&($g(d),d.g.cancel(),d.g=null)}function FT(d){Sh(d),d.u&&(o.clearTimeout(d.u),d.u=null),Ch(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&o.clearTimeout(d.s),d.s=null)}function Ah(d){if(!wT(d.h)&&!d.s){d.s=!0;var g=d.Ga;G||Q(),q||(G(),q=!0),X.add(g,d),d.B=0}}function S5(d,g){return _T(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ac(m(d.Ga,d,g),$T(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const O=new qr(this,this.j,d);let V=this.o;if(this.S&&(V?(V=S(V),R(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,4096<g){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=zT(this,O,g),T=ir(this.I),qe(T,"RID",d),qe(T,"CVER",22),this.D&&qe(T,"X-HTTP-Session-Id",this.D),Mc(this,T),V&&(this.O?g="headers="+encodeURIComponent(String(jT(V)))+"&"+g:this.m&&Hg(T,this.m,V)),zg(this.h,O),this.Ua&&qe(T,"TYPE","init"),this.P?(qe(T,"$req",g),qe(T,"SID","null"),O.T=!0,Lg(O,T,null)):Lg(O,T,g),this.G=2}}else this.G==3&&(d?BT(this,d):this.i.length==0||wT(this.h)||BT(this))};function BT(d,g){var T;g?T=g.l:T=d.U++;const D=ir(d.I);qe(D,"SID",d.K),qe(D,"RID",T),qe(D,"AID",d.T),Mc(d,D),d.m&&d.o&&Hg(D,d.m,d.o),T=new qr(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),g&&(d.i=g.D.concat(d.i)),g=zT(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),zg(d.h,T),Lg(T,D,g)}function Mc(d,g){d.H&&M(d.H,function(T,D){qe(g,D,T)}),d.l&&ST({},function(T,D){qe(g,D,T)})}function zT(d,g,T){T=Math.min(d.i.length,T);var D=d.l?m(d.l.Na,d.l,d):null;e:{var O=d.i;let V=-1;for(;;){const Y=["count="+T];V==-1?0<T?(V=O[0].g,Y.push("ofs="+V)):V=0:Y.push("ofs="+V);let Ue=!0;for(let Pt=0;Pt<T;Pt++){let Re=O[Pt].g;const Ht=O[Pt].map;if(Re-=V,0>Re)V=Math.max(0,O[Pt].g-100),Ue=!1;else try{w5(Ht,Y,"req"+Re+"_")}catch{D&&D(Ht)}}if(Ue){D=Y.join("&");break e}}}return d=d.i.splice(0,T),g.D=d,D}function HT(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;G||Q(),q||(G(),q=!0),X.add(g,d),d.v=0}}function Gg(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ac(m(d.Fa,d),$T(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,qT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ac(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Sh(this),qT(this))};function $g(d){d.A!=null&&(o.clearTimeout(d.A),d.A=null)}function qT(d){d.g=new qr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=ir(d.qa);qe(g,"RID","rpc"),qe(g,"SID",d.K),qe(g,"AID",d.T),qe(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&qe(g,"TO",d.ja),qe(g,"TYPE","xmlhttp"),Mc(d,g),d.m&&d.o&&Hg(g,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=wh(ir(g)),T.m=null,T.P=!0,yT(T,d)}t.Za=function(){this.C!=null&&(this.C=null,Sh(this),Gg(this),nn(19))};function Ch(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function GT(d,g){var T=null;if(d.g==g){Ch(d),$g(d),d.g=null;var D=2}else if(Bg(d.h,g))T=g.D,TT(d.h,g),D=1;else return;if(d.G!=0){if(g.o)if(D==1){T=g.m?g.m.length:0,g=Date.now()-g.F;var O=d.B;D=ph(),tn(D,new fT(D,T)),Ah(d)}else HT(d);else if(O=g.s,O==3||O==0&&0<g.X||!(D==1&&S5(d,g)||D==2&&Gg(d)))switch(T&&0<T.length&&(g=d.h,g.i=g.i.concat(T)),O){case 1:ha(d,5);break;case 4:ha(d,10);break;case 3:ha(d,6);break;default:ha(d,2)}}}function $T(d,g){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*g}function ha(d,g){if(d.j.info("Error code "+g),g==2){var T=m(d.fb,d),D=d.Xa;const O=!D;D=new da(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||bh(D,"https"),wh(D),O?v5(D.toString(),T):b5(D.toString(),T)}else nn(2);d.G=0,d.l&&d.l.sa(g),YT(d),FT(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function YT(d){if(d.G=0,d.ka=[],d.l){const g=ET(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ka,g),x(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function KT(d,g,T){var D=T instanceof da?ir(T):new da(T);if(D.g!="")g&&(D.g=g+"."+D.g),xh(D,D.s);else{var O=o.location;D=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var V=new da(null);D&&bh(V,D),g&&(V.g=g),O&&xh(V,O),T&&(V.l=T),D=V}return T=d.D,g=d.ya,T&&g&&qe(D,T,g),qe(D,"VER",d.la),Mc(d,D),D}function WT(d,g,T){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new st(new _h({eb:T})):new st(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function QT(){}t=QT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Rh(){}Rh.prototype.g=function(d,g){return new wn(d,g)};function wn(d,g){zt.call(this),this.g=new UT(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!b(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new fo(this)}E(wn,zt),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){qg(this.g)},wn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Pg(d),d=T);g.i.push(new l5(g.Ya++,d)),g.G==3&&Ah(g)},wn.prototype.N=function(){this.g.l=null,delete this.j,qg(this.g),delete this.g,wn.aa.N.call(this)};function XT(d){kg.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const T in g){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}E(XT,kg);function ZT(){Mg.call(this),this.status=1}E(ZT,Mg);function fo(d){this.g=d}E(fo,QT),fo.prototype.ua=function(){tn(this.g,"a")},fo.prototype.ta=function(d){tn(this.g,new XT(d))},fo.prototype.sa=function(d){tn(this.g,new ZT)},fo.prototype.ra=function(){tn(this.g,"b")},Rh.prototype.createWebChannel=Rh.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,VP=function(){return new Rh},OP=function(){return ph()},MP=ca,k0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gh.NO_ERROR=0,gh.TIMEOUT=8,gh.HTTP_ERROR=6,If=gh,mT.COMPLETE="complete",kP=mT,cT.EventType=Ec,Ec.OPEN="a",Ec.CLOSE="b",Ec.ERROR="c",Ec.MESSAGE="d",zt.prototype.listen=zt.prototype.K,Jc=cT,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,jP=st}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const P1="@firebase/firestore",j1="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=new kp("@firebase/firestore");function So(){return Ga.logLevel}function W(t,...e){if(Ga.logLevel<=_e.DEBUG){const n=e.map(ew);Ga.debug(`Firestore (${lc}): ${t}`,...n)}}function Or(t,...e){if(Ga.logLevel<=_e.ERROR){const n=e.map(ew);Ga.error(`Firestore (${lc}): ${t}`,...n)}}function jl(t,...e){if(Ga.logLevel<=_e.WARN){const n=e.map(ew);Ga.warn(`Firestore (${lc}): ${t}`,...n)}}function ew(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,LP(t,s,n)}function LP(t,e,n){let s=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Or(s),new Error(s)}function Ce(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||LP(e,r,s)}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wt.UNAUTHENTICATED))}shutdown(){}}class FH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BH{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Us,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Us)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ce(typeof s.accessToken=="string",31837,{l:s}),new UP(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class zH{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HH{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new zH(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const s=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new k1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new k1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=GH(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function ye(t,e){return t<e?-1:t>e?1:0}function M0(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return ye(s,r);{const i=FP(),a=$H(i.encode(M1(t,n)),i.encode(M1(e,n)));return a!==0?a:ye(s,r)}}n+=s>65535?2:1}return ye(t.length,e.length)}function M1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function $H(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ye(t[n],e[n]);return ye(t.length,e.length)}function kl(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=-62135596800,V1=1e6;class pe{static now(){return pe.fromMillis(Date.now())}static fromDate(e){return pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*V1);return new pe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<O1)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V1}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-O1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new pe(0,0))}static max(){return new re(new pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="__name__";class Cs{constructor(e,n,s){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ne(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Cs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cs?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Cs.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return ye(e.length,n.length)}static compareSegments(e,n){const s=Cs.isNumericId(e),r=Cs.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Cs.extractNumericId(e).compare(Cs.extractNumericId(n)):M0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oi.fromString(e.substring(4,e.length-2))}}class Fe extends Cs{construct(e,n,s){return new Fe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const YH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Cs{construct(e,n,s){return new Vt(e,n,s)}static isValidIdentifier(e){return YH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L1}static keyField(){return new Vt([L1])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(s+=o,r++):(i(),r++)}if(i(),a)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Fe.fromString(e))}static fromName(e){return new te(Fe.fromString(e).popFirst(5))}static empty(){return new te(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=-1;function KH(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=re.fromTimestamp(s===1e9?new pe(n+1,0):new pe(n,s));return new Hi(r,te.empty(),e)}function WH(t){return new Hi(t.readTime,t.key,sd)}class Hi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Hi(re.min(),te.empty(),sd)}static max(){return new Hi(re.max(),te.empty(),sd)}}function QH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==XH)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,s)=>{n(e)})}static reject(e){return new B((n,s)=>{s(e)})}static waitFor(e){return new B((n,s)=>{let r=0,i=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++i,a&&i===r&&n()},l=>s(l))}),a=!0,i===r&&n()})}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next(r=>r?B.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new B((s,r)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{a[u]=h,++o,o===i&&s(a)},h=>r(h))}})}static doWhile(e,n){return new B((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function JH(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Lp.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=-1;function Qd(t){return t==null}function Dm(t){return t===0&&1/t==-1/0}function eq(t){return typeof t=="number"&&Number.isInteger(t)&&!Dm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="";function tq(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=U1(e)),e=nq(t.get(n),e);return U1(e)}function nq(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case zP:n+="";break;default:n+=i}}return n}function U1(t){return t+zP+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ra(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Mt.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Mt.RED,this.left=r??Mt.EMPTY,this.right=i??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Mt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Mt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B1(this.data.getIterator())}getIteratorFrom(e){return new B1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class B1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Tt(Vt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qP("Invalid base64 string: "+i):i}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const sq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=sq.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gi(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="server_timestamp",$P="__type__",YP="__previous_value__",KP="__local_write_time__";function nw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[$P])===null||n===void 0?void 0:n.stringValue)===GP}function Up(t){const e=t.mapValue.fields[YP];return nw(e)?Up(e):e}function rd(t){const e=qi(t.mapValue.fields[KP].timestampValue);return new pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e,n,s,r,i,a,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}const Pm="(default)";class id{constructor(e,n){this.projectId=e,this.database=n||Pm}static empty(){return new id("","")}get isDefaultDatabase(){return this.database===Pm}isEqual(e){return e instanceof id&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="__type__",iq="__max__",Zh={mapValue:{}},QP="__vector__",jm="value";function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nw(t)?4:oq(t)?9007199254740991:aq(t)?10:11:ne(28295,{value:t})}function $s(t,e){if(t===e)return!0;const n=$i(t);if(n!==$i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rd(t).isEqual(rd(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=qi(r.timestampValue),o=qi(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Gi(r.bytesValue).isEqual(Gi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return dt(r.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(r.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return dt(r.integerValue)===dt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=dt(r.doubleValue),o=dt(i.doubleValue);return a===o?Dm(a)===Dm(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return kl(t.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},o=i.mapValue.fields||{};if(F1(a)!==F1(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!$s(a[l],o[l])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function ad(t,e){return(t.values||[]).find(n=>$s(n,e))!==void 0}function Ml(t,e){if(t===e)return 0;const n=$i(t),s=$i(e);if(n!==s)return ye(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=dt(i.integerValue||i.doubleValue),l=dt(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return z1(t.timestampValue,e.timestampValue);case 4:return z1(rd(t),rd(e));case 5:return M0(t.stringValue,e.stringValue);case 6:return function(i,a){const o=Gi(i),l=Gi(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const h=ye(o[u],l[u]);if(h!==0)return h}return ye(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=ye(dt(i.latitude),dt(a.latitude));return o!==0?o:ye(dt(i.longitude),dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return H1(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,u,h;const f=i.fields||{},m=a.fields||{},p=(o=f[jm])===null||o===void 0?void 0:o.arrayValue,E=(l=m[jm])===null||l===void 0?void 0:l.arrayValue,w=ye(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:H1(p,E)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Zh.mapValue&&a===Zh.mapValue)return 0;if(i===Zh.mapValue)return 1;if(a===Zh.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=M0(l[f],h[f]);if(m!==0)return m;const p=Ml(o[l[f]],u[h[f]]);if(p!==0)return p}return ye(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{Pe:n})}}function z1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=qi(t),s=qi(e),r=ye(n.seconds,s.seconds);return r!==0?r:ye(n.nanos,s.nanos)}function H1(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Ml(n[r],s[r]);if(i)return i}return ye(n.length,s.length)}function Ol(t){return O0(t)}function O0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=qi(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=O0(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${O0(n.fields[a])}`;return r+"}"}(t.mapValue):ne(61005,{value:t})}function Df(t){switch($i(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Up(t);return e?16+Df(e):16;case 5:return 2*t.stringValue.length;case 6:return Gi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Df(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return ra(s.fields,(i,a)=>{r+=i.length+Df(a)}),r}(t.mapValue);default:throw ne(13486,{value:t})}}function q1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function V0(t){return!!t&&"integerValue"in t}function sw(t){return!!t&&"arrayValue"in t}function G1(t){return!!t&&"nullValue"in t}function $1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pf(t){return!!t&&"mapValue"in t}function aq(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[WP])===null||n===void 0?void 0:n.stringValue)===QP}function wu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ra(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=wu(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(n)}setAll(e){let n=Vt.emptyPath(),s={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=o.popLast()}a?s[o.lastSegment()]=wu(a):r.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Pf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){ra(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new on(wu(this.value))}}function XP(t){const e=[];return ra(t.fields,(n,s)=>{const r=new Vt([n]);if(Pf(s)){const i=XP(s.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,s,r,i,a,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Nt(e,0,re.min(),re.min(),re.min(),on.empty(),0)}static newFoundDocument(e,n,s,r){return new Nt(e,1,n,re.min(),s,r,0)}static newNoDocument(e,n){return new Nt(e,2,n,re.min(),re.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,re.min(),re.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.position=e,this.inclusive=n}}function Y1(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?s=te.comparator(te.fromName(a.referenceValue),n.key):s=Ml(a,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function K1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$s(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n="asc"){this.field=e,this.dir=n}}function lq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{}class mt extends ZP{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new uq(e,n,s):n==="array-contains"?new fq(e,s):n==="in"?new mq(e,s):n==="not-in"?new pq(e,s):n==="array-contains-any"?new gq(e,s):new mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new dq(e,s):new hq(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ml(n,this.value)):n!==null&&$i(this.value)===$i(n)&&this.matchesComparison(Ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bs extends ZP{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new bs(e,n)}matches(e){return JP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function JP(t){return t.op==="and"}function ej(t){return cq(t)&&JP(t)}function cq(t){for(const e of t.filters)if(e instanceof bs)return!1;return!0}function L0(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(ej(t))return t.filters.map(e=>L0(e)).join(",");{const e=t.filters.map(n=>L0(n)).join(",");return`${t.op}(${e})`}}function tj(t,e){return t instanceof mt?function(s,r){return r instanceof mt&&s.op===r.op&&s.field.isEqual(r.field)&&$s(s.value,r.value)}(t,e):t instanceof bs?function(s,r){return r instanceof bs&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,o)=>i&&tj(a,r.filters[o]),!0):!1}(t,e):void ne(19439)}function nj(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`}(t):t instanceof bs?function(n){return n.op.toString()+" {"+n.getFilters().map(nj).join(" ,")+"}"}(t):"Filter"}class uq extends mt{constructor(e,n,s){super(e,n,s),this.key=te.fromName(s.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class dq extends mt{constructor(e,n){super(e,"in",n),this.keys=sj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hq extends mt{constructor(e,n){super(e,"not-in",n),this.keys=sj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sj(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>te.fromName(s.referenceValue))}class fq extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sw(n)&&ad(n.arrayValue,this.value)}}class mq extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ad(this.value.arrayValue,n)}}class pq extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ad(this.value.arrayValue,n)}}class gq extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ad(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e,n=null,s=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Ie=null}}function W1(t,e=null,n=[],s=[],r=null,i=null,a=null){return new yq(t,e,n,s,r,i,a)}function rw(t){const e=ce(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>L0(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ol(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ol(s)).join(",")),e.Ie=n}return e.Ie}function iw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K1(t.startAt,e.startAt)&&K1(t.endAt,e.endAt)}function U0(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n=null,s=[],r=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function vq(t,e,n,s,r,i,a,o){return new dc(t,e,n,s,r,i,a,o)}function Fp(t){return new dc(t)}function Q1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rj(t){return t.collectionGroup!==null}function _u(t){const e=ce(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Tt(Vt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new od(i,s))}),n.has(Vt.keyField().canonicalString())||e.Ee.push(new od(Vt.keyField(),s))}return e.Ee}function Fs(t){const e=ce(t);return e.de||(e.de=bq(e,_u(t))),e.de}function bq(t,e){if(t.limitType==="F")return W1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new od(r.field,i)});const n=t.endAt?new km(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new km(t.startAt.position,t.startAt.inclusive):null;return W1(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function F0(t,e){const n=t.filters.concat([e]);return new dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function B0(t,e,n){return new dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bp(t,e){return iw(Fs(t),Fs(e))&&t.limitType===e.limitType}function ij(t){return`${rw(Fs(t))}|lt:${t.limitType}`}function Ao(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>nj(r)).join(", ")}]`),Qd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Ol(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Ol(r)).join(",")),`Target(${s})`}(Fs(t))}; limitType=${t.limitType})`}function zp(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):te.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of _u(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(a,o,l){const u=Y1(a,o,l);return a.inclusive?u<=0:u<0}(s.startAt,_u(s),r)||s.endAt&&!function(a,o,l){const u=Y1(a,o,l);return a.inclusive?u>=0:u>0}(s.endAt,_u(s),r))}(t,e)}function xq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aj(t){return(e,n)=>{let s=!1;for(const r of _u(t)){const i=wq(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function wq(t,e,n){const s=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,a,o){const l=a.data.field(i),u=o.data.field(i);return l!==null&&u!==null?Ml(l,u):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return HP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=new nt(te.comparator);function Vr(){return _q}const oj=new nt(te.comparator);function eu(...t){let e=oj;for(const n of t)e=e.insert(n.key,n);return e}function lj(t){let e=oj;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function wa(){return Tu()}function cj(){return Tu()}function Tu(){return new io(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tq=new nt(te.comparator),Eq=new Tt(te.comparator);function Te(...t){let e=Eq;for(const n of t)e=e.add(n);return e}const Sq=new Tt(ye);function Aq(){return Sq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dm(e)?"-0":e}}function uj(t){return{integerValue:""+t}}function Cq(t,e){return eq(e)?uj(e):aw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this._=void 0}}function Rq(t,e,n){return t instanceof Mm?function(r,i){const a={fields:{[$P]:{stringValue:GP},[KP]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&nw(i)&&(i=Up(i)),i&&(a.fields[YP]=i),{mapValue:a}}(n,e):t instanceof Vl?hj(t,e):t instanceof ld?fj(t,e):function(r,i){const a=dj(r,i),o=X1(a)+X1(r.Re);return V0(a)&&V0(r.Re)?uj(o):aw(r.serializer,o)}(t,e)}function Nq(t,e,n){return t instanceof Vl?hj(t,e):t instanceof ld?fj(t,e):n}function dj(t,e){return t instanceof Om?function(s){return V0(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Mm extends Hp{}class Vl extends Hp{constructor(e){super(),this.elements=e}}function hj(t,e){const n=mj(e);for(const s of t.elements)n.some(r=>$s(r,s))||n.push(s);return{arrayValue:{values:n}}}class ld extends Hp{constructor(e){super(),this.elements=e}}function fj(t,e){let n=mj(e);for(const s of t.elements)n=n.filter(r=>!$s(r,s));return{arrayValue:{values:n}}}class Om extends Hp{constructor(e,n){super(),this.serializer=e,this.Re=n}}function X1(t){return dt(t.integerValue||t.doubleValue)}function mj(t){return sw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e,n){this.field=e,this.transform=n}}function Dq(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Vl&&r instanceof Vl||s instanceof ld&&r instanceof ld?kl(s.elements,r.elements,$s):s instanceof Om&&r instanceof Om?$s(s.Re,r.Re):s instanceof Mm&&r instanceof Mm}(t.transform,e.transform)}class Pq{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qp{}function pj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zd(t.key,pt.none()):new Xd(t.key,t.data,pt.none());{const n=t.data,s=on.empty();let r=new Tt(Vt.comparator);for(let i of e.fields)if(!r.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new ia(t.key,s,new Rn(r.toArray()),pt.none())}}function jq(t,e,n){t instanceof Xd?function(r,i,a){const o=r.value.clone(),l=J1(r.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ia?function(r,i,a){if(!jf(r.precondition,i))return void i.convertToUnknownDocument(a.version);const o=J1(r.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(gj(r)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Eu(t,e,n,s){return t instanceof Xd?function(i,a,o,l){if(!jf(i.precondition,a))return o;const u=i.value.clone(),h=eA(i.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof ia?function(i,a,o,l){if(!jf(i.precondition,a))return o;const u=eA(i.fieldTransforms,l,a),h=a.data;return h.setAll(gj(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,a,o){return jf(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function kq(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=dj(s.transform,r||null);i!=null&&(n===null&&(n=on.empty()),n.set(s.field,i))}return n||null}function Z1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&kl(s,r,(i,a)=>Dq(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xd extends qp{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ia extends qp{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function J1(t,e,n){const s=new Map;Ce(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],a=i.transform,o=e.data.field(i.field);s.set(i.field,Nq(a,o,n[r]))}return s}function eA(t,e,n){const s=new Map;for(const r of t){const i=r.transform,a=n.data.field(r.field);s.set(r.field,Rq(i,a,e))}return s}class Zd extends qp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yj extends qp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&jq(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Eu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Eu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=cj();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(r.key)?null:o;const l=pj(a,o);l!==null&&s.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(re.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,(n,s)=>Z1(n,s))&&kl(this.baseMutations,e.baseMutations,(n,s)=>Z1(n,s))}}class ow{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ce(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return Tq}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new ow(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oq=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Ee;function vj(t){switch(t){case U.OK:return ne(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function bj(t){if(t===void 0)return Or("GRPC error has no .code"),U.UNKNOWN;switch(t){case ht.OK:return U.OK;case ht.CANCELLED:return U.CANCELLED;case ht.UNKNOWN:return U.UNKNOWN;case ht.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ht.INTERNAL:return U.INTERNAL;case ht.UNAVAILABLE:return U.UNAVAILABLE;case ht.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ht.NOT_FOUND:return U.NOT_FOUND;case ht.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ht.ABORTED:return U.ABORTED;case ht.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ht.DATA_LOSS:return U.DATA_LOSS;default:return ne(39323,{code:t})}}(Ee=ht||(ht={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lq=new Oi([4294967295,4294967295],0);function tA(t){const e=FP().encode(t),n=new PP;return n.update(e),new Uint8Array(n.digest())}function nA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Oi([n,s],0),new Oi([r,i],0)]}class lw{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(s<0)throw new tu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Oi.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(Oi.fromNumber(s)));return r.compare(Lq)===1&&(r=new Oi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=tA(e),[s,r]=nA(n);for(let i=0;i<this.hashCount;i++){const a=this.we(s,r,i);if(!this.be(a))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new lw(i,r,n);return s.forEach(o=>a.insert(o)),a}insert(e){if(this.pe===0)return;const n=tA(e),[s,r]=nA(n);for(let i=0;i<this.hashCount;i++){const a=this.we(s,r,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Jd.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Gp(re.min(),r,new nt(ye),Vr(),Te())}}class Jd{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Jd(s,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class xj{constructor(e,n){this.targetId=e,this.Ce=n}}class wj{constructor(e,n,s=Bt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class sA{constructor(){this.Fe=0,this.Me=rA(),this.xe=Bt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Te(),n=Te(),s=Te();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ne(38017,{changeType:i})}}),new Jd(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=rA()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ce(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Uq{constructor(e){this.ze=e,this.je=new Map,this.He=Vr(),this.Je=Jh(),this.Ye=Jh(),this.Ze=new nt(ye)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(U0(i))if(s===0){const a=new te(i.path);this.tt(n,a,Nt.newNoDocument(a,re.min()))}else Ce(s===1,20013,{expectedCount:s});else{const a=this.ut(n);if(a!==s){const o=this.ct(e),l=o?this.lt(o,e,a):1;if(l!==0){this.st(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let a,o;try{a=Gi(s).toUint8Array()}catch(l){if(l instanceof qP)return jl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new lw(a,r,i)}catch(l){return jl(l instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.pe===0?null:o}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const a=this.ze.Pt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,a)=>{const o=this._t(a);if(o){if(i.current&&U0(o.target)){const l=new te(o.target.path);this.Et(l).has(a)||this.dt(a,l)||this.tt(a,l,Nt.newNoDocument(l,e))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let s=Te();this.Ye.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(s=s.add(i))}),this.He.forEach((i,a)=>a.setReadTime(e));const r=new Gp(e,n,this.Ze,this.He,s);return this.He=Vr(),this.Je=Jh(),this.Ye=Jh(),this.Ze=new nt(ye),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new sA,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Tt(ye),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Tt(ye),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new sA),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Jh(){return new nt(te.comparator)}function rA(){return new nt(te.comparator)}const Fq={asc:"ASCENDING",desc:"DESCENDING"},Bq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zq={and:"AND",or:"OR"};class Hq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function z0(t,e){return t.useProto3Json||Qd(e)?e:{value:e}}function Vm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _j(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qq(t,e){return Vm(t,e.toTimestamp())}function kn(t){return Ce(!!t,49232),re.fromTimestamp(function(n){const s=qi(n);return new pe(s.seconds,s.nanos)}(t))}function cw(t,e){return H0(t,e).canonicalString()}function H0(t,e){const n=function(r){return new Fe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Tj(t){const e=Fe.fromString(t);return Ce(Nj(e),10190,{key:e.toString()}),e}function Lm(t,e){return cw(t.databaseId,e.path)}function Su(t,e){const n=Tj(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(Sj(n))}function Ej(t,e){return cw(t.databaseId,e)}function Gq(t){const e=Tj(t);return e.length===4?Fe.emptyPath():Sj(e)}function q0(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Sj(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iA(t,e,n){return{name:Lm(t,e),fields:n.value.mapValue.fields}}function $q(t,e){return"found"in e?function(s,r){Ce(!!r.found,43571),r.found.name,r.found.updateTime;const i=Su(s,r.found.name),a=kn(r.found.updateTime),o=r.found.createTime?kn(r.found.createTime):re.min(),l=new on({mapValue:{fields:r.found.fields}});return Nt.newFoundDocument(i,a,o,l)}(t,e):"missing"in e?function(s,r){Ce(!!r.missing,3894),Ce(!!r.readTime,22933);const i=Su(s,r.missing),a=kn(r.readTime);return Nt.newNoDocument(i,a)}(t,e):ne(7234,{result:e})}function Yq(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const h=u.code===void 0?U.UNKNOWN:bj(u.code);return new K(h,u.message||"")}(a);n=new wj(s,r,i,o||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Su(t,s.document.name),i=kn(s.document.updateTime),a=s.document.createTime?kn(s.document.createTime):re.min(),o=new on({mapValue:{fields:s.document.fields}}),l=Nt.newFoundDocument(r,i,a,o),u=s.targetIds||[],h=s.removedTargetIds||[];n=new kf(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Su(t,s.document),i=s.readTime?kn(s.readTime):re.min(),a=Nt.newNoDocument(r,i),o=s.removedTargetIds||[];n=new kf([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Su(t,s.document),i=s.removedTargetIds||[];n=new kf([],i,r,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new Vq(r,i),o=s.targetId;n=new xj(o,a)}}return n}function Aj(t,e){let n;if(e instanceof Xd)n={update:iA(t,e.key,e.value)};else if(e instanceof Zd)n={delete:Lm(t,e.key)};else if(e instanceof ia)n={update:iA(t,e.key,e.data),updateMask:nG(e.fieldMask)};else{if(!(e instanceof yj))return ne(16599,{ft:e.type});n={verify:Lm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,a){const o=a.transform;if(o instanceof Mm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Vl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ld)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Om)return{fieldPath:a.field.canonicalString(),increment:o.Re};throw ne(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:qq(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function Kq(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>function(r,i){let a=r.updateTime?kn(r.updateTime):kn(i);return a.isEqual(re.min())&&(a=kn(i)),new Pq(a,r.transformResults||[])}(n,e))):[]}function Wq(t,e){return{documents:[Ej(t,e.path)]}}function Qq(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ej(t,r);const i=function(u){if(u.length!==0)return Rj(bs.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Co(m.field),direction:Jq(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=z0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:r}}function Xq(t){let e=Gq(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ce(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=Cj(f);return m instanceof bs&&ej(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(E){return new od(Ro(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(f){let m;return m=typeof f=="object"?f.value:f,Qd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,p=f.values||[];return new km(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new km(p,m)}(n.endAt)),vq(e,r,a,i,o,"F",l,u)}function Zq(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ro(n.unaryFilter.field);return mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Ro(n.unaryFilter.field);return mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ro(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ro(n.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(Ro(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bs.create(n.compositeFilter.filters.map(s=>Cj(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function Jq(t){return Fq[t]}function eG(t){return Bq[t]}function tG(t){return zq[t]}function Co(t){return{fieldPath:t.canonicalString()}}function Ro(t){return Vt.fromServerFormat(t.fieldPath)}function Rj(t){return t instanceof mt?function(n){if(n.op==="=="){if($1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NAN"}};if(G1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NAN"}};if(G1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(n.field),op:eG(n.op),value:n.value}}}(t):t instanceof bs?function(n){const s=n.getFilters().map(r=>Rj(r));return s.length===1?s[0]:{compositeFilter:{op:tG(n.op),filters:s}}}(t):ne(54877,{filter:t})}function nG(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Nj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,s,r,i=re.min(),a=re.min(),o=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e){this.wt=e}}function rG(t){const e=Xq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?B0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(){this.yn=new aG}addToCollectionParentIndex(e,n){return this.yn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Hi.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class aG{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Tt(Fe.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Tt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ij=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(Ij,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ll(0)}static ir(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="LruGarbageCollector",oG=1048576;function lA([t,e],[n,s]){const r=ye(t,n);return r===0?ye(e,s):r}class lG{constructor(e){this.cr=e,this.buffer=new Tt(lA),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();lA(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cG{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){W(oA,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uc(n)?W(oA,"Ignoring IndexedDB error during garbage collection: ",n):await cc(n)}await this.Ir(3e5)})}}class uG{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Lp.le);const s=new lG(n);return this.Er.forEachTarget(e,r=>s.Pr(r.sequenceNumber)).next(()=>this.Er.Ar(e,r=>s.Pr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Er.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(aA)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aA):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let s,r,i,a,o,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,a=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(s=f,o=Date.now(),this.removeTargets(e,s,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),So()<=_e.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function dG(t,e){return new uG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(){this.changes=new io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Eu(s.mutation,r,Rn.empty(),pe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Te()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Te()){const r=wa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let a=eu();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=wa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Te()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,s,r){let i=Vr();const a=Tu(),o=function(){return Tu()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof ia)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Eu(h.mutation,u,h.mutation.getFieldMask(),pe.now())):a.set(u.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>{var f;return o.set(u,new fG(h,(f=a.get(u))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const s=Tu();let r=new nt((a,o)=>a-o),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||Rn.empty();h=o.applyToLocalView(u,h),s.set(l,h);const f=(r.get(o.batchId)||Te()).add(l);r=r.insert(o.batchId,f)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,h=l.value,f=cj();h.forEach(m=>{if(!i.has(m)){const p=pj(n.get(m),s.get(m));p!==null&&f.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return B.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):B.resolve(wa());let o=sd,l=i;return a.next(u=>B.forEach(u,(h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Te())).next(h=>({batchId:o,changes:lj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(s=>{let r=eu();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let a=eu();return this.indexManager.getCollectionParents(e,i).next(o=>B.forEach(o,l=>{const u=function(f,m){return new dc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(a=>{i.forEach((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,Nt.newInvalidDocument(h)))});let o=eu();return a.forEach((l,u)=>{const h=i.get(l);h!==void 0&&Eu(h.mutation,u,Rn.empty(),pe.now()),zp(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return B.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:kn(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(r){return{name:r.name,query:rG(r.bundledQuery),readTime:kn(r.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(){this.overlays=new nt(te.comparator),this.Or=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=wa();return B.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Or.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const r=wa(),i=n.length+1,a=new te(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new nt((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=wa(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=wa(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>o.set(u,h)),!(o.size()>=r)););return B.resolve(o)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.Or.get(r.largestBatchId).delete(s.key);this.Or.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new Oq(n,s));let i=this.Or.get(n);i===void 0&&(i=Te(),this.Or.set(n,i)),this.Or.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.Nr=new Tt(At.Br),this.Lr=new Tt(At.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const s=new At(e,n);this.Nr=this.Nr.add(s),this.Lr=this.Lr.add(s)}qr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Qr(new At(e,n))}$r(e,n){e.forEach(s=>this.removeReference(s,n))}Ur(e){const n=new te(new Fe([])),s=new At(n,e),r=new At(n,e+1),i=[];return this.Lr.forEachInRange([s,r],a=>{this.Qr(a),i.push(a.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new te(new Fe([])),s=new At(n,e),r=new At(n,e+1);let i=Te();return this.Lr.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new At(e,0),s=this.Nr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class At{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return te.comparator(e.key,n.key)||ye(e.Gr,n.Gr)}static kr(e,n){return ye(e.Gr,n.Gr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Tt(At.Br)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Mq(i,n,s,r);this.mutationQueue.push(a);for(const o of r)this.zr=this.zr.add(new At(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.Hr(s),i=r<0?0:r;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?tw:this.Jn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([s,r],a=>{const o=this.jr(a.Gr);i.push(o)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Tt(ye);return n.forEach(r=>{const i=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,a],o=>{s=s.add(o.Gr)})}),B.resolve(this.Jr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;te.isDocumentKey(i)||(i=i.child(""));const a=new At(new te(i),0);let o=new Tt(ye);return this.zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(o=o.add(l.Gr)),!0)},a),B.resolve(this.Jr(o))}Jr(e){const n=[];return e.forEach(s=>{const r=this.jr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ce(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.zr;return B.forEach(n.mutations,r=>{const i=new At(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.zr=s})}Xn(e){}containsKey(e,n){const s=new At(n,0),r=this.zr.firstAfterOrEqual(s);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e){this.Zr=e,this.docs=function(){return new nt(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,a=this.Zr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let s=Vr();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Nt.newInvalidDocument(r))}),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Vr();const a=n.path,o=new te(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||QH(WH(h),s)<=0||(r.has(h.key)||zp(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ne(9500)}Xr(e,n){return B.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new xG(this)}getSize(e){return B.resolve(this.size)}}class xG extends hG{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.vr.addEntry(e,r)):this.vr.removeEntry(s)}),B.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e){this.persistence=e,this.ei=new io(n=>rw(n),iw),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.ti=0,this.ni=new uw,this.targetCount=0,this.ri=Ll.rr()}forEachTarget(e,n){return this.ei.forEach((s,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ti&&(this.ti=n),B.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.ar(n),B.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.ei.forEach((a,o)=>{o.sequenceNumber<=n&&s.get(o.targetId)===null&&(this.ei.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),B.waitFor(i).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.ei.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this.ni.qr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this.ni.$r(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ni.Wr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.ii={},this.overlays={},this.si=new Lp(0),this.oi=!1,this.oi=!0,this._i=new yG,this.referenceDelegate=e(this),this.ai=new wG(this),this.indexManager=new iG,this.remoteDocumentCache=function(r){return new bG(r)}(s=>this.referenceDelegate.ui(s)),this.serializer=new sG(n),this.ci=new pG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ii[e.toKey()];return s||(s=new vG(n,this.referenceDelegate),this.ii[e.toKey()]=s),s}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,s){W("MemoryPersistence","Starting transaction:",e);const r=new _G(this.si.next());return this.referenceDelegate.li(),s(r).next(i=>this.referenceDelegate.hi(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Pi(e,n){return B.or(Object.values(this.ii).map(s=>()=>s.containsKey(e,n)))}}class _G extends ZH{constructor(e){super(),this.currentSequenceNumber=e}}class dw{constructor(e){this.persistence=e,this.Ti=new uw,this.Ii=null}static Ei(e){return new dw(e)}get di(){if(this.Ii)return this.Ii;throw ne(60996)}addReference(e,n,s){return this.Ti.addReference(s,n),this.di.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.Ti.removeReference(s,n),this.di.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(r=>this.di.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.di.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,s=>{const r=te.fromPath(s);return this.Ai(e,r).next(i=>{i||n.removeEntry(r,re.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return B.or([()=>B.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Um{constructor(e,n){this.persistence=e,this.Ri=new io(s=>tq(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=dG(this,n)}static Ei(e,n){return new Um(e,n)}li(){}hi(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}Vr(e){let n=0;return this.Ar(e,s=>{n++}).next(()=>n)}Ar(e,n){return B.forEach(this.Ri,(s,r)=>this.gr(e,s,r).next(i=>i?B.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Xr(e,a=>this.gr(e,a,n).next(o=>{o||(s++,i.removeEntry(a,re.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.Ri.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,n,s){return this.Ri.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),B.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Df(e.data.value)),n}gr(e,n,s){return B.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.Ri.get(n);return B.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ls=s,this.hs=r}static Ps(e,n){let s=Te(),r=Te();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new hw(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return eB()?8:JH(en())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.Rs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Vs(e,n,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new TG;return this.fs(e,n,a).next(o=>{if(i.result=o,this.Is)return this.gs(e,n,a,o.size)})}).next(()=>i.result)}gs(e,n,s,r){return s.documentReadCount<this.Es?(So()<=_e.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),B.resolve()):(So()<=_e.DEBUG&&W("QueryEngine","Query:",Ao(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ds*r?(So()<=_e.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(n))):B.resolve())}Rs(e,n){if(Q1(n))return B.resolve(null);let s=Fs(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=B0(n,null,"F"),s=Fs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const a=Te(...i);return this.As.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.ps(n,o);return this.ys(n,u,a,l.readTime)?this.Rs(e,B0(n,null,"F")):this.ws(e,u,n,l)}))})))}Vs(e,n,s,r){return Q1(n)||r.isEqual(re.min())?B.resolve(null):this.As.getDocuments(e,s).next(i=>{const a=this.ps(n,i);return this.ys(n,a,s,r)?B.resolve(null):(So()<=_e.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ao(n)),this.ws(e,a,n,KH(r,sd)).next(o=>o))})}ps(e,n){let s=new Tt(aj(e));return n.forEach((r,i)=>{zp(e,i)&&(s=s.add(i))}),s}ys(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}fs(e,n,s){return So()<=_e.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ao(n)),this.As.getDocumentsMatchingQuery(e,n,Hi.min(),s)}ws(e,n,s,r){return this.As.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="LocalStore",SG=3e8;class AG{constructor(e,n,s,r){this.persistence=e,this.bs=n,this.serializer=r,this.Ss=new nt(ye),this.Ds=new io(i=>rw(i),iw),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(s)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mG(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function CG(t,e,n,s){return new AG(t,e,n,s)}async function Pj(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],o=[];let l=Te();for(const u of r){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ms:u,removedBatchIds:a,addedBatchIds:o}))})})}function RG(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(o,l,u,h){const f=u.batch,m=f.keys();let p=B.resolve();return m.forEach(E=>{p=p.next(()=>h.getEntry(l,E)).next(w=>{const x=u.docVersions.get(E);Ce(x!==null,48541),w.version.compareTo(x)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let l=Te();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function jj(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function NG(t,e){const n=ce(t),s=e.snapshotVersion;let r=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});r=n.Ss;const o=[];e.targetChanges.forEach((h,f)=>{const m=r.get(f);if(!m)return;o.push(n.ai.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.ai.addMatchingKeys(i,h.addedDocuments,f)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Bt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,s)),r=r.insert(f,p),function(w,x,v){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=SG?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,p,h)&&o.push(n.ai.updateTargetData(i,p))});let l=Vr(),u=Te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(IG(i,a,e.documentUpdates).next(h=>{l=h.xs,u=h.Os})),!s.isEqual(re.min())){const h=n.ai.getLastRemoteSnapshotVersion(i).next(f=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,s));o.push(h)}return B.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ss=r,i))}function IG(t,e,n){let s=Te(),r=Te();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let a=Vr();return n.forEach((o,l)=>{const u=i.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):W(fw,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{xs:a,Os:r}})}function DG(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=tw),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function PG(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.ai.getTargetData(s,e).next(i=>i?(r=i,B.resolve(r)):n.ai.allocateTargetId(s).next(a=>(r=new Ti(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.ai.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ss.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(s.targetId,s),n.Ds.set(e,s.targetId)),s})}async function G0(t,e,n){const s=ce(t),r=s.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!uc(a))throw a;W(fw,`Failed to update sequence numbers for target ${e}: ${a}`)}s.Ss=s.Ss.remove(e),s.Ds.delete(r.target)}function cA(t,e,n){const s=ce(t);let r=re.min(),i=Te();return s.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,h){const f=ce(l),m=f.Ds.get(h);return m!==void 0?B.resolve(f.Ss.get(m)):f.ai.getTargetData(u,h)}(s,a,Fs(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,s.ai.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>s.bs.getDocumentsMatchingQuery(a,e,n?r:re.min(),n?i:Te())).next(o=>(jG(s,xq(e),o),{documents:o,Ns:i})))}function jG(t,e,n){let s=t.vs.get(e)||re.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.vs.set(e,s)}class uA{constructor(){this.activeTargetIds=Aq()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kG{constructor(){this.So=new uA,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,s){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new uA,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="ConnectivityMonitor";class hA{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){W(dA,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){W(dA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function $0(){return ef===null?ef=function(){return 268435456+Math.round(2147483648*Math.random())}():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="RestConnection",OG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VG{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${s}/databases/${r}`,this.qo=this.databaseId.database===Pm?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Qo(e,n,s,r,i){const a=$0(),o=this.$o(e,n.toUriEncodedString());W(qy,`Sending RPC '${e}' ${a}:`,o,s);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,r,i),this.Ko(e,o,l,s).then(u=>(W(qy,`Received RPC '${e}' ${a}: `,u),u),u=>{throw jl(qy,`RPC '${e}' ${a} failed with error: `,u,"url: ",o,"request:",s),u})}Wo(e,n,s,r,i,a){return this.Qo(e,n,s,r,i)}Uo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}$o(e,n){const s=OG[e];return`${this.Lo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class UG extends VG{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,s,r){const i=$0();return new Promise((a,o)=>{const l=new jP;l.setWithCredentials(!0),l.listenOnce(kP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case If.NO_ERROR:const h=l.getResponseJson();W($t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case If.TIMEOUT:W($t,`RPC '${e}' ${i} timed out`),o(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const f=l.getStatus();if(W($t,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const E=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(p.status);o(new K(E,p.message))}else o(new K(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new K(U.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{s_:e,streamId:i,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{W($t,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(r);W($t,`RPC '${e}' ${i} sending request:`,r),l.send(n,"POST",u,s,15)})}a_(e,n,s){const r=$0(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=VP(),o=OP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");W($t,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=a.createWebChannel(h,l);let m=!1,p=!1;const E=new LG({Go:x=>{p?W($t,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(m||(W($t,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),W($t,`RPC '${e}' stream ${r} sending:`,x),f.send(x))},zo:()=>f.close()}),w=(x,v,b)=>{x.listen(v,_=>{try{b(_)}catch(C){setTimeout(()=>{throw C},0)}})};return w(f,Jc.EventType.OPEN,()=>{p||(W($t,`RPC '${e}' stream ${r} transport opened.`),E.t_())}),w(f,Jc.EventType.CLOSE,()=>{p||(p=!0,W($t,`RPC '${e}' stream ${r} transport closed`),E.r_())}),w(f,Jc.EventType.ERROR,x=>{p||(p=!0,jl($t,`RPC '${e}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),E.r_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),w(f,Jc.EventType.MESSAGE,x=>{var v;if(!p){const b=x.data[0];Ce(!!b,16349);const _=b,C=(_==null?void 0:_.error)||((v=_[0])===null||v===void 0?void 0:v.error);if(C){W($t,`RPC '${e}' stream ${r} received error:`,C);const P=C.status;let M=function(N){const R=ht[N];if(R!==void 0)return bj(R)}(P),A=C.message;M===void 0&&(M=U.INTERNAL,A="Unknown error status: "+P+" with message "+C.message),p=!0,E.r_(new K(M,A)),f.close()}else W($t,`RPC '${e}' stream ${r} received:`,b),E.i_(b)}}),w(o,MP.STAT_EVENT,x=>{x.stat===k0.PROXY?W($t,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===k0.NOPROXY&&W($t,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.n_()},0),E}}function Gy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){return new Hq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,s=1e3,r=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=s,this.c_=r,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),s=Math.max(0,Date.now()-this.T_),r=Math.max(0,n-s);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="PersistentStream";class kj{constructor(e,n,s,r,i,a,o,l){this.bi=e,this.R_=s,this.V_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new mw(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.m_===n&&this.B_(s,r)},s=>{e(()=>{const r=new K(U.UNKNOWN,"Fetching auth token failed: "+s.message);return this.L_(r)})})}B_(e,n){const s=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{s(()=>this.listener.jo())}),this.stream.Jo(()=>{s(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(r=>{s(()=>this.L_(r))}),this.stream.onMessage(r=>{s(()=>++this.p_==1?this.q_(r):this.onNext(r))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return W(fA,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(W(fA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FG extends kj{constructor(e,n,s,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=Yq(this.serializer,e),s=function(i){if(!("targetChange"in i))return re.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?re.min():a.readTime?kn(a.readTime):re.min()}(e);return this.listener.Q_(n,s)}U_(e){const n={};n.database=q0(this.serializer),n.addTarget=function(i,a){let o;const l=a.target;if(o=U0(l)?{documents:Wq(i,l)}:{query:Qq(i,l).gt},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=_j(i,a.resumeToken);const u=z0(i,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(re.min())>0){o.readTime=Vm(i,a.snapshotVersion.toTimestamp());const u=z0(i,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const s=Zq(this.serializer,e);s&&(n.labels=s),this.F_(n)}K_(e){const n={};n.database=q0(this.serializer),n.removeTarget=e,this.F_(n)}}class BG extends kj{constructor(e,n,s,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=Kq(e.writeResults,e.commitTime),s=kn(e.commitTime);return this.listener.j_(s,n)}H_(){const e={};e.database=q0(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Aj(this.serializer,s))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{}class HG extends zG{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,s,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Qo(e,H0(n,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Wo(e,n,s,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Wo(e,H0(n,s),r,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class qG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Or(n),this.ea=!1):W("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="RemoteStore";class GG{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(a=>{s.enqueueAndForget(async()=>{ao(this)&&(W($a,"Restarting streams for network reachability change."),await async function(l){const u=ce(l);u.aa.add(4),await eh(u),u.la.set("Unknown"),u.aa.delete(4),await Yp(u)}(this))})}),this.la=new qG(s,r)}}async function Yp(t){if(ao(t))for(const e of t.ua)await e(!0)}async function eh(t){for(const e of t.ua)await e(!1)}function Mj(t,e){const n=ce(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),vw(n)?yw(n):hc(n).b_()&&gw(n,e))}function pw(t,e){const n=ce(t),s=hc(n);n._a.delete(e),s.b_()&&Oj(n,e),n._a.size===0&&(s.b_()?s.v_():ao(n)&&n.la.set("Unknown"))}function gw(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hc(t).U_(e)}function Oj(t,e){t.ha.Ke(e),hc(t).K_(e)}function yw(t){t.ha=new Uq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),hc(t).start(),t.la.ta()}function vw(t){return ao(t)&&!hc(t).w_()&&t._a.size>0}function ao(t){return ce(t).aa.size===0}function Vj(t){t.ha=void 0}async function $G(t){t.la.set("Online")}async function YG(t){t._a.forEach((e,n)=>{gw(t,e)})}async function KG(t,e){Vj(t),vw(t)?(t.la.ia(e),yw(t)):t.la.set("Unknown")}async function WG(t,e,n){if(t.la.set("Online"),e instanceof wj&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const o of i.targetIds)r._a.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r._a.delete(o),r.ha.removeTarget(o))}(t,e)}catch(s){W($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fm(t,s)}else if(e instanceof kf?t.ha.Xe(e):e instanceof xj?t.ha.ot(e):t.ha.nt(e),!n.isEqual(re.min()))try{const s=await jj(t.localStore);n.compareTo(s)>=0&&await function(i,a){const o=i.ha.It(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i._a.get(u);h&&i._a.set(u,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const h=i._a.get(l);if(!h)return;i._a.set(l,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),Oj(i,l);const f=new Ti(h.target,l,u,h.sequenceNumber);gw(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){W($a,"Failed to raise snapshot:",s),await Fm(t,s)}}async function Fm(t,e,n){if(!uc(e))throw e;t.aa.add(1),await eh(t),t.la.set("Offline"),n||(n=()=>jj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W($a,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await Yp(t)})}function Lj(t,e){return e().catch(n=>Fm(t,n,e))}async function Kp(t){const e=ce(t),n=Yi(e);let s=e.oa.length>0?e.oa[e.oa.length-1].batchId:tw;for(;QG(e);)try{const r=await DG(e.localStore,s);if(r===null){e.oa.length===0&&n.v_();break}s=r.batchId,XG(e,r)}catch(r){await Fm(e,r)}Uj(e)&&Fj(e)}function QG(t){return ao(t)&&t.oa.length<10}function XG(t,e){t.oa.push(e);const n=Yi(t);n.b_()&&n.W_&&n.G_(e.mutations)}function Uj(t){return ao(t)&&!Yi(t).w_()&&t.oa.length>0}function Fj(t){Yi(t).start()}async function ZG(t){Yi(t).H_()}async function JG(t){const e=Yi(t);for(const n of t.oa)e.G_(n.mutations)}async function e$(t,e,n){const s=t.oa.shift(),r=ow.from(s,e,n);await Lj(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Kp(t)}async function t$(t,e){e&&Yi(t).W_&&await async function(s,r){if(function(a){return vj(a)&&a!==U.ABORTED}(r.code)){const i=s.oa.shift();Yi(s).D_(),await Lj(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Kp(s)}}(t,e),Uj(t)&&Fj(t)}async function mA(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),W($a,"RemoteStore received new credentials");const s=ao(n);n.aa.add(3),await eh(n),s&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Yp(n)}async function n$(t,e){const n=ce(t);e?(n.aa.delete(2),await Yp(n)):e||(n.aa.add(2),await eh(n),n.la.set("Unknown"))}function hc(t){return t.Pa||(t.Pa=function(n,s,r){const i=ce(n);return i.Y_(),new FG(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{jo:$G.bind(null,t),Jo:YG.bind(null,t),Zo:KG.bind(null,t),Q_:WG.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),vw(t)?yw(t):t.la.set("Unknown")):(await t.Pa.stop(),Vj(t))})),t.Pa}function Yi(t){return t.Ta||(t.Ta=function(n,s,r){const i=ce(n);return i.Y_(),new BG(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:ZG.bind(null,t),Zo:t$.bind(null,t),z_:JG.bind(null,t),j_:e$.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Kp(t)):(await t.Ta.stop(),t.oa.length>0&&(W($a,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const a=Date.now()+s,o=new bw(e,n,a,r,i);return o.start(s),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xw(t,e){if(Or("AsyncQueue",`${e}: ${t}`),uc(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{static emptySet(e){return new ll(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||te.comparator(n.key,s.key):(n,s)=>te.comparator(n.key,s.key),this.keyedMap=eu(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ll)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ll;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Ia=new nt(te.comparator)}track(e){const n=e.doc.key,s=this.Ia.get(n);s?e.type!==0&&s.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&s.type!==1?this.Ia=this.Ia.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Ia=this.Ia.remove(n):e.type===1&&s.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,Ea:s}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ul{constructor(e,n,s,r,i,a,o,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ul(e,n,ll.emptySet(n),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class r${constructor(){this.queries=gA(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,s){const r=ce(n),i=r.queries;r.queries=gA(),i.forEach((a,o)=>{for(const l of o.Ra)l.onError(s)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function gA(){return new io(t=>ij(t),Bp)}async function ww(t,e){const n=ce(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.Va()&&e.ma()&&(s=2):(i=new s$,s=e.ma()?0:1);try{switch(s){case 0:i.Aa=await n.onListen(r,!0);break;case 1:i.Aa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=xw(a,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&Tw(n)}async function _w(t,e){const n=ce(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const a=i.Ra.indexOf(e);a>=0&&(i.Ra.splice(a,1),i.Ra.length===0?r=e.ma()?0:1:!i.Va()&&e.ma()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function i$(t,e){const n=ce(t);let s=!1;for(const r of e){const i=r.query,a=n.queries.get(i);if(a){for(const o of a.Ra)o.pa(r)&&(s=!0);a.Aa=r}}s&&Tw(n)}function a$(t,e,n){const s=ce(t),r=s.queries.get(e);if(r)for(const i of r.Ra)i.onError(n);s.queries.delete(e)}function Tw(t){t.fa.forEach(e=>{e.next()})}var Y0,yA;(yA=Y0||(Y0={})).ya="default",yA.Cache="cache";class Ew{constructor(e,n,s){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=s||{}}pa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ul(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const s=n!=="Offline";return(!this.options.Fa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Y0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.key=e}}class zj{constructor(e){this.key=e}}class o${constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Te(),this.mutatedKeys=Te(),this.Ua=aj(e),this.Ka=new ll(this.Ua)}get Wa(){return this.qa}Ga(e,n){const s=n?n.za:new pA,r=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{const m=r.get(h),p=zp(this.query,f)?f:null,E=!!m&&this.mutatedKeys.has(m.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;m&&p?m.data.isEqual(p.data)?E!==w&&(s.track({type:3,doc:p}),x=!0):this.ja(m,p)||(s.track({type:2,doc:p}),x=!0,(l&&this.Ua(p,l)>0||u&&this.Ua(p,u)<0)&&(o=!0)):!m&&p?(s.track({type:0,doc:p}),x=!0):m&&!p&&(s.track({type:1,doc:m}),x=!0,(l||u)&&(o=!0)),x&&(p?(a=a.add(p),i=w?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{Ka:a,za:s,ys:o,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((h,f)=>function(p,E){const w=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:x})}};return w(p)-w(E)}(h.type,f.type)||this.Ua(h.doc,f.doc)),this.Ha(s),r=r!=null&&r;const o=n&&!r?this.Ja():[],l=this.$a.size===0&&this.current&&!r?1:0,u=l!==this.Qa;return this.Qa=l,a.length!==0||u?{snapshot:new Ul(this.query,e.Ka,i,a,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ya:o}:{Ya:o}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new pA,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Te(),this.Ka.forEach(s=>{this.Za(s.key)&&(this.$a=this.$a.add(s.key))});const n=[];return e.forEach(s=>{this.$a.has(s)||n.push(new zj(s))}),this.$a.forEach(s=>{e.has(s)||n.push(new Bj(s))}),n}Xa(e){this.qa=e.Ns,this.$a=Te();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Ul.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Sw="SyncEngine";class l${constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class c${constructor(e){this.key=e,this.tu=!1}}class u${constructor(e,n,s,r,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new io(o=>ij(o),Bp),this.iu=new Map,this.su=new Set,this.ou=new nt(te.comparator),this._u=new Map,this.au=new uw,this.uu={},this.cu=new Map,this.lu=Ll.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function d$(t,e,n=!0){const s=Kj(t);let r;const i=s.ru.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.eu()):r=await Hj(s,e,n,!0),r}async function h$(t,e){const n=Kj(t);await Hj(n,e,!0,!1)}async function Hj(t,e,n,s){const r=await PG(t.localStore,Fs(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return s&&(o=await f$(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Mj(t.remoteStore,r),o}async function f$(t,e,n,s,r){t.Pu=(f,m,p)=>async function(w,x,v,b){let _=x.view.Ga(v);_.ys&&(_=await cA(w.localStore,x.query,!1).then(({documents:A})=>x.view.Ga(A,_)));const C=b&&b.targetChanges.get(x.targetId),P=b&&b.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(_,w.isPrimaryClient,C,P);return bA(w,x.targetId,M.Ya),M.snapshot}(t,f,m,p);const i=await cA(t.localStore,e,!0),a=new o$(e,i.Ns),o=a.Ga(i.documents),l=Jd.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=a.applyChanges(o,t.isPrimaryClient,l);bA(t,n,u.Ya);const h=new l$(e,n,a);return t.ru.set(e,h),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),u.snapshot}async function m$(t,e,n){const s=ce(t),r=s.ru.get(e),i=s.iu.get(r.targetId);if(i.length>1)return s.iu.set(r.targetId,i.filter(a=>!Bp(a,e))),void s.ru.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await G0(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&pw(s.remoteStore,r.targetId),K0(s,r.targetId)}).catch(cc)):(K0(s,r.targetId),await G0(s.localStore,r.targetId,!0))}async function p$(t,e){const n=ce(t),s=n.ru.get(e),r=n.iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),pw(n.remoteStore,s.targetId))}async function g$(t,e,n){const s=T$(t);try{const r=await function(a,o){const l=ce(a),u=pe.now(),h=o.reduce((p,E)=>p.add(E.key),Te());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=Vr(),w=Te();return l.Cs.getEntries(p,h).next(x=>{E=x,E.forEach((v,b)=>{b.isValidDocument()||(w=w.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,E)).next(x=>{f=x;const v=[];for(const b of o){const _=kq(b,f.get(b.key).overlayedDocument);_!=null&&v.push(new ia(b.key,_,XP(_.value.mapValue),pt.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,v,o)}).next(x=>{m=x;const v=x.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(p,x.batchId,v)})}).then(()=>({batchId:m.batchId,changes:lj(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let u=a.uu[a.currentUser.toKey()];u||(u=new nt(ye)),u=u.insert(o,l),a.uu[a.currentUser.toKey()]=u}(s,r.batchId,n),await th(s,r.changes),await Kp(s.remoteStore)}catch(r){const i=xw(r,"Failed to persist write");n.reject(i)}}async function qj(t,e){const n=ce(t);try{const s=await NG(n.localStore,e);e.targetChanges.forEach((r,i)=>{const a=n._u.get(i);a&&(Ce(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.tu=!0:r.modifiedDocuments.size>0?Ce(a.tu,14607):r.removedDocuments.size>0&&(Ce(a.tu,42227),a.tu=!1))}),await th(n,s,e)}catch(s){await cc(s)}}function vA(t,e,n){const s=ce(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.ru.forEach((i,a)=>{const o=a.view.ga(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=ce(a);l.onlineState=o;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.Ra)m.ga(o)&&(u=!0)}),u&&Tw(l)}(s.eventManager,e),r.length&&s.nu.Q_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function y$(t,e,n){const s=ce(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s._u.get(e),i=r&&r.key;if(i){let a=new nt(te.comparator);a=a.insert(i,Nt.newNoDocument(i,re.min()));const o=Te().add(i),l=new Gp(re.min(),new Map,new nt(ye),a,o);await qj(s,l),s.ou=s.ou.remove(i),s._u.delete(e),Aw(s)}else await G0(s.localStore,e,!1).then(()=>K0(s,e,n)).catch(cc)}async function v$(t,e){const n=ce(t),s=e.batch.batchId;try{const r=await RG(n.localStore,e);$j(n,s,null),Gj(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await th(n,r)}catch(r){await cc(r)}}async function b$(t,e,n){const s=ce(t);try{const r=await function(a,o){const l=ce(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(Ce(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(s.localStore,e);$j(s,e,n),Gj(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await th(s,r)}catch(r){await cc(r)}}function Gj(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function $j(t,e,n){const s=ce(t);let r=s.uu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.uu[s.currentUser.toKey()]=r}}function K0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.iu.get(e))t.ru.delete(s),n&&t.nu.Tu(s,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(s=>{t.au.containsKey(s)||Yj(t,s)})}function Yj(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(pw(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),Aw(t))}function bA(t,e,n){for(const s of n)s instanceof Bj?(t.au.addReference(s.key,e),x$(t,s)):s instanceof zj?(W(Sw,"Document no longer in limbo: "+s.key),t.au.removeReference(s.key,e),t.au.containsKey(s.key)||Yj(t,s.key)):ne(19791,{Iu:s})}function x$(t,e){const n=e.key,s=n.path.canonicalString();t.ou.get(n)||t.su.has(s)||(W(Sw,"New document in limbo: "+n),t.su.add(s),Aw(t))}function Aw(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new te(Fe.fromString(e)),s=t.lu.next();t._u.set(s,new c$(n)),t.ou=t.ou.insert(n,s),Mj(t.remoteStore,new Ti(Fs(Fp(n.path)),s,"TargetPurposeLimboResolution",Lp.le))}}async function th(t,e,n){const s=ce(t),r=[],i=[],a=[];s.ru.isEmpty()||(s.ru.forEach((o,l)=>{a.push(s.Pu(l,e,n).then(u=>{var h;if((u||n)&&s.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);const f=hw.Ps(l.targetId,u);i.push(f)}}))}),await Promise.all(a),s.nu.Q_(r),await async function(l,u){const h=ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(u,m=>B.forEach(m.ls,p=>h.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>B.forEach(m.hs,p=>h.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!uc(f))throw f;W(fw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=h.Ss.get(m),E=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(E);h.Ss=h.Ss.insert(m,w)}}}(s.localStore,i))}async function w$(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){W(Sw,"User change. New user:",e.toKey());const s=await Pj(n.localStore,e);n.currentUser=e,function(i,a){i.cu.forEach(o=>{o.forEach(l=>{l.reject(new K(U.CANCELLED,a))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await th(n,s.Ms)}}function _$(t,e){const n=ce(t),s=n._u.get(e);if(s&&s.tu)return Te().add(s.key);{let r=Te();const i=n.iu.get(e);if(!i)return r;for(const a of i){const o=n.ru.get(a);r=r.unionWith(o.view.Wa)}return r}}function Kj(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y$.bind(null,e),e.nu.Q_=i$.bind(null,e.eventManager),e.nu.Tu=a$.bind(null,e.eventManager),e}function T$(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b$.bind(null,e),e}class Bm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$p(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return CG(this.persistence,new EG,e.initialUser,this.serializer)}Ru(e){return new Dj(dw.Ei,this.serializer)}Au(e){return new kG}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bm.provider={build:()=>new Bm};class E$ extends Bm{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){Ce(this.persistence.referenceDelegate instanceof Um,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new cG(s,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new Dj(s=>Um.Ei(s,n),this.serializer)}}class W0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>vA(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=w$.bind(null,this.syncEngine),await n$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r$}()}createDatastore(e){const n=$p(e.databaseInfo.databaseId),s=function(i){return new UG(i)}(e.databaseInfo);return function(i,a,o,l){return new HG(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,a,o){return new GG(s,r,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>vA(this.syncEngine,n,0),function(){return hA.C()?new hA:new MG}())}createSyncEngine(e,n){return function(r,i,a,o,l,u,h){const f=new u$(r,i,a,o,l,u);return h&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=ce(r);W($a,"RemoteStore shutting down."),i.aa.add(5),await eh(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}W0.provider={build:()=>new W0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,i){const a=ce(r),o={documents:i.map(f=>Lm(a.serializer,f))},l=await a.Wo("BatchGetDocuments",a.serializer.databaseId,Fe.emptyPath(),o,i.length),u=new Map;l.forEach(f=>{const m=$q(a.serializer,f);u.set(m.key.toString(),m)});const h=[];return i.forEach(f=>{const m=u.get(f.toString());Ce(!!m,55234,{key:f}),h.push(m)}),h}(this.datastore,e);return n.forEach(s=>this.recordVersion(s)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,s)=>{const r=te.fromPath(s);this.mutations.push(new yj(r,this.precondition(r)))}),await async function(s,r){const i=ce(s),a={writes:r.map(o=>Aj(i.serializer,o))};await i.Qo("Commit",i.serializer.databaseId,Fe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne(50498,{xu:e.constructor.name});n=re.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new K(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?pt.exists(!1):pt.updateTime(n):pt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new K(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(n)}return pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,n,s,r,i){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=r,this.deferred=i,this.Ou=s.maxAttempts,this.y_=new mw(this.asyncQueue,"transaction_retry")}Nu(){this.Ou-=1,this.Bu()}Bu(){this.y_.E_(async()=>{const e=new S$(this.datastore),n=this.Lu(e);n&&n.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(r=>{this.ku(r)}))}).catch(s=>{this.ku(s)})})}Lu(e){try{const n=this.updateFunction(e);return!Qd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ku(e){this.Ou>0&&this.qu(e)?(this.Ou-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bu(),Promise.resolve()))):this.deferred.reject(e)}qu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!vj(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="FirestoreClient";class C${constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Wt.UNAUTHENTICATED,this.clientId=BP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{W(Ki,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(W(Ki,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=xw(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function $y(t,e){t.asyncQueue.verifyOperationInProgress(),W(Ki,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Pj(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await R$(t);W(Ki,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>mA(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>mA(e.remoteStore,r)),t._onlineComponents=e}async function R$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Ki,"Using user provided OfflineComponentProvider");try{await $y(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;jl("Error using user provided cache. Falling back to memory cache: "+n),await $y(t,new Bm)}}else W(Ki,"Using default OfflineComponentProvider"),await $y(t,new E$(void 0));return t._offlineComponents}async function Rw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Ki,"Using user provided OnlineComponentProvider"),await xA(t,t._uninitializedComponentsProvider._online)):(W(Ki,"Using default OnlineComponentProvider"),await xA(t,new W0))),t._onlineComponents}function N$(t){return Rw(t).then(e=>e.syncEngine)}function I$(t){return Rw(t).then(e=>e.datastore)}async function zm(t){const e=await Rw(t),n=e.eventManager;return n.onListen=d$.bind(null,e.syncEngine),n.onUnlisten=m$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=h$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p$.bind(null,e.syncEngine),n}function D$(t,e,n={}){const s=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,u){const h=new Cw({next:m=>{h.yu(),a.enqueueAndForget(()=>_w(i,f));const p=m.docs.has(o);!p&&m.fromCache?u.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Ew(Fp(o.path),h,{includeMetadataChanges:!0,Fa:!0});return ww(i,f)}(await zm(t),t.asyncQueue,e,n,s)),s.promise}function P$(t,e,n={}){const s=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,u){const h=new Cw({next:m=>{h.yu(),a.enqueueAndForget(()=>_w(i,f)),m.fromCache&&l.source==="server"?u.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Ew(o,h,{includeMetadataChanges:!0,Fa:!0});return ww(i,f)}(await zm(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function j$(t,e,n,s){if(e===!0&&s===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _A(t){if(!te.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function TA(t){if(te.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wp(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="firestore.googleapis.com",EA=!0;class SA{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xj,this.ssl=EA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:EA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ij;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oG)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wj((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qp{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new UH;switch(s.type){case"firstParty":return new HH(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=wA.get(n);s&&(W("ComponentProvider","Removing Datastore"),wA.delete(n),s.terminate())}(this),Promise.resolve()}}function k$(t,e,n,s={}){var r;const i=(t=Jt(t,Qp))._getSettings(),a=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),o=`${e}:${n}`;i.host!==Xj&&i.host!==o&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},i),{host:o,ssl:!1,emulatorOptions:s});if(!jr(l,a)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Wt.MOCK_USER;else{u=K8(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Wt(f)}t._authCredentials=new FH(new UP(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class Ut{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Vi extends aa{constructor(e,n,s){super(e,n,Fp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new te(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function ts(t,e,...n){if(t=Xe(t),Qj("collection","path",e),t instanceof Qp){const s=Fe.fromString(e,...n);return TA(s),new Vi(t,null,s)}{if(!(t instanceof Ut||t instanceof Vi))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Fe.fromString(e,...n));return TA(s),new Vi(t.firestore,null,s)}}function Ae(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=BP.newId()),Qj("doc","path",e),t instanceof Qp){const s=Fe.fromString(e,...n);return _A(s),new Ut(t,null,new te(s))}{if(!(t instanceof Ut||t instanceof Vi))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Fe.fromString(e,...n));return _A(s),new Ut(t.firestore,t instanceof Vi?t.converter:null,new te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="AsyncQueue";class CA{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new mw(this,"async_queue_retry"),this.ju=()=>{const s=Gy();s&&W(AA,"Visibility state changed to "+s.visibilityState),this.y_.A_()},this.Hu=e;const n=Gy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=Gy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Us;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!uc(e))throw e;W(AA,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(s=>{throw this.Ku=s,this.Wu=!1,Or("INTERNAL UNHANDLED ERROR: ",RA(s)),s}).then(s=>(this.Wu=!1,s))));return this.Hu=n,n}enqueueAfterDelay(e,n,s){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const r=bw.createAndSchedule(this,e,n,s,i=>this.Xu(i));return this.Uu.push(r),r}Ju(){this.Ku&&ne(47125,{ec:RA(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function RA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class xs extends Qp{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new CA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CA(e),this._firestoreClient=void 0,await e}}}function M$(t,e){const n=typeof t=="object"?t:Hx(),s=typeof t=="string"?t:Pm,r=ro(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=$8("firestore");i&&k$(r,...i)}return r}function fc(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O$(t),t._firestoreClient}function O$(t){var e,n,s;const r=t._freezeSettings(),i=function(o,l,u,h){return new rq(o,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Wj(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new C$(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ya(Bt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ya(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=/^__.*__$/;class L${constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ia(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xd(e,this.data,n,this.fieldTransforms)}}class Zj{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ia(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Jj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{oc:t})}}class Zp{constructor(e,n,s,r,i,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Zp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ac({path:s,cc:!1});return r.lc(e),r}hc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ac({path:s,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Hm(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Jj(this.oc)&&V$.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class U${constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||$p(e)}dc(e,n,s,r=!1){return new Zp({oc:e,methodName:n,Ec:s,path:Vt.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pc(t){const e=t._freezeSettings(),n=$p(t._databaseId);return new U$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jp(t,e,n,s,r,i={}){const a=t.dc(i.merge||i.mergeFields?2:0,e,n,r);kw("Data must be an object, but it was:",a,s);const o=ek(s,a);let l,u;if(i.merge)l=new Rn(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Q0(e,f,n);if(!a.contains(m))throw new K(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);nk(h,m)||h.push(m)}l=new Rn(h),u=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=a.fieldTransforms;return new L$(new on(o),l,u)}class eg extends Xp{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function F$(t,e,n){return new Zp({oc:3,Ec:e.settings.Ec,methodName:t._methodName,cc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dw extends Xp{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=F$(this,e,!0),s=this.Ac.map(i=>gc(i,n)),r=new Vl(s);return new Iq(e.path,r)}isEqual(e){return e instanceof Dw&&jr(this.Ac,e.Ac)}}function Pw(t,e,n,s){const r=t.dc(1,e,n);kw("Data must be an object, but it was:",r,s);const i=[],a=on.empty();ra(s,(l,u)=>{const h=Mw(e,l,n);u=Xe(u);const f=r.hc(h);if(u instanceof eg)i.push(h);else{const m=gc(u,f);m!=null&&(i.push(h),a.set(h,m))}});const o=new Rn(i);return new Zj(a,o,r.fieldTransforms)}function jw(t,e,n,s,r,i){const a=t.dc(1,e,n),o=[Q0(e,s,n)],l=[r];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(Q0(e,i[m])),l.push(i[m+1]);const u=[],h=on.empty();for(let m=o.length-1;m>=0;--m)if(!nk(u,o[m])){const p=o[m];let E=l[m];E=Xe(E);const w=a.hc(p);if(E instanceof eg)u.push(p);else{const x=gc(E,w);x!=null&&(u.push(p),h.set(p,x))}}const f=new Rn(u);return new Zj(h,f,a.fieldTransforms)}function B$(t,e,n,s=!1){return gc(n,t.dc(s?4:3,e))}function gc(t,e){if(tk(t=Xe(t)))return kw("Unsupported field value:",e,t),ek(t,e);if(t instanceof Xp)return function(s,r){if(!Jj(r.oc))throw r.Tc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Tc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const o of s){let l=gc(o,r.Pc(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Xe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Cq(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=pe.fromDate(s);return{timestampValue:Vm(r.serializer,i)}}if(s instanceof pe){const i=new pe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vm(r.serializer,i)}}if(s instanceof Nw)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ya)return{bytesValue:_j(r.serializer,s._byteString)};if(s instanceof Ut){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cw(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Iw)return function(a,o){return{mapValue:{fields:{[WP]:{stringValue:QP},[jm]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Tc("VectorValues must only contain numeric values.");return aw(o.serializer,u)})}}}}}}(s,r);throw r.Tc(`Unsupported field value: ${Wp(s)}`)}(t,e)}function ek(t,e){const n={};return HP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(t,(s,r)=>{const i=gc(r,e.uc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function tk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pe||t instanceof Nw||t instanceof Ya||t instanceof Ut||t instanceof Xp||t instanceof Iw)}function kw(t,e,n){if(!tk(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Wp(n);throw s==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+s)}}function Q0(t,e,n){if((e=Xe(e))instanceof mc)return e._internalPath;if(typeof e=="string")return Mw(t,e);throw Hm("Field path arguments must be of type string or ",t,!1,void 0,n)}const z$=new RegExp("[~\\*/\\[\\]]");function Mw(t,e,n){if(e.search(z$)>=0)throw Hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mc(...e.split("."))._internalPath}catch{throw Hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hm(t,e,n,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${s}`),a&&(l+=` in document ${r}`),l+=")"),new K(U.INVALID_ARGUMENT,o+t+l)}function nk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H$ extends qm{data(){return super.data()}}function tg(t,e){return typeof e=="string"?Mw(t,e):e instanceof mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ow{}class rk extends Ow{}function Wi(t,e,...n){let s=[];e instanceof Ow&&s.push(e),s=s.concat(n),function(i){const a=i.filter(l=>l instanceof Vw).length,o=i.filter(l=>l instanceof ng).length;if(a>1||a>0&&o>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class ng extends rk{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ng(e,n,s)}_apply(e){const n=this._parse(e);return ik(e._query,n),new aa(e.firestore,e.converter,F0(e._query,n))}_parse(e){const n=pc(e.firestore);return function(i,a,o,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){DA(f,h);const E=[];for(const w of f)E.push(IA(l,i,w));m={arrayValue:{values:E}}}else m=IA(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||DA(f,h),m=B$(o,a,f,h==="in"||h==="not-in");return mt.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ys(t,e,n){const s=e,r=tg("where",t);return ng._create(r,s,n)}class Vw extends Ow{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vw(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:bs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const o=i.getFlattenedFilters();for(const l of o)ik(a,l),a=F0(a,l)}(e._query,n),new aa(e.firestore,e.converter,F0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lw extends rk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lw(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new od(i,a)}(e._query,this._field,this._direction);return new aa(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new dc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function q$(t,e="asc"){const n=e,s=tg("orderBy",t);return Lw._create(s,n)}function IA(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rj(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Fe.fromString(n));if(!te.isDocumentKey(s))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return q1(t,new te(s))}if(n instanceof Ut)return q1(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wp(n)}.`)}function DA(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ik(t,e){const n=function(r,i){for(const a of r)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ak{convertValue(e,n="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ra(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[jm].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(a=>dt(a.doubleValue));return new Iw(i)}convertGeoPoint(e){return new Nw(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Up(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(rd(e));default:return null}}convertTimestamp(e){const n=qi(e);return new pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Fe.fromString(e);Ce(Nj(s),9688,{name:e});const r=new id(s.get(1),s.get(3)),i=new te(s.popFirst(5));return r.isEqual(n)||Or(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class G$ extends ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uw extends qm{constructor(e,n,s,r,i,a){super(e,n,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(tg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Mf extends Uw{data(e={}){return super.data(e)}}class ok{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new zo(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Mf(this._firestore,this._userDataWriter,s.key,s,new zo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new Mf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new zo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Mf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new zo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:$$(o.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t){t=Jt(t,Ut);const e=Jt(t.firestore,xs);return D$(fc(e),t._key).then(n=>uk(e,t,n))}class rg extends ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Fl(t){t=Jt(t,aa);const e=Jt(t.firestore,xs),n=fc(e),s=new rg(e);return sk(t._query),P$(n,t._query).then(r=>new ok(e,s,t,r))}function lk(t,e,n){t=Jt(t,Ut);const s=Jt(t.firestore,xs),r=sg(t.converter,e,n);return nh(s,[Jp(pc(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,pt.none())])}function Lr(t,e,n,...s){t=Jt(t,Ut);const r=Jt(t.firestore,xs),i=pc(r);let a;return a=typeof(e=Xe(e))=="string"||e instanceof mc?jw(i,"updateDoc",t._key,e,n,s):Pw(i,"updateDoc",t._key,e),nh(r,[a.toMutation(t._key,pt.exists(!0))])}function ck(t){return nh(Jt(t.firestore,xs),[new Zd(t._key,pt.none())])}function X0(t,e){const n=Jt(t.firestore,xs),s=Ae(t),r=sg(t.converter,e);return nh(n,[Jp(pc(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,pt.exists(!1))]).then(()=>s)}function ig(t,...e){var n,s,r;t=Xe(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||NA(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(NA(e[a])){const f=e[a];e[a]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[a+1]=(s=f.error)===null||s===void 0?void 0:s.bind(f),e[a+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,u,h;if(t instanceof Ut)u=Jt(t.firestore,xs),h=Fp(t._key.path),l={next:f=>{e[a]&&e[a](uk(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Jt(t,aa);u=Jt(f.firestore,xs),h=f._query;const m=new rg(u);l={next:p=>{e[a]&&e[a](new ok(u,m,f,p))},error:e[a+1],complete:e[a+2]},sk(t._query)}return function(m,p,E,w){const x=new Cw(w),v=new Ew(p,x,E);return m.asyncQueue.enqueueAndForget(async()=>ww(await zm(m),v)),()=>{x.yu(),m.asyncQueue.enqueueAndForget(async()=>_w(await zm(m),v))}}(fc(u),h,o,l)}function nh(t,e){return function(s,r){const i=new Us;return s.asyncQueue.enqueueAndForget(async()=>g$(await N$(s),r,i)),i.promise}(fc(t),e)}function uk(t,e,n){const s=n.docs.get(e._key),r=new rg(t);return new Uw(t,r,e._key,s,new zo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pc(e)}set(e,n,s){this._verifyNotCommitted();const r=Ei(e,this._firestore),i=sg(r.converter,n,s),a=Jp(this._dataReader,"WriteBatch.set",r._key,i,r.converter!==null,s);return this._mutations.push(a.toMutation(r._key,pt.none())),this}update(e,n,s,...r){this._verifyNotCommitted();const i=Ei(e,this._firestore);let a;return a=typeof(n=Xe(n))=="string"||n instanceof mc?jw(this._dataReader,"WriteBatch.update",i._key,n,s,r):Pw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,pt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ei(e,this._firestore);return this._mutations=this._mutations.concat(new Zd(n._key,pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ei(t,e){if((t=Xe(t)).firestore!==e)throw new K(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=pc(e)}get(e){const n=Ei(e,this._firestore),s=new G$(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return ne(24041);const i=r[0];if(i.isFoundDocument())return new qm(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new qm(this._firestore,s,n._key,null,n.converter);throw ne(18433,{doc:i})})}set(e,n,s){const r=Ei(e,this._firestore),i=sg(r.converter,n,s),a=Jp(this._dataReader,"Transaction.set",r._key,i,r.converter!==null,s);return this._transaction.set(r._key,a),this}update(e,n,s,...r){const i=Ei(e,this._firestore);let a;return a=typeof(n=Xe(n))=="string"||n instanceof mc?jw(this._dataReader,"Transaction.update",i._key,n,s,r):Pw(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(e){const n=Ei(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q$ extends W${constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ei(e,this._firestore),s=new rg(this._firestore);return super.get(e).then(r=>new Uw(this._firestore,s,n._key,r._document,new zo(!1,!1),n.converter))}}function yc(t,e,n){t=Jt(t,xs);const s=Object.assign(Object.assign({},Y$),n);return function(i){if(i.maxAttempts<1)throw new K(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(i,a,o){const l=new Us;return i.asyncQueue.enqueueAndForget(async()=>{const u=await I$(i);new A$(i.asyncQueue,u,o,a,l).Nu()}),l.promise}(fc(t),r=>e(new Q$(t,r)),s)}function X$(...t){return new Dw("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){return fc(t=Jt(t,xs)),new K$(t,e=>nh(t,e))}(function(e,n=!0){(function(r){lc=r})(ac),Gs(new vs("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),o=new xs(new BH(s.getProvider("auth-internal")),new qH(a,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new id(u.options.projectId,h)}(a,r),a);return i=Object.assign({useFetchStreams:n},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Qn(P1,j1,e),Qn(P1,j1,"esm2017")})();const hk="@firebase/installations",Fw="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=1e4,mk=`w:${Fw}`,pk="FIS_v2",Z$="https://firebaseinstallations.googleapis.com/v1",J$=60*60*1e3,eY="installations",tY="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ka=new so(eY,tY,nY);function gk(t){return t instanceof Es&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk({projectId:t}){return`${Z$}/projects/${t}/installations`}function vk(t){return{token:t.token,requestStatus:2,expiresIn:rY(t.expiresIn),creationTime:Date.now()}}async function bk(t,e){const s=(await e.json()).error;return Ka.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function xk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function sY(t,{refreshToken:e}){const n=xk(t);return n.append("Authorization",iY(e)),n}async function wk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rY(t){return Number(t.replace("s","000"))}function iY(t){return`${pk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aY({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=yk(t),r=xk(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const a={fid:n,authVersion:pk,appId:t.appId,sdkVersion:mk},o={method:"POST",headers:r,body:JSON.stringify(a)},l=await wk(()=>fetch(s,o));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:vk(u.authToken)}}else throw await bk("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY=/^[cdef][\w-]{21}$/,Z0="";function cY(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=uY(t);return lY.test(n)?n:Z0}catch{return Z0}}function uY(t){return oY(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new Map;function Ek(t,e){const n=ag(t);Sk(n,e),dY(n,e)}function Sk(t,e){const n=Tk.get(t);if(n)for(const s of n)s(e)}function dY(t,e){const n=hY();n&&n.postMessage({key:t,fid:e}),fY()}let _a=null;function hY(){return!_a&&"BroadcastChannel"in self&&(_a=new BroadcastChannel("[Firebase] FID Change"),_a.onmessage=t=>{Sk(t.data.key,t.data.fid)}),_a}function fY(){Tk.size===0&&_a&&(_a.close(),_a=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY="firebase-installations-database",pY=1,Wa="firebase-installations-store";let Yy=null;function Bw(){return Yy||(Yy=WD(mY,pY,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wa)}}})),Yy}async function Gm(t,e){const n=ag(t),r=(await Bw()).transaction(Wa,"readwrite"),i=r.objectStore(Wa),a=await i.get(n);return await i.put(e,n),await r.done,(!a||a.fid!==e.fid)&&Ek(t,e.fid),e}async function Ak(t){const e=ag(t),s=(await Bw()).transaction(Wa,"readwrite");await s.objectStore(Wa).delete(e),await s.done}async function og(t,e){const n=ag(t),r=(await Bw()).transaction(Wa,"readwrite"),i=r.objectStore(Wa),a=await i.get(n),o=e(a);return o===void 0?await i.delete(n):await i.put(o,n),await r.done,o&&(!a||a.fid!==o.fid)&&Ek(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(t){let e;const n=await og(t.appConfig,s=>{const r=gY(s),i=yY(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===Z0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function gY(t){const e=t||{fid:cY(),registrationStatus:0};return Ck(e)}function yY(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ka.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=vY(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:bY(t)}:{installationEntry:e}}async function vY(t,e){try{const n=await aY(t,e);return Gm(t.appConfig,n)}catch(n){throw gk(n)&&n.customData.serverCode===409?await Ak(t.appConfig):await Gm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function bY(t){let e=await PA(t.appConfig);for(;e.registrationStatus===1;)await _k(100),e=await PA(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await zw(t);return s||n}return e}function PA(t){return og(t,e=>{if(!e)throw Ka.create("installation-not-found");return Ck(e)})}function Ck(t){return xY(t)?{fid:t.fid,registrationStatus:0}:t}function xY(t){return t.registrationStatus===1&&t.registrationTime+fk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wY({appConfig:t,heartbeatServiceProvider:e},n){const s=_Y(t,n),r=sY(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const a={installation:{sdkVersion:mk,appId:t.appId}},o={method:"POST",headers:r,body:JSON.stringify(a)},l=await wk(()=>fetch(s,o));if(l.ok){const u=await l.json();return vk(u)}else throw await bk("Generate Auth Token",l)}function _Y(t,{fid:e}){return`${yk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(t,e=!1){let n;const s=await og(t.appConfig,i=>{if(!Rk(i))throw Ka.create("not-registered");const a=i.authToken;if(!e&&SY(a))return i;if(a.requestStatus===1)return n=TY(t,e),i;{if(!navigator.onLine)throw Ka.create("app-offline");const o=CY(i);return n=EY(t,o),o}});return n?await n:s.authToken}async function TY(t,e){let n=await jA(t.appConfig);for(;n.authToken.requestStatus===1;)await _k(100),n=await jA(t.appConfig);const s=n.authToken;return s.requestStatus===0?Hw(t,e):s}function jA(t){return og(t,e=>{if(!Rk(e))throw Ka.create("not-registered");const n=e.authToken;return RY(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function EY(t,e){try{const n=await wY(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await Gm(t.appConfig,s),n}catch(n){if(gk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Ak(t.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Gm(t.appConfig,s)}throw n}}function Rk(t){return t!==void 0&&t.registrationStatus===2}function SY(t){return t.requestStatus===2&&!AY(t)}function AY(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+J$}function CY(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function RY(t){return t.requestStatus===1&&t.requestTime+fk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NY(t){const e=t,{installationEntry:n,registrationPromise:s}=await zw(e);return s?s.catch(console.error):Hw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IY(t,e=!1){const n=t;return await DY(n),(await Hw(n,e)).token}async function DY(t){const{registrationPromise:e}=await zw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PY(t){if(!t||!t.options)throw Ky("App Configuration");if(!t.name)throw Ky("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ky(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ky(t){return Ka.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="installations",jY="installations-internal",kY=t=>{const e=t.getProvider("app").getImmediate(),n=PY(e),s=ro(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},MY=t=>{const e=t.getProvider("app").getImmediate(),n=ro(e,Nk).getImmediate();return{getId:()=>NY(n),getToken:r=>IY(n,r)}};function OY(){Gs(new vs(Nk,kY,"PUBLIC")),Gs(new vs(jY,MY,"PRIVATE"))}OY();Qn(hk,Fw);Qn(hk,Fw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="analytics",VY="firebase_id",LY="origin",UY=60*1e3,FY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new kp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mn=new so("analytics","Analytics",BY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(t){if(!t.startsWith(qw)){const e=Mn.create("invalid-gtag-resource",{gtagURL:t});return yn.warn(e.message),""}return t}function Ik(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function HY(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function qY(t,e){const n=HY("firebase-js-sdk-policy",{createScriptURL:zY}),s=document.createElement("script"),r=`${qw}?l=${t}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function GY(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function $Y(t,e,n,s,r,i){const a=s[r];try{if(a)await e[a];else{const l=(await Ik(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(o){yn.error(o)}t("config",r,i)}async function YY(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);const o=await Ik(n);for(const l of a){const u=o.find(f=>f.measurementId===l),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){yn.error(i)}}function KY(t,e,n,s){async function r(i,...a){try{if(i==="event"){const[o,l]=a;await YY(t,e,n,o,l)}else if(i==="config"){const[o,l]=a;await $Y(t,e,n,s,o,l)}else if(i==="consent"){const[o,l]=a;t("consent",o,l)}else if(i==="get"){const[o,l,u]=a;t("get",o,l,u)}else if(i==="set"){const[o]=a;t("set",o)}else t(i,...a)}catch(o){yn.error(o)}}return r}function WY(t,e,n,s,r){let i=function(...a){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=KY(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function QY(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(qw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY=30,ZY=1e3;class JY{constructor(e={},n=ZY){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Dk=new JY;function eK(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function tK(t){var e;const{appId:n,apiKey:s}=t,r={method:"GET",headers:eK(s)},i=FY.replace("{app-id}",n),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let o="";try{const l=await a.json();!((e=l.error)===null||e===void 0)&&e.message&&(o=l.error.message)}catch{}throw Mn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function nK(t,e=Dk,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw Mn.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Mn.create("no-api-key")}const a=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new iK;return setTimeout(async()=>{o.abort()},UY),Pk({appId:s,apiKey:r,measurementId:i},a,o,e)}async function Pk(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=Dk){var i;const{appId:a,measurementId:o}=t;try{await sK(s,e)}catch(l){if(o)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:a,measurementId:o};throw l}try{const l=await tK(t);return r.deleteThrottleMetadata(a),l}catch(l){const u=l;if(!rK(u)){if(r.deleteThrottleMetadata(a),o)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:o};throw l}const h=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?s1(n,r.intervalMillis,XY):s1(n,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(a,f),yn.debug(`Calling attemptFetch again in ${h} millis`),Pk(t,f,s,r)}}function sK(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(Mn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rK(t){if(!(t instanceof Es)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class iK{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function aK(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,a=Object.assign(Object.assign({},s),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oK(){if(GD())try{await $D()}catch(t){return yn.warn(Mn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return yn.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lK(t,e,n,s,r,i,a){var o;const l=nK(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>yn.error(p)),e.push(l);const u=oK().then(p=>{if(p)return s.getId()}),[h,f]=await Promise.all([l,u]);QY(i)||qY(i,h.measurementId),r("js",new Date);const m=(o=a==null?void 0:a.config)!==null&&o!==void 0?o:{};return m[LY]="firebase",m.update=!0,f!=null&&(m[VY]=f),r("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(e){this.app=e}_delete(){return delete Au[this.app.options.appId],Promise.resolve()}}let Au={},kA=[];const MA={};let Wy="dataLayer",uK="gtag",OA,jk,VA=!1;function dK(){const t=[];if(qD()&&t.push("This is a browser extension environment."),tB()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=Mn.create("invalid-analytics-context",{errorInfo:e});yn.warn(n.message)}}function hK(t,e,n){dK();const s=t.options.appId;if(!s)throw Mn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mn.create("no-api-key");if(Au[s]!=null)throw Mn.create("already-exists",{id:s});if(!VA){GY(Wy);const{wrappedGtag:i,gtagCore:a}=WY(Au,kA,MA,Wy,uK);jk=i,OA=a,VA=!0}return Au[s]=lK(t,kA,MA,e,OA,Wy,n),new cK(t)}function fK(t=Hx()){t=Xe(t);const e=ro(t,$m);return e.isInitialized()?e.getImmediate():mK(t)}function mK(t,e={}){const n=ro(t,$m);if(n.isInitialized()){const r=n.getImmediate();if(jr(e,n.getOptions()))return r;throw Mn.create("already-initialized")}return n.initialize({options:e})}function pK(t,e,n,s){t=Xe(t),aK(jk,Au[t.app.options.appId],e,n,s).catch(r=>yn.error(r))}const LA="@firebase/analytics",UA="0.10.12";function gK(){Gs(new vs($m,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return hK(s,r,n)},"PUBLIC")),Gs(new vs("analytics-internal",t,"PRIVATE")),Qn(LA,UA),Qn(LA,UA,"esm2017");function t(e){try{const n=e.getProvider($m).getImmediate();return{logEvent:(s,r,i)=>pK(n,s,r,i)}}catch(n){throw Mn.create("interop-component-reg-failed",{reason:n})}}}gK();const yK={apiKey:"AIzaSyC7yz9uNDKfCNwx0qPEgJ8EOBJHVp1R_o8",authDomain:"lifepath-3ff8f.firebaseapp.com",projectId:"lifepath-3ff8f",storageBucket:"lifepath-3ff8f.firebasestorage.app",messagingSenderId:"185300197020",appId:"1:185300197020:web:d3c7701675bc4972fbd759",measurementId:"G-N5CCD171WX"},Gw=QD(yK),sh=VH(Gw),se=M$(Gw);let vK;try{vK=fK(Gw)}catch(t){console.log("Analytics failed to initialize:",t)}const bK=async(t,e,n,s,r)=>{console.log("Creating live session:",{classroomId:t,scenarioId:e,teacherId:n});try{const i={classroomId:t,scenarioId:e,teacherId:n,teacherName:s,scenarioTitle:r,status:"active",currentSceneId:"",currentSceneIndex:0,participants:[],currentChoices:{},votes:{},createdAt:pe.now(),lastUpdated:pe.now()},a=await X0(ts(se,"sessions"),i);console.log("Session created with ID:",a.id);const o=Ae(se,"classrooms",t);await Lr(o,{activeSessionId:a.id,activeScenario:r,lastActivity:pe.now()}),console.log("Classroom updated with active session");const l=await Ks(o);if(l.exists()){const u=l.data();if(u.students&&u.students.length>0){console.log("Sending notifications to students:",u.students.length);const h=u.students.map(async f=>{try{const m={type:"live_session_started",sessionId:a.id,teacherName:s,scenarioTitle:r,classroomId:t,studentId:f.id,createdAt:pe.now(),read:!1};await X0(ts(se,"notifications"),m),console.log(`Notification sent to student ${f.id}`)}catch(m){console.error(`Error sending notification to student ${f.id}:`,m)}});await Promise.all(h)}}return a.id}catch(i){throw console.error("Error creating live session:",i),i}},xK=async(t,e,n)=>{try{console.log("Ending live session:",t),await yc(se,async l=>{const u=Ae(se,"sessions",t),h=Ae(se,"classrooms",e);if(!(await l.get(u)).exists())throw new Error("Session not found");const m={status:"ended",endedAt:pe.now(),lastUpdated:pe.now()};n&&(m.resultPayload=n),l.update(u,m),l.update(h,{activeSessionId:null,activeScenario:null,currentScene:null,lastActivity:pe.now()})});const s=Wi(ts(se,"sessionParticipants"),Ys("sessionId","==",t)),i=[...(await Fl(s)).docs.map(l=>Lr(l.ref,{isActive:!1}))],a=Wi(ts(se,"notifications"),Ys("sessionId","==",t)),o=await Fl(a);i.push(...o.docs.map(l=>ck(l.ref))),await Promise.all(i),console.log("Session cleanup completed")}catch(s){throw console.error("Error ending live session:",s),s}},kk=async(t,e,n)=>{try{console.log("Advancing session to scene:",e,"index:",n),await yc(se,async s=>{const r=Ae(se,"sessions",t),i=await s.get(r);if(!i.exists())throw new Error("Session not found");if(i.data().status!=="active")throw new Error("Session is not active");const o={currentSceneId:e,currentChoices:{},lastUpdated:pe.now()};n!==void 0&&(o.currentSceneIndex=n),s.update(r,o)}),console.log("Scene advanced successfully")}catch(s){throw console.error("Error advancing live session:",s),s}},Mk=async(t,e,n)=>{try{console.log("Student attempting to join session:",t);const s=await yc(se,async i=>{const a=Ae(se,"sessions",t),o=await i.get(a);if(!o.exists())throw new Error("Session not found");const l=o.data();if(l.status!=="active")throw new Error("Session is not active");return l.participants.includes(e)||i.update(a,{participants:X$(e),lastUpdated:pe.now()}),l}),r={sessionId:t,studentId:e,studentName:n,joinedAt:pe.now(),isActive:!0,lastActivity:pe.now()};await lk(Ae(se,"sessionParticipants",`${t}_${e}`),r);try{await Lr(Ae(se,"notifications",`${t}_${e}`),{read:!0})}catch(i){console.log("No notification to update:",i)}return{id:t,...s}}catch(s){throw console.error("Error joining live session:",s),s}},Ok=async(t,e,n,s)=>{try{console.log("Submitting choice for session:",t,"choice:",n),await yc(se,async r=>{const i=Ae(se,"sessions",t),a=await r.get(i);if(!a.exists())throw new Error("Session not found");const o=a.data();if(o.status!=="active")throw new Error("Session is not active");const l=o.currentChoices||{};l[e]=n,r.update(i,{currentChoices:l,lastUpdated:pe.now()});const u=Ae(se,"sessionParticipants",`${t}_${e}`);r.update(u,{currentChoice:n,lastActivity:pe.now()})}),console.log("Choice submitted successfully")}catch(r){throw console.error("Error submitting live choice:",r),r}},lg=async t=>{try{const e=await Ks(Ae(se,"classrooms",t));if(!e.exists())return null;const n=e.data();if(!n.activeSessionId)return null;const s=await Ks(Ae(se,"sessions",n.activeSessionId));if(!s.exists())return await Lr(Ae(se,"classrooms",t),{activeSessionId:null,activeScenario:null,currentScene:null}),null;const r=s.data();return r.status!=="active"?(await Lr(Ae(se,"classrooms",t),{activeSessionId:null,activeScenario:null,currentScene:null}),null):{id:s.id,...r}}catch(e){return console.error("Error getting active session:",e),null}},wK=(t,e)=>{const n=Wi(ts(se,"notifications"),Ys("studentId","==",t),Ys("read","==",!1),q$("createdAt","desc"));return ig(n,s=>{const r=s.docs.map(i=>({id:i.id,...i.data()}));e(r)})},cd=t=>t instanceof Date?t:t.toDate(),_K=async(t,e)=>w7(sh,t,e),TK=async(t,e)=>_7(sh,t,e),EK=async()=>A7(sh),SK=async(t,e)=>{const s={xp:0,level:1,completedScenarios:[],badges:[],history:[],metrics:{health:0,money:0,happiness:0,knowledge:0,relationships:0},classrooms:[],createdAt:pe.now(),...e};return lk(Ae(se,"users",t),s)},AK=async t=>{const e=await Ks(Ae(se,"users",t));return e.exists()?e.data():null},CK=async(t,e)=>Lr(Ae(se,"users",t),e),RK=async(t,e,n,s,r)=>{try{const i=await Ks(Ae(se,"users",t));if(!i.exists())throw new Error("User  not found");const a=i.data(),o=a.history||[],l={scenarioId:e,scenarioTitle:n,startedAt:s.length>0?s[0].timestamp:pe.now(),completedAt:pe.now(),choices:s,finalMetrics:r},u=[...o,l],h=a.completedScenarios||[];return h.includes(e)||h.push(e),await Lr(Ae(se,"users",t),{history:u,completedScenarios:h,metrics:r,xp:(a.xp||0)+50}),l}catch(i){throw console.error("Error saving scenario history:",i),i}},NK=async(t,e,n)=>{try{const s=await Ks(Ae(se,"users",t)),r=s.exists()&&s.data().displayName||"Teacher",i=MK(),a={name:e,description:n||"",teacherId:t,teacherName:r,students:[],members:[],activeScenario:null,currentScene:null,createdAt:pe.now(),classCode:i,isActive:!0,activeSessionId:null},o=await X0(ts(se,"classrooms"),a),l=Ae(se,"users",t);if(s.exists()){const h=s.data().classrooms||[];await Lr(l,{classrooms:[...h,o.id]})}return{id:o.id,...a}}catch(s){throw console.error("Error creating classroom:",s),s}},Vk=async t=>{const e=await Ks(Ae(se,"classrooms",t));return e.exists()?{id:e.id,...e.data()}:null},IK=async t=>{try{const e=Wi(ts(se,"classrooms"),Ys("classCode","==",t)),n=await Fl(e);if(n.empty)return null;const s=n.docs[0];return{id:s.id,...s.data()}}catch(e){throw console.error("Error getting classroom by code:",e),e}},Lk=async t=>{try{let e;return t?e=Wi(ts(se,"classrooms"),Ys("teacherId","==",t)):e=ts(se,"classrooms"),(await Fl(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error getting classrooms:",e),[]}},cg=async(t,e)=>{try{if(e==="teacher")return Lk(t);const n=await Ks(Ae(se,"users",t));if(!n.exists())return[];const r=n.data().classrooms||[];if(r.length===0)return[];const i=r.map(o=>Vk(o));return(await Promise.all(i)).filter(Boolean)}catch(n){return console.error("Error getting user classrooms:",n),[]}},DK=async(t,e)=>{console.log("Starting classroom deletion:",t);try{const n=Ae(se,"classrooms",t),s=await Ks(n);if(!s.exists())throw new Error("Classroom not found");const r=s.data();if(r.teacherId!==e)throw new Error("Unauthorized: Only the teacher can delete this classroom");console.log("Classroom data:",r);const i=dk(se);if(i.delete(n),r.classCode){const a=Ae(se,"classCodes",r.classCode);i.delete(a)}if(r.activeSessionId){const a=Ae(se,"sessions",r.activeSessionId);i.delete(a)}if(await i.commit(),console.log("Batch delete completed"),r.students&&r.students.length>0){console.log("Cleaning up student profiles:",r.students.length);const a=r.students.map(async o=>{try{const l=Ae(se,"users",o.id),u=await Ks(l);if(u.exists()){const m=(u.data().classrooms||[]).filter(p=>p!==t);await Lr(l,{classrooms:m}),console.log(`Updated student ${o.id} classrooms`)}}catch(l){console.error(`Error updating student ${o.id}:`,l)}});await Promise.all(a)}try{const a=Wi(ts(se,"notifications"),Ys("classroomId","==",t)),l=(await Fl(a)).docs.map(u=>ck(u.ref));await Promise.all(l),console.log("Cleaned up notifications")}catch(a){console.error("Error cleaning up notifications:",a)}console.log("Classroom deletion completed successfully")}catch(n){throw console.error("Error in deleteClassroom:",n),n}},PK=async(t,e)=>{try{console.log(`Removing student ${e} from classroom ${t}`),await yc(se,async n=>{var m,p;const s=Ae(se,"classrooms",t),r=Ae(se,"users",e),i=await n.get(s),a=await n.get(r);if(!i.exists())throw new Error("Classroom not found");const o=i.data();let l=null,u=null;o.activeSessionId&&(l=Ae(se,"sessions",o.activeSessionId),u=await n.get(l));const h=((m=o.students)==null?void 0:m.filter(E=>E.id!==e))||[],f=((p=o.members)==null?void 0:p.filter(E=>E!==e))||[];if(n.update(s,{students:h,members:f}),l&&u&&u.exists()){const w=u.data().participants.filter(x=>x!==e);n.update(l,{participants:w,lastUpdated:pe.now()})}if(a.exists()){const x=(a.data().classrooms||[]).filter(v=>v!==t);n.update(r,{classrooms:x})}});try{const n=Wi(ts(se,"sessionParticipants"),Ys("studentId","==",e)),s=await Fl(n),r=dk(se);s.docs.forEach(i=>{r.update(i.ref,{isActive:!1})}),await r.commit()}catch(n){console.log("No participant records to clean up:",n)}return console.log("Student removal completed successfully"),!0}catch(n){throw console.error("Error removing student from classroom:",n),n}},jK=async(t,e,n)=>{try{console.log(`Student ${e} attempting to join classroom ${t}`);const s=await yc(se,async i=>{const a=Ae(se,"classrooms",t),o=Ae(se,"users",e),l=await i.get(a),u=await i.get(o);if(!l.exists())throw new Error("Classroom not found");if(!u.exists())throw new Error("User  not found");const h=l.data(),f=u.data(),m=h.students||[],p=h.members||[],E=f.classrooms||[],w=m.findIndex(P=>P.id===e),x=p.includes(e),v=E.includes(t);let b=!1;const _=[...m],C=[...p];if(w===-1){const P={id:e,name:n,joinedAt:pe.now()};_.push(P),b=!0}if(x||(C.push(e),b=!0),b&&i.update(a,{students:_,members:C}),!v){const P=[...E,t];i.update(o,{classrooms:P})}return h});return await Vk(t)}catch(s){throw console.error("Error joining classroom:",s),s}},kK=async(t,e,n)=>{try{console.log(`Student ${e} attempting to join by code: ${t}`);const s=await IK(t);if(!s||!s.id)throw new Error("Invalid classroom code");return await jK(s.id,e,n)}catch(s){throw console.error("Error joining classroom by code:",s),s}},MK=()=>{const t="LIFE",e=Math.floor(1e3+Math.random()*9e3);return`${t}-${e}`},$w=(t,e)=>ig(Ae(se,"classrooms",t),s=>{s.exists()&&e({id:s.id,...s.data()})}),Uk=(t,e)=>ig(Ae(se,"sessions",t),n=>{n.exists()&&e({id:n.id,...n.data()})}),OK=(t,e)=>{const n=Wi(ts(se,"sessionParticipants"),Ys("sessionId","==",t),Ys("isActive","==",!0));return ig(n,s=>{const r=s.docs.map(i=>i.data());e(r)})},VK=()=>{const t=new mr;return $7(sh,t)},Fk=y.createContext(void 0),LK=({children:t})=>{const[e,n]=y.useState(null),[s,r]=y.useState(null),[i,a]=y.useState(!0),{toast:o}=er(),l=x=>({username:x.username||x.displayName||"",email:x.email||"",role:x.role||null,xp:x.xp||0,level:x.level||1,completedScenarios:x.completedScenarios||[],badges:x.badges||[],classrooms:x.classrooms||[],history:x.history||[],id:x.id||"",displayName:x.displayName||x.username||""}),u=async x=>{const v=await AK(x);return v?l({...v,id:x}):null},h=async(x,v)=>await SK(x,v);y.useEffect(()=>S7(sh,async v=>{if(n(v),v)try{const b=await u(v.uid);r(b)}catch(b){console.error("Error fetching user profile:",b)}else r(null);a(!1)}),[]);const w={currentUser:e,userProfile:s,isLoading:i,login:async(x,v)=>{try{a(!0);const{user:b}=await TK(x,v),_=await u(b.uid);r(_),o({title:"Login successful",description:`Welcome back, ${(_==null?void 0:_.displayName)||""}!`})}catch(b){throw o({title:"Login failed",description:b.message||"Please check your credentials",variant:"destructive"}),b}finally{a(!1)}},signup:async(x,v,b,_)=>{try{a(!0);const{user:C}=await _K(x,v),P={username:b,email:x,role:_,xp:0,level:1,completedScenarios:[],badges:[],classrooms:[],history:[],id:C.uid,displayName:b};await h(C.uid,P),r(P),o({title:"Account created",description:`Welcome to LifePath, ${b}!`})}catch(C){throw o({title:"Signup failed",description:C.message||"Please try again later",variant:"destructive"}),C}finally{a(!1)}},logout:async()=>{try{a(!0),await EK(),r(null),o({title:"Logged out",description:"You have been successfully logged out"})}catch(x){throw o({title:"Logout failed",description:x.message||"Please try again",variant:"destructive"}),x}finally{a(!1)}},refreshUserProfile:async()=>{if(e)try{const x=await u(e.uid);r(x)}catch(x){console.error("Error refreshing user profile:",x)}},getUserProfile:u,createUserProfile:h};return c.jsx(Fk.Provider,{value:w,children:t})},tr=()=>{const t=y.useContext(Fk);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},UK={health:0,money:0,happiness:0,knowledge:0,relationships:0},FA={currentScenario:null,currentScene:null,metrics:UK,history:[]},Bk=y.createContext(void 0),FK=({children:t})=>{const[e,n]=y.useState(FA),[s,r]=y.useState(!1),[i,a]=y.useState("individual"),[o,l]=y.useState("student"),[u,h]=y.useState(null),[f,m]=y.useState(!1),[p,E]=y.useState(null),[w,x]=y.useState({}),[v,b]=y.useState(!1),[_,C]=y.useState(!0),[P,M]=y.useState(!1),[A,S]=y.useState([]),[N,R]=y.useState(!1),{toast:j}=er(),{userProfile:k,currentUser:I,refreshUserProfile:H}=tr();y.useEffect(()=>{k!=null&&k.role?l(k.role):l("guest")},[k]),y.useEffect(()=>{(async()=>{if(!(!I||!k))try{const Z=await cg(I.uid,k.role||"student");M(Z.length>0),Z.length>0&&!u&&h(Z[0].id)}catch(Z){console.error("Error checking classroom status:",Z)}})()},[I,k,u,h]),y.useEffect(()=>{o==="student"&&!P&&i==="classroom"&&(a("individual"),u||j({title:"Classroom Required",description:"You need to join a classroom before using classroom mode."}))},[P,i,o,u,j]);const $=ue=>{const Z=JS.find(sr=>sr.id===ue);if(!Z){j({title:"Error",description:"Scenario not found",variant:"destructive"});return}const je=Z.scenes.find(sr=>sr.id==="start");if(!je){j({title:"Error",description:"Starting scene not found",variant:"destructive"});return}if(i==="classroom"){if(o==="student"&&!u){j({title:"Classroom Required",description:"Please join a classroom before starting a scenario in classroom mode.",variant:"destructive"});return}if(o==="teacher"&&!u){j({title:"Classroom Required",description:"Please create a classroom before starting a scenario in classroom mode.",variant:"destructive"});return}}R(!0);const vt={...Z.initialMetrics};S([]),n({currentScenario:Z,currentScene:je,metrics:vt,history:[]}),r(!0),m(!1),b(!1),x({}),i==="classroom"&&j({title:"Classroom Mode Active",description:o==="teacher"?"You're leading this scenario. Students will follow your progress.":"You're participating in a classroom activity."})},L=ue=>{if(!e.currentScene||!e.currentScenario)return;const Z=e.currentScene.choices.find(Ze=>Ze.id===ue);if(!Z){j({title:"Error",description:"Choice not found",variant:"destructive"});return}if(_&&!f&&Math.random()<.5){const Ze=["Pause. Why did you choose that option?","Would your real self make the same choice?","How does this choice align with your values?","What consequences do you think this will have?","Is this what you would do in real life?"];E(Ze[Math.floor(Math.random()*Ze.length)]),m(!0);return}if(i==="classroom"&&o==="teacher"&&!v){const Ze={...w};Ze[ue]=(Ze[ue]||0)+1,x(Ze),b(!0),j({title:"Votes collected",description:"You can now discuss the results with your class."});return}const je={...e.metrics};Z.metricChanges&&Object.entries(Z.metricChanges).forEach(([Ze,Un])=>{const ss=Ze;je.hasOwnProperty(ss)&&typeof Un=="number"&&(je[ss]=Math.max(0,Math.min(100,je[ss]+Un)))}),console.log("Updated metrics:",je);const vt=e.currentScenario.scenes.find(Ze=>Ze.id===Z.nextSceneId);if(!vt){j({title:"Error",description:"Next scene not found",variant:"destructive"});return}const sr={sceneId:e.currentScene.id,choiceId:ue,metricChanges:Z.metricChanges};let Ln=null;I&&(Ln={sceneId:e.currentScene.id,choiceId:Z.id,choiceText:Z.text,timestamp:pe.now(),metricChanges:Z.metricChanges},S(Ze=>[...Ze,Ln]));const oo={...e,currentScene:vt,metrics:je,history:[...e.history,sr]};if(n(oo),I&&i==="individual"&&CK(I.uid,{metrics:je}).catch(Ze=>{console.error("Error updating user metrics:",Ze)}),(vt.isEndScene||vt.isEnding)&&I&&e.currentScenario&&Ln){const Ze=[...A,Ln];RK(I.uid,e.currentScenario.id,e.currentScenario.title,Ze,je).then(()=>{console.log("Scenario history saved successfully"),j({title:"Scenario Completed",description:"Your choices have been saved to your profile."}),setTimeout(()=>{H()},1e3)}).catch(Un=>{console.error("Error saving scenario history:",Un),j({title:"Save Error",description:"Failed to save your progress. Please check your connection.",variant:"destructive"})})}m(!1),b(!1),x({})},G=()=>{n(FA),r(!1),m(!1),b(!1),x({}),S([]),R(!1)},q=ue=>{if(i==="classroom"&&e.currentScene){if(o==="student"&&!u){j({title:"Classroom Required",description:"Please join a classroom before voting.",variant:"destructive"});return}const Z={...w};Z[ue]=(Z[ue]||0)+1,x(Z),j({title:"Vote submitted",description:"Waiting for other students to vote."})}},X=()=>{C(!_),j({title:`Mirror Moments ${_?"Disabled":"Enabled"}`,description:_?"You won't receive reflection prompts during gameplay.":"You'll now receive reflection prompts during gameplay."})},Q=ue=>{if(!e.currentScenario)return;const Z=e.currentScenario.scenes.find(je=>je.id===ue);Z&&n(je=>({...je,currentScene:Z}))},le=ue=>{if(N){j({title:"Mode Locked",description:"Cannot change mode while a scenario is active.",variant:"destructive"});return}if(ue==="classroom"&&o==="guest"){j({title:"Login Required",description:"Please sign up or login to use classroom mode.",variant:"destructive"});return}a(ue)};return c.jsx(Bk.Provider,{value:{gameState:e,scenarios:JS,startScenario:$,makeChoice:L,resetGame:G,isGameActive:s,gameMode:i,setGameMode:le,userRole:o,setUserRole:l,classroomId:u,setClassroomId:h,showMirrorMoment:f,setShowMirrorMoment:m,currentMirrorQuestion:p,classroomVotes:w,submitVote:q,revealVotes:v,setRevealVotes:b,toggleMirrorMoments:X,mirrorMomentsEnabled:_,hasJoinedClassroom:P,setCurrentScene:Q,isModeLocked:N},children:t})},zr=()=>{const t=y.useContext(Bk);if(t===void 0)throw new Error("useGameContext must be used within a GameProvider");return t},BA=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zA=dD,Yw=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return zA(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=e,a=Object.keys(r).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const m=BA(h)||BA(f);return r[u][m]}),o=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(E=>{let[w,x]=E;return Array.isArray(x)?x.includes({...i,...o}[w]):{...i,...o}[w]===x})?[...u,f,m]:u},[]);return zA(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},Kw=Yw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=y.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},i)=>{const a=s?S6:"button";return c.jsx(a,{className:me(Kw({variant:e,size:n,className:t})),ref:i,...r})});ee.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zk=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...o},l)=>y.createElement("svg",{ref:l,...zK,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:zk("lucide",r),...o},[...a.map(([u,h])=>y.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(t,e)=>{const n=y.forwardRef(({className:s,...r},i)=>y.createElement(HK,{ref:i,iconNode:e,className:zk(`lucide-${BK(t)}`,s),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=J("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=J("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=J("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=J("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=J("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=J("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=J("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=J("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=J("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=J("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=J("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=J("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=J("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=J("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=J("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=J("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=J("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=J("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=J("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=J("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=J("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=J("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=J("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=J("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=J("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=J("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=J("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=J("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=J("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=J("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=J("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=J("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=J("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=J("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),fW=()=>{const{isGameActive:t,resetGame:e,gameMode:n,setGameMode:s,userRole:r}=zr(),{userProfile:i}=tr();return c.jsx("header",{className:"border-b border-white/10 bg-indigo-900/50 backdrop-blur-md shadow-md sticky top-0 z-10",children:c.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[c.jsxs(yo,{to:"/",className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx(Gk,{className:"h-6 w-6 text-indigo-300"})}),c.jsx("span",{className:"font-bold text-xl text-white ml-1",children:"LifePath"})]}),c.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[!t&&c.jsxs(c.Fragment,{children:[c.jsx(ee,{variant:"ghost",size:"sm",asChild:!0,className:"rounded-xl text-white hover:bg-white/10",children:c.jsxs(yo,{to:"/",className:"flex items-center gap-1.5",children:[c.jsx(Yk,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Home"})]})}),r==="teacher"&&c.jsx(ee,{variant:"ghost",size:"sm",asChild:!0,className:"rounded-xl text-white hover:bg-white/10",children:c.jsxs(yo,{to:"/teacher",className:"flex items-center gap-1.5",children:[c.jsx(fs,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Teacher Dashboard"}),c.jsx("span",{className:"inline md:hidden",children:"Dashboard"})]})}),n==="classroom"?c.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>s("individual"),className:"rounded-xl text-white hover:bg-white/10",children:[c.jsx(St,{className:"h-4 w-4 text-indigo-300"}),c.jsx("span",{className:"hidden md:inline",children:"Classroom"})]}):c.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>s("classroom"),className:"rounded-xl text-white hover:bg-white/10",children:[c.jsx(_r,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Individual"})]}),c.jsx(ee,{variant:"ghost",size:"sm",asChild:!0,className:"rounded-xl text-white hover:bg-white/10",children:c.jsxs(yo,{to:"/about",className:"flex items-center gap-1.5",children:[c.jsx(Kk,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"About"})]})}),i?c.jsx(ee,{variant:"outline",size:"sm",asChild:!0,className:"rounded-xl border-indigo-500/30 bg-indigo-900/50 text-white hover:bg-indigo-800/50",children:c.jsxs(yo,{to:"/profile",className:"flex items-center gap-1.5",children:[c.jsx(_r,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Profile"})]})}):c.jsx(ee,{variant:"outline",size:"sm",asChild:!0,className:"rounded-xl border-indigo-500/30 bg-indigo-900/50 text-white hover:bg-indigo-800/50",children:c.jsxs(yo,{to:"/auth",className:"flex items-center gap-1.5",children:[c.jsx(_r,{className:"h-4 w-4"}),c.jsx("span",{className:"inline",children:"Login"})]})})]}),t&&c.jsxs(ee,{variant:"outline",size:"sm",onClick:e,className:"flex items-center gap-1.5 rounded-xl border-indigo-500/30 bg-indigo-900/50 text-white hover:bg-indigo-800/50",children:[c.jsx(Qk,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden md:inline",children:"Exit Scenario"}),c.jsx("span",{className:"inline md:hidden",children:"Exit"})]})]})]})})},Ie=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:me("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ie.displayName="Card";const _t=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:me("flex flex-col space-y-1.5 p-6",t),...e}));_t.displayName="CardHeader";const Ft=y.forwardRef(({className:t,...e},n)=>c.jsx("h3",{ref:n,className:me("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ft.displayName="CardTitle";const vn=y.forwardRef(({className:t,...e},n)=>c.jsx("p",{ref:n,className:me("text-sm text-muted-foreground",t),...e}));vn.displayName="CardDescription";const ze=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:me("p-6 pt-0",t),...e}));ze.displayName="CardContent";const vc=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:me("flex items-center p-6 pt-0",t),...e}));vc.displayName="CardFooter";const mW=Yw("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Oe({className:t,variant:e,...n}){return c.jsx("div",{className:me(mW({variant:e}),t),...n})}const pW=({scenario:t,onStart:e,onClick:n,isTeacherDashboard:s=!1})=>{const i=(()=>{switch(t.id){case"climate-council":return"https://images.unsplash.com/photo-1518495973542-4542c06a5843";case"college-choice":return"https://images.unsplash.com/photo-1523050854058-8df90110c9f1";case"first-job":return"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40";case"financial-emergency":return"https://images.unsplash.com/photo-1579621970563-ebec7560ff3e";default:return t.thumbnail}})(),a=Math.ceil(t.scenes.length*2);return c.jsxs(Ie,{className:`overflow-hidden h-full flex flex-col transition-all duration-300 shadow-lg hover:shadow-2xl ${s?"bg-gradient-to-br from-slate-800/80 to-slate-900/80 border-slate-600/30 hover:border-indigo-400/50 hover:scale-[1.02]":"bg-gradient-to-br from-indigo-900/40 to-purple-900/40 border-white/10 backdrop-blur-md hover:border-indigo-300/30"}`,children:[c.jsxs("div",{className:"relative h-48 overflow-hidden group",children:[i?c.jsx("img",{src:i,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}):c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-900/50 to-purple-900/50 flex items-center justify-center",children:c.jsx(eW,{className:"h-16 w-16 text-white/30"})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent"}),c.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:c.jsxs("div",{className:"flex flex-wrap gap-2 justify-start",children:[c.jsxs(Oe,{variant:"outline",className:`${s?"bg-indigo-600/80 text-white border-indigo-400/50":"bg-indigo-500/40 text-white border-none"} backdrop-blur-sm flex items-center gap-1`,children:[c.jsx(pn,{className:"h-3 w-3"}),t.category]}),c.jsxs(Oe,{variant:"outline",className:`${s?"bg-emerald-600/80 text-white border-emerald-400/50":"bg-black/60 text-white border-none"} backdrop-blur-sm flex items-center gap-1`,children:[c.jsx(Qs,{className:"h-3 w-3"}),"~",a,"min"]})]})}),c.jsx("div",{className:"absolute top-4 right-4",children:c.jsxs(Oe,{variant:"outline",className:`${s?"bg-orange-600/80 text-white border-orange-400/50":"bg-black/60 text-white border-none"} backdrop-blur-sm flex items-center gap-1`,children:[c.jsx(YK,{className:"h-3 w-3"}),"Ages ",t.ageGroup]})}),s&&c.jsx("div",{className:"absolute top-4 left-4",children:c.jsxs(Oe,{className:"bg-purple-600/80 text-white border-purple-400/50 backdrop-blur-sm flex items-center gap-1",children:[c.jsx(St,{className:"h-3 w-3"}),"Classroom Ready"]})})]}),c.jsxs(_t,{className:"pb-3 space-y-3 flex-shrink-0",children:[c.jsx(Ft,{className:`text-xl leading-tight ${s?"text-slate-100":"text-white"}`,children:t.title}),c.jsx(vn,{className:`line-clamp-3 text-sm leading-relaxed ${s?"text-slate-300":"text-white/70"}`,children:t.description})]}),c.jsxs(ze,{className:"pb-4 pt-0 flex-1 space-y-4",children:[c.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(t.initialMetrics).map(([o,l])=>{if(l===0)return null;let u="",h="";switch(o){case"health":u=s?"bg-red-600/20 text-red-300 border-red-500/30":"bg-red-500/20 text-red-300",h="";break;case"money":u=s?"bg-green-600/20 text-green-300 border-green-500/30":"bg-green-500/20 text-green-300",h="";break;case"happiness":u=s?"bg-yellow-600/20 text-yellow-300 border-yellow-500/30":"bg-yellow-500/20 text-yellow-300",h="";break;case"knowledge":u=s?"bg-blue-600/20 text-blue-300 border-blue-500/30":"bg-blue-500/20 text-blue-300",h="";break;case"relationships":u=s?"bg-purple-600/20 text-purple-300 border-purple-500/30":"bg-purple-500/20 text-purple-300",h="";break;default:u=s?"bg-slate-600/20 text-slate-300 border-slate-500/30":"bg-white/10 text-white/80",h=""}return c.jsxs("span",{className:`text-xs px-3 py-1.5 rounded-full font-medium flex items-center gap-1 ${u} ${s?"border":""}`,children:[c.jsx("span",{children:h}),c.jsx("span",{className:"capitalize",children:o}),c.jsxs("span",{className:"text-xs opacity-80",children:["+",l]})]},o)})}),s&&c.jsx("div",{className:"pt-3 border-t border-slate-600/30",children:c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[c.jsx(us,{className:"h-3 w-3"}),t.scenes.length," scenes"]}),c.jsx("span",{className:"text-slate-400",children:"Interactive learning"})]})})]}),c.jsx(vc,{className:"pt-3 flex-shrink-0",children:c.jsxs(ee,{className:`w-full transition-all duration-300 ${s?"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5":"bg-indigo-600 hover:bg-indigo-700 text-white hover:shadow-lg"}`,onClick:()=>e(t.id),children:[c.jsx(hg,{className:"w-4 h-4 mr-2"}),s?"Start Live Session":"Start Adventure"]})})]})},Qy=768;function Xw(){const[t,e]=y.useState(void 0);return y.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Qy-1}px)`),s=()=>{e(window.innerWidth<Qy)};return n.addEventListener("change",s),e(window.innerWidth<Qy),()=>n.removeEventListener("change",s)},[]),!!t}const ds=y.forwardRef(({className:t,type:e,...n},s)=>c.jsx("input",{type:e,className:me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n}));ds.displayName="Input";var gW="Separator",$A="horizontal",yW=["horizontal","vertical"],eM=y.forwardRef((t,e)=>{const{decorative:n,orientation:s=$A,...r}=t,i=vW(s)?s:$A,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c.jsx(we.div,{"data-orientation":i,...o,...r,ref:e})});eM.displayName=gW;function vW(t){return yW.includes(t)}var tM=eM;const dd=y.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...s},r)=>c.jsx(tM,{ref:r,decorative:n,orientation:e,className:me("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...s}));dd.displayName=tM.displayName;var bW=y.createContext(void 0);function Zw(t){const e=y.useContext(bW);return t||e||"ltr"}function xW(t,[e,n]){return Math.min(n,Math.max(e,t))}function wW(t,e){return y.useReducer((n,s)=>e[n][s]??n,t)}var Jw="ScrollArea",[nM,pse]=_s(Jw),[_W,ns]=nM(Jw),sM=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:i=600,...a}=t,[o,l]=y.useState(null),[u,h]=y.useState(null),[f,m]=y.useState(null),[p,E]=y.useState(null),[w,x]=y.useState(null),[v,b]=y.useState(0),[_,C]=y.useState(0),[P,M]=y.useState(!1),[A,S]=y.useState(!1),N=Qe(e,j=>l(j)),R=Zw(r);return c.jsx(_W,{scope:n,type:s,dir:R,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:E,scrollbarXEnabled:P,onScrollbarXEnabledChange:M,scrollbarY:w,onScrollbarYChange:x,scrollbarYEnabled:A,onScrollbarYEnabledChange:S,onCornerWidthChange:b,onCornerHeightChange:C,children:c.jsx(we.div,{dir:R,...a,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});sM.displayName=Jw;var rM="ScrollAreaViewport",iM=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:s,nonce:r,...i}=t,a=ns(rM,n),o=y.useRef(null),l=Qe(e,o,a.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(we.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:c.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});iM.displayName=rM;var nr="ScrollAreaScrollbar",e_=y.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=ns(nr,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=r,o=t.orientation==="horizontal";return y.useEffect(()=>(o?i(!0):a(!0),()=>{o?i(!1):a(!1)}),[o,i,a]),r.type==="hover"?c.jsx(TW,{...s,ref:e,forceMount:n}):r.type==="scroll"?c.jsx(EW,{...s,ref:e,forceMount:n}):r.type==="auto"?c.jsx(aM,{...s,ref:e,forceMount:n}):r.type==="always"?c.jsx(t_,{...s,ref:e}):null});e_.displayName=nr;var TW=y.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=ns(nr,t.__scopeScrollArea),[i,a]=y.useState(!1);return y.useEffect(()=>{const o=r.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),a(!0)},h=()=>{l=window.setTimeout(()=>a(!1),r.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",h),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",h)}}},[r.scrollArea,r.scrollHideDelay]),c.jsx(Ts,{present:n||i,children:c.jsx(aM,{"data-state":i?"visible":"hidden",...s,ref:e})})}),EW=y.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=ns(nr,t.__scopeScrollArea),i=t.orientation==="horizontal",a=mg(()=>l("SCROLL_END"),100),[o,l]=wW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,r.scrollHideDelay,l]),y.useEffect(()=>{const u=r.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const m=()=>{const p=u[h];f!==p&&(l("SCROLL"),a()),f=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,i,l,a]),c.jsx(Ts,{present:n||o!=="hidden",children:c.jsx(t_,{"data-state":o==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:fe(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:fe(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),aM=y.forwardRef((t,e)=>{const n=ns(nr,t.__scopeScrollArea),{forceMount:s,...r}=t,[i,a]=y.useState(!1),o=t.orientation==="horizontal",l=mg(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?u:h)}},10);return Gl(n.viewport,l),Gl(n.content,l),c.jsx(Ts,{present:s||i,children:c.jsx(t_,{"data-state":i?"visible":"hidden",...r,ref:e})})}),t_=y.forwardRef((t,e)=>{const{orientation:n="vertical",...s}=t,r=ns(nr,t.__scopeScrollArea),i=y.useRef(null),a=y.useRef(0),[o,l]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=dM(o.viewport,o.content),h={...s,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function f(m,p){return IW(m,a.current,o,p)}return n==="horizontal"?c.jsx(SW,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,p=YA(m,o,r.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):n==="vertical"?c.jsx(AW,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,p=YA(m,o);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),SW=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:s,...r}=t,i=ns(nr,t.__scopeScrollArea),[a,o]=y.useState(),l=y.useRef(null),u=Qe(e,l,i.onScrollbarXChange);return y.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(lM,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fg(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(m),fM(m,f)&&h.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Qm(a.paddingLeft),paddingEnd:Qm(a.paddingRight)}})}})}),AW=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:s,...r}=t,i=ns(nr,t.__scopeScrollArea),[a,o]=y.useState(),l=y.useRef(null),u=Qe(e,l,i.onScrollbarYChange);return y.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(lM,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fg(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(m),fM(m,f)&&h.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Qm(a.paddingTop),paddingEnd:Qm(a.paddingBottom)}})}})}),[CW,oM]=nM(nr),lM=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:h,onResize:f,...m}=t,p=ns(nr,n),[E,w]=y.useState(null),x=Qe(e,N=>w(N)),v=y.useRef(null),b=y.useRef(""),_=p.viewport,C=s.content-s.viewport,P=wt(h),M=wt(l),A=mg(f,10);function S(N){if(v.current){const R=N.clientX-v.current.left,j=N.clientY-v.current.top;u({x:R,y:j})}}return y.useEffect(()=>{const N=R=>{const j=R.target;(E==null?void 0:E.contains(j))&&P(R,C)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[_,E,C,P]),y.useEffect(M,[s,M]),Gl(E,A),Gl(p.content,A),c.jsx(CW,{scope:n,scrollbar:E,hasThumb:r,onThumbChange:wt(i),onThumbPointerUp:wt(a),onThumbPositionChange:M,onThumbPointerDown:wt(o),children:c.jsx(we.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:fe(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),v.current=E.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),S(N))}),onPointerMove:fe(t.onPointerMove,S),onPointerUp:fe(t.onPointerUp,N=>{const R=N.target;R.hasPointerCapture(N.pointerId)&&R.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Wm="ScrollAreaThumb",cM=y.forwardRef((t,e)=>{const{forceMount:n,...s}=t,r=oM(Wm,t.__scopeScrollArea);return c.jsx(Ts,{present:n||r.hasThumb,children:c.jsx(RW,{ref:e,...s})})}),RW=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:s,...r}=t,i=ns(Wm,n),a=oM(Wm,n),{onThumbPositionChange:o}=a,l=Qe(e,f=>a.onThumbChange(f)),u=y.useRef(void 0),h=mg(()=>{u.current&&(u.current(),u.current=void 0)},100);return y.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!u.current){const p=DW(f,o);u.current=p,o()}};return o(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,o]),c.jsx(we.div,{"data-state":a.hasThumb?"visible":"hidden",...r,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:fe(t.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),E=f.clientX-p.left,w=f.clientY-p.top;a.onThumbPointerDown({x:E,y:w})}),onPointerUp:fe(t.onPointerUp,a.onThumbPointerUp)})});cM.displayName=Wm;var n_="ScrollAreaCorner",uM=y.forwardRef((t,e)=>{const n=ns(n_,t.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?c.jsx(NW,{...t,ref:e}):null});uM.displayName=n_;var NW=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,...s}=t,r=ns(n_,n),[i,a]=y.useState(0),[o,l]=y.useState(0),u=!!(i&&o);return Gl(r.scrollbarX,()=>{var f;const h=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(h),l(h)}),Gl(r.scrollbarY,()=>{var f;const h=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(h),a(h)}),u?c.jsx(we.div,{...s,ref:e,style:{width:i,height:o,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Qm(t){return t?parseInt(t,10):0}function dM(t,e){const n=t/e;return isNaN(n)?0:n}function fg(t){const e=dM(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-n)*e;return Math.max(s,18)}function IW(t,e,n,s="ltr"){const r=fg(n),i=r/2,a=e||i,o=r-a,l=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,h=n.content-n.viewport,f=s==="ltr"?[0,h]:[h*-1,0];return hM([l,u],f)(t)}function YA(t,e,n="ltr"){const s=fg(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-r,a=e.content-e.viewport,o=i-s,l=n==="ltr"?[0,a]:[a*-1,0],u=xW(t,l);return hM([0,a],[0,o])(u)}function hM(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function fM(t,e){return t>0&&t<e}var DW=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},s=0;return function r(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,o=n.top!==i.top;(a||o)&&e(),n=i,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function mg(t,e){const n=wt(t),s=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(s.current),[]),y.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,e)},[n,e])}function Gl(t,e){const n=wt(e);Vn(()=>{let s=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(s),r.unobserve(t)}}},[t,n])}var mM=sM,PW=iM,jW=uM;const pM=y.forwardRef(({className:t,children:e,...n},s)=>c.jsxs(mM,{ref:s,className:me("relative overflow-hidden",t),...n,children:[c.jsx(PW,{className:"h-full w-full rounded-[inherit]",children:e}),c.jsx(gM,{}),c.jsx(jW,{})]}));pM.displayName=mM.displayName;const gM=y.forwardRef(({className:t,orientation:e="vertical",...n},s)=>c.jsx(e_,{ref:s,orientation:e,className:me("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:c.jsx(cM,{className:"relative flex-1 rounded-full bg-border"})}));gM.displayName=e_.displayName;const kW=()=>{const{currentUser:t,userProfile:e}=tr(),{setClassroomId:n,setGameMode:s,startScenario:r,setCurrentScene:i}=zr(),{toast:a}=er(),o=ea(),[l,u]=y.useState([]),[h,f]=y.useState(!0),[m,p]=y.useState(""),[E,w]=y.useState(!1),[x,v]=y.useState(""),[b,_]=y.useState({}),[C,P]=y.useState(null);y.useEffect(()=>{t&&(e==null?void 0:e.role)==="student"&&M()},[t,e]),y.useEffect(()=>{if(l.length===0)return;const R=[];return l.forEach(j=>{if(j.id){const k=$w(j.id,async I=>{if(u(H=>H.map($=>$.id===I.id?I:$)),I.activeSessionId)try{const H=await lg(I.id);H&&_($=>({...$,[I.id]:H}))}catch(H){console.error("Error fetching active session:",H)}else _(H=>{const $={...H};return delete $[I.id],$})});R.push(k)}}),()=>{R.forEach(j=>j())}},[l.length]);const M=async()=>{if(t)try{f(!0);const R=await cg(t.uid,"student");console.log("Fetched student classrooms:",R),u(R)}catch(R){console.error("Error fetching classrooms:",R),a({title:"Error",description:"Failed to load your classrooms.",variant:"destructive"})}finally{f(!1)}},A=async()=>{if(!m.trim()){a({title:"Class Code Required",description:"Please enter a valid class code.",variant:"destructive"});return}if(!t||!e){a({title:"Login Required",description:"Please log in to join a classroom.",variant:"destructive"});return}try{w(!0);const R=await kK(m.trim().toUpperCase(),t.uid,e.displayName||"Student");R&&(a({title:"Successfully Joined!",description:`Welcome to ${R.name}`}),p(""),await M())}catch(R){console.error("Error joining classroom:",R),a({title:"Error",description:R instanceof Error?R.message:"Failed to join classroom. Please try again.",variant:"destructive"})}finally{w(!1)}},S=async(R,j)=>{if(!(!t||!e)){P(j.id);try{console.log("Joining live session smoothly:",j.id),n(R.id),s("classroom");const k=await Mk(j.id,t.uid,e.displayName||"Student");if(k&&k.status==="active")r(k.scenarioId),k.currentSceneId&&setTimeout(()=>{i(k.currentSceneId)},500),a({title:" Joined Live Session!",description:`Successfully connected to "${j.scenarioTitle}"`}),o("/game");else throw new Error("Session is not active")}catch(k){console.error("Error joining live session:",k),a({title:"Connection Failed",description:"Failed to join the live session. Please try again.",variant:"destructive"})}finally{P(null)}}},N=l.filter(R=>R.name.toLowerCase().includes(x.toLowerCase())||R.teacherName&&R.teacherName.toLowerCase().includes(x.toLowerCase()));return!t||!e||e.role!=="student"?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Ie,{className:"bg-black/30 border-primary/20",children:[c.jsxs(_t,{children:[c.jsxs(Ft,{className:"text-white flex items-center gap-2",children:[c.jsx(J0,{className:"h-5 w-5 text-primary"}),"Join a New Classroom"]}),c.jsx(vn,{className:"text-white/70",children:"Enter the class code provided by your teacher"})]}),c.jsx(ze,{children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ds,{placeholder:"Enter class code (e.g., LIFE-1234)",value:m,onChange:R=>p(R.target.value.toUpperCase()),className:"bg-black/40 border-white/20 text-white",disabled:E}),c.jsx(ee,{onClick:A,disabled:E||!m.trim(),className:"bg-primary hover:bg-primary/90 min-w-[80px]",children:E?"Joining...":"Join"})]})})]}),c.jsxs(Ie,{className:"bg-black/30 border-primary/20",children:[c.jsxs(_t,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(Ft,{className:"text-white flex items-center gap-2",children:[c.jsx($k,{className:"h-5 w-5 text-primary"}),"My Classrooms (",l.length,")"]}),c.jsx(ee,{variant:"outline",size:"sm",onClick:M,disabled:h,className:"border-white/20 bg-black/20 text-white hover:bg-white/10",children:h?"Loading...":"Refresh"})]}),l.length>0&&c.jsxs("div",{className:"relative mt-2",children:[c.jsx(GA,{className:"absolute left-2 top-2.5 h-4 w-4 text-white/50"}),c.jsx(ds,{placeholder:"Search classrooms or teachers...",className:"pl-8 bg-black/20 border-white/20 text-white",value:x,onChange:R=>v(R.target.value)})]})]}),c.jsx(ze,{children:h?c.jsx("div",{className:"text-center py-8",children:c.jsx("div",{className:"text-white/70",children:"Loading your classrooms..."})}):N.length>0?c.jsx(pM,{className:"h-[400px] pr-4",children:c.jsx("div",{className:"space-y-4",children:N.map(R=>{var I,H;const j=b[R.id],k=C===(j==null?void 0:j.id);return c.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-white/10",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-white font-medium text-lg",children:R.name}),c.jsxs("p",{className:"text-white/70 text-sm",children:["Teacher: ",R.teacherName||"Unknown"]}),R.description&&c.jsx("p",{className:"text-white/60 text-sm mt-1",children:R.description})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Oe,{className:"bg-blue-500/20 text-blue-300 border-0",children:[((I=R.students)==null?void 0:I.length)||0," students"]}),j&&c.jsxs(Oe,{className:"bg-green-500/20 text-green-300 border-0",children:[c.jsx(ql,{className:"h-3 w-3 mr-1"}),"Live"]})]})]}),c.jsx(dd,{className:"bg-white/10 my-3"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/70",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(St,{className:"h-4 w-4"}),c.jsxs("span",{children:[((H=R.students)==null?void 0:H.length)||0," students"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Qs,{className:"h-4 w-4"}),c.jsxs("span",{children:["Joined ",R.createdAt?new Date(R.createdAt.seconds*1e3).toLocaleDateString():"recently"]})]})]}),j?c.jsx(ee,{size:"sm",onClick:()=>S(R,j),disabled:k,className:"bg-green-500 hover:bg-green-600 text-white",children:k?c.jsxs(c.Fragment,{children:[c.jsx(dg,{className:"h-4 w-4 mr-1 animate-spin"}),"Joining..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Km,{className:"h-4 w-4 mr-1"}),"Join Live Session"]})}):c.jsxs(ee,{variant:"outline",size:"sm",disabled:!0,className:"border-white/20 bg-black/20 text-white/50",children:[c.jsx(hg,{className:"h-4 w-4 mr-1"}),"No Active Session"]})]}),j&&c.jsxs("div",{className:"mt-3 p-3 bg-green-500/10 rounded-md border border-green-500/20",children:[c.jsxs("div",{className:"flex items-center gap-2 text-green-300",children:[c.jsx(Km,{className:"h-4 w-4"}),c.jsx("span",{className:"font-medium",children:"Live Session Active"})]}),c.jsxs("div",{className:"text-green-200 text-sm mt-1",children:["Scenario: ",j.scenarioTitle]}),c.jsxs("div",{className:"text-green-200/70 text-xs mt-1",children:[j.participants.length," students participating"]})]})]},R.id)})})}):x?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(GA,{className:"h-12 w-12 text-white/30 mx-auto mb-2"}),c.jsx("div",{className:"text-white/70",children:"No classrooms match your search"})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Ws,{className:"h-12 w-12 text-white/30 mx-auto mb-2"}),c.jsx("div",{className:"text-white/70 mb-2",children:"You haven't joined any classrooms yet"}),c.jsx("div",{className:"text-white/50 text-sm",children:"Use the class code from your teacher to join your first classroom"})]})})]})]})};var Xy="focusScope.autoFocusOnMount",Zy="focusScope.autoFocusOnUnmount",KA={bubbles:!1,cancelable:!0},MW="FocusScope",yM=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...a}=t,[o,l]=y.useState(null),u=wt(r),h=wt(i),f=y.useRef(null),m=Qe(e,w=>l(w)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(s){let w=function(_){if(p.paused||!o)return;const C=_.target;o.contains(C)?f.current=C:ni(f.current,{select:!0})},x=function(_){if(p.paused||!o)return;const C=_.relatedTarget;C!==null&&(o.contains(C)||ni(f.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const P of _)P.removedNodes.length>0&&ni(o)};document.addEventListener("focusin",w),document.addEventListener("focusout",x);const b=new MutationObserver(v);return o&&b.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",x),b.disconnect()}}},[s,o,p.paused]),y.useEffect(()=>{if(o){QA.add(p);const w=document.activeElement;if(!o.contains(w)){const v=new CustomEvent(Xy,KA);o.addEventListener(Xy,u),o.dispatchEvent(v),v.defaultPrevented||(OW(BW(vM(o)),{select:!0}),document.activeElement===w&&ni(o))}return()=>{o.removeEventListener(Xy,u),setTimeout(()=>{const v=new CustomEvent(Zy,KA);o.addEventListener(Zy,h),o.dispatchEvent(v),v.defaultPrevented||ni(w??document.body,{select:!0}),o.removeEventListener(Zy,h),QA.remove(p)},0)}}},[o,u,h,p]);const E=y.useCallback(w=>{if(!n&&!s||p.paused)return;const x=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,v=document.activeElement;if(x&&v){const b=w.currentTarget,[_,C]=VW(b);_&&C?!w.shiftKey&&v===C?(w.preventDefault(),n&&ni(_,{select:!0})):w.shiftKey&&v===_&&(w.preventDefault(),n&&ni(C,{select:!0})):v===b&&w.preventDefault()}},[n,s,p.paused]);return c.jsx(we.div,{tabIndex:-1,...a,ref:m,onKeyDown:E})});yM.displayName=MW;function OW(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(ni(s,{select:e}),document.activeElement!==n)return}function VW(t){const e=vM(t),n=WA(e,t),s=WA(e.reverse(),t);return[n,s]}function vM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function WA(t,e){for(const n of t)if(!LW(n,{upTo:e}))return n}function LW(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function UW(t){return t instanceof HTMLInputElement&&"select"in t}function ni(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&UW(t)&&e&&t.select()}}var QA=FW();function FW(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=XA(t,e),t.unshift(e)},remove(e){var n;t=XA(t,e),(n=t[0])==null||n.resume()}}}function XA(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function BW(t){return t.filter(e=>e.tagName!=="A")}var Jy=0;function zW(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ZA()),document.body.insertAdjacentElement("beforeend",t[1]??ZA()),Jy++,()=>{Jy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Jy--}},[])}function ZA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Of="right-scroll-bar-position",Vf="width-before-scroll-bar",HW="with-scroll-bars-hidden",qW="--removed-body-scroll-bar-size";function ev(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function GW(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=e,n.facade}var $W=typeof window<"u"?y.useLayoutEffect:y.useEffect,JA=new WeakMap;function YW(t,e){var n=GW(null,function(s){return t.forEach(function(r){return ev(r,s)})});return $W(function(){var s=JA.get(n);if(s){var r=new Set(s),i=new Set(t),a=n.current;r.forEach(function(o){i.has(o)||ev(o,null)}),i.forEach(function(o){r.has(o)||ev(o,a)})}JA.set(n,t)},[t]),n}function KW(t){return t}function WW(t,e){e===void 0&&(e=KW);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,s);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(s=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){s=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(i),a=n}var l=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),n}}}};return r}function QW(t){t===void 0&&(t={});var e=WW(null);return e.options=Ps({async:!0,ssr:!1},t),e}var bM=function(t){var e=t.sideCar,n=Gd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return y.createElement(s,Ps({},n))};bM.isSideCarExport=!0;function XW(t,e){return t.useMedium(e),bM}var xM=QW(),tv=function(){},pg=y.forwardRef(function(t,e){var n=y.useRef(null),s=y.useState({onScrollCapture:tv,onWheelCapture:tv,onTouchMoveCapture:tv}),r=s[0],i=s[1],a=t.forwardProps,o=t.children,l=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,p=t.noIsolation,E=t.inert,w=t.allowPinchZoom,x=t.as,v=x===void 0?"div":x,b=t.gapMode,_=Gd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,P=YW([n,e]),M=Ps(Ps({},_),r);return y.createElement(y.Fragment,null,h&&y.createElement(C,{sideCar:xM,removeScrollBar:u,shards:f,noIsolation:p,inert:E,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:b}),a?y.cloneElement(y.Children.only(o),Ps(Ps({},M),{ref:P})):y.createElement(v,Ps({},M,{className:l,ref:P}),o))});pg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pg.classNames={fullWidth:Vf,zeroRight:Of};var ZW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JW(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ZW();return e&&t.setAttribute("nonce",e),t}function eQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function tQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var nQ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=JW())&&(eQ(e,n),tQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},sQ=function(){var t=nQ();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},wM=function(){var t=sQ(),e=function(n){var s=n.styles,r=n.dynamic;return t(s,r),null};return e},rQ={left:0,top:0,right:0,gap:0},nv=function(t){return parseInt(t||"",10)||0},iQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[nv(n),nv(s),nv(r)]},aQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return rQ;var e=iQ(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},oQ=wM(),cl="data-scroll-locked",lQ=function(t,e,n,s){var r=t.left,i=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(HW,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(o,"px ").concat(s,`;
  }
  body[`).concat(cl,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Of,` {
    right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Vf,` {
    margin-right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Of," .").concat(Of,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Vf," .").concat(Vf,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(cl,`] {
    `).concat(qW,": ").concat(o,`px;
  }
`)},eC=function(){var t=parseInt(document.body.getAttribute(cl)||"0",10);return isFinite(t)?t:0},cQ=function(){y.useEffect(function(){return document.body.setAttribute(cl,(eC()+1).toString()),function(){var t=eC()-1;t<=0?document.body.removeAttribute(cl):document.body.setAttribute(cl,t.toString())}},[])},uQ=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,r=s===void 0?"margin":s;cQ();var i=y.useMemo(function(){return aQ(r)},[r]);return y.createElement(oQ,{styles:lQ(i,!e,r,n?"":"!important")})},eb=!1;if(typeof window<"u")try{var tf=Object.defineProperty({},"passive",{get:function(){return eb=!0,!0}});window.addEventListener("test",tf,tf),window.removeEventListener("test",tf,tf)}catch{eb=!1}var vo=eb?{passive:!1}:!1,dQ=function(t){return t.tagName==="TEXTAREA"},_M=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!dQ(t)&&n[e]==="visible")},hQ=function(t){return _M(t,"overflowY")},fQ=function(t){return _M(t,"overflowX")},tC=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=TM(t,s);if(r){var i=EM(t,s),a=i[1],o=i[2];if(a>o)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},mQ=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},pQ=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},TM=function(t,e){return t==="v"?hQ(e):fQ(e)},EM=function(t,e){return t==="v"?mQ(e):pQ(e)},gQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},yQ=function(t,e,n,s,r){var i=gQ(t,window.getComputedStyle(e).direction),a=i*s,o=n.target,l=e.contains(o),u=!1,h=a>0,f=0,m=0;do{var p=EM(t,o),E=p[0],w=p[1],x=p[2],v=w-x-i*E;(E||v)&&TM(t,o)&&(f+=v,m+=E),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(u=!0),u},nf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},nC=function(t){return[t.deltaX,t.deltaY]},sC=function(t){return t&&"current"in t?t.current:t},vQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},bQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},xQ=0,bo=[];function wQ(t){var e=y.useRef([]),n=y.useRef([0,0]),s=y.useRef(),r=y.useState(xQ++)[0],i=y.useState(wM)[0],a=y.useRef(t);y.useEffect(function(){a.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var w=_z([t.lockRef.current],(t.shards||[]).map(sC),!0).filter(Boolean);return w.forEach(function(x){return x.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),w.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var o=y.useCallback(function(w,x){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!a.current.allowPinchZoom;var v=nf(w),b=n.current,_="deltaX"in w?w.deltaX:b[0]-v[0],C="deltaY"in w?w.deltaY:b[1]-v[1],P,M=w.target,A=Math.abs(_)>Math.abs(C)?"h":"v";if("touches"in w&&A==="h"&&M.type==="range")return!1;var S=tC(A,M);if(!S)return!0;if(S?P=A:(P=A==="v"?"h":"v",S=tC(A,M)),!S)return!1;if(!s.current&&"changedTouches"in w&&(_||C)&&(s.current=P),!P)return!0;var N=s.current||P;return yQ(N,x,w,N==="h"?_:C)},[]),l=y.useCallback(function(w){var x=w;if(!(!bo.length||bo[bo.length-1]!==i)){var v="deltaY"in x?nC(x):nf(x),b=e.current.filter(function(P){return P.name===x.type&&(P.target===x.target||x.target===P.shadowParent)&&vQ(P.delta,v)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var _=(a.current.shards||[]).map(sC).filter(Boolean).filter(function(P){return P.contains(x.target)}),C=_.length>0?o(x,_[0]):!a.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),u=y.useCallback(function(w,x,v,b){var _={name:w,delta:x,target:v,should:b,shadowParent:_Q(v)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(C){return C!==_})},1)},[]),h=y.useCallback(function(w){n.current=nf(w),s.current=void 0},[]),f=y.useCallback(function(w){u(w.type,nC(w),w.target,o(w,t.lockRef.current))},[]),m=y.useCallback(function(w){u(w.type,nf(w),w.target,o(w,t.lockRef.current))},[]);y.useEffect(function(){return bo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,vo),document.addEventListener("touchmove",l,vo),document.addEventListener("touchstart",h,vo),function(){bo=bo.filter(function(w){return w!==i}),document.removeEventListener("wheel",l,vo),document.removeEventListener("touchmove",l,vo),document.removeEventListener("touchstart",h,vo)}},[]);var p=t.removeScrollBar,E=t.inert;return y.createElement(y.Fragment,null,E?y.createElement(i,{styles:bQ(r)}):null,p?y.createElement(uQ,{gapMode:t.gapMode}):null)}function _Q(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const TQ=XW(xM,wQ);var SM=y.forwardRef(function(t,e){return y.createElement(pg,Ps({},t,{ref:e,sideCar:TQ}))});SM.classNames=pg.classNames;var EQ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},xo=new WeakMap,sf=new WeakMap,rf={},sv=0,AM=function(t){return t&&(t.host||AM(t.parentNode))},SQ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=AM(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},AQ=function(t,e,n,s){var r=SQ(e,Array.isArray(t)?t:[t]);rf[n]||(rf[n]=new WeakMap);var i=rf[n],a=[],o=new Set,l=new Set(r),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};r.forEach(u);var h=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(o.has(m))h(m);else try{var p=m.getAttribute(s),E=p!==null&&p!=="false",w=(xo.get(m)||0)+1,x=(i.get(m)||0)+1;xo.set(m,w),i.set(m,x),a.push(m),w===1&&E&&sf.set(m,!0),x===1&&m.setAttribute(n,"true"),E||m.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return h(e),o.clear(),sv++,function(){a.forEach(function(f){var m=xo.get(f)-1,p=i.get(f)-1;xo.set(f,m),i.set(f,p),m||(sf.has(f)||f.removeAttribute(s),sf.delete(f)),p||f.removeAttribute(n)}),sv--,sv||(xo=new WeakMap,xo=new WeakMap,sf=new WeakMap,rf={})}},CQ=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),r=EQ(t);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live]"))),AQ(s,r,n,"aria-hidden")):function(){return null}},gg="Dialog",[CM,RM]=_s(gg),[RQ,Ss]=CM(gg),NM=t=>{const{__scopeDialog:e,children:n,open:s,defaultOpen:r,onOpenChange:i,modal:a=!0}=t,o=y.useRef(null),l=y.useRef(null),[u,h]=Bd({prop:s,defaultProp:r??!1,onChange:i,caller:gg});return c.jsx(RQ,{scope:e,triggerRef:o,contentRef:l,contentId:nl(),titleId:nl(),descriptionId:nl(),open:u,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(f=>!f),[h]),modal:a,children:n})};NM.displayName=gg;var IM="DialogTrigger",DM=y.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=Ss(IM,n),i=Qe(e,r.triggerRef);return c.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":i_(r.open),...s,ref:i,onClick:fe(t.onClick,r.onOpenToggle)})});DM.displayName=IM;var s_="DialogPortal",[NQ,PM]=CM(s_,{forceMount:void 0}),jM=t=>{const{__scopeDialog:e,forceMount:n,children:s,container:r}=t,i=Ss(s_,e);return c.jsx(NQ,{scope:e,forceMount:n,children:y.Children.map(s,a=>c.jsx(Ts,{present:n||i.open,children:c.jsx(Mx,{asChild:!0,container:r,children:a})}))})};jM.displayName=s_;var Xm="DialogOverlay",kM=y.forwardRef((t,e)=>{const n=PM(Xm,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,i=Ss(Xm,t.__scopeDialog);return i.modal?c.jsx(Ts,{present:s||i.open,children:c.jsx(DQ,{...r,ref:e})}):null});kM.displayName=Xm;var IQ=$u("DialogOverlay.RemoveScroll"),DQ=y.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=Ss(Xm,n);return c.jsx(SM,{as:IQ,allowPinchZoom:!0,shards:[r.contentRef],children:c.jsx(we.div,{"data-state":i_(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Qa="DialogContent",MM=y.forwardRef((t,e)=>{const n=PM(Qa,t.__scopeDialog),{forceMount:s=n.forceMount,...r}=t,i=Ss(Qa,t.__scopeDialog);return c.jsx(Ts,{present:s||i.open,children:i.modal?c.jsx(PQ,{...r,ref:e}):c.jsx(jQ,{...r,ref:e})})});MM.displayName=Qa;var PQ=y.forwardRef((t,e)=>{const n=Ss(Qa,t.__scopeDialog),s=y.useRef(null),r=Qe(e,n.contentRef,s);return y.useEffect(()=>{const i=s.current;if(i)return CQ(i)},[]),c.jsx(OM,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:fe(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:fe(t.onFocusOutside,i=>i.preventDefault())})}),jQ=y.forwardRef((t,e)=>{const n=Ss(Qa,t.__scopeDialog),s=y.useRef(!1),r=y.useRef(!1);return c.jsx(OM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(s.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),OM=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...a}=t,o=Ss(Qa,n),l=y.useRef(null),u=Qe(e,l);return zW(),c.jsxs(c.Fragment,{children:[c.jsx(yM,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:c.jsx(_p,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":i_(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(MQ,{titleId:o.titleId}),c.jsx(VQ,{contentRef:l,descriptionId:o.descriptionId})]})]})}),r_="DialogTitle",VM=y.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=Ss(r_,n);return c.jsx(we.h2,{id:r.titleId,...s,ref:e})});VM.displayName=r_;var LM="DialogDescription",UM=y.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=Ss(LM,n);return c.jsx(we.p,{id:r.descriptionId,...s,ref:e})});UM.displayName=LM;var FM="DialogClose",BM=y.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,r=Ss(FM,n);return c.jsx(we.button,{type:"button",...s,ref:e,onClick:fe(t.onClick,()=>r.onOpenChange(!1))})});BM.displayName=FM;function i_(t){return t?"open":"closed"}var zM="DialogTitleWarning",[kQ,HM]=T6(zM,{contentName:Qa,titleName:r_,docsSlug:"dialog"}),MQ=({titleId:t})=>{const e=HM(zM),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},OQ="DialogDescriptionWarning",VQ=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HM(OQ).contentName}}.`;return y.useEffect(()=>{var i;const r=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},qM=NM,LQ=DM,GM=jM,a_=kM,o_=MM,l_=VM,c_=UM,u_=BM;const yg=qM,UQ=GM,$M=y.forwardRef(({className:t,...e},n)=>c.jsx(a_,{ref:n,className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));$M.displayName=a_.displayName;const rh=y.forwardRef(({className:t,children:e,hideCloseButton:n=!1,...s},r)=>c.jsxs(UQ,{children:[c.jsx($M,{}),c.jsxs(o_,{ref:r,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,!n&&c.jsxs(u_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(Qw,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rh.displayName=o_.displayName;const ih=({className:t,...e})=>c.jsx("div",{className:me("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ih.displayName="DialogHeader";const vg=({className:t,...e})=>c.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});vg.displayName="DialogFooter";const ah=y.forwardRef(({className:t,...e},n)=>c.jsx(l_,{ref:n,className:me("text-lg font-semibold leading-none tracking-tight",t),...e}));ah.displayName=l_.displayName;const bg=y.forwardRef(({className:t,...e},n)=>c.jsx(c_,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));bg.displayName=c_.displayName;const FQ=()=>{const{currentUser:t,userProfile:e}=tr(),{setClassroomId:n,setGameMode:s,startScenario:r,classroomId:i}=zr(),{toast:a}=er(),o=ea(),[l,u]=y.useState(null),[h,f]=y.useState(!1),[m,p]=y.useState(new Set);y.useEffect(()=>{if(!t||(e==null?void 0:e.role)!=="student"||!i)return;const x=$w(i,async b=>{if(b.activeSessionId&&!m.has(b.activeSessionId))try{const _=await lg(i);_&&_.status==="active"&&u({id:_.id,type:"live_session_started",sessionId:_.id,teacherName:_.teacherName,scenarioTitle:_.scenarioTitle,classroomId:i,studentId:t.uid,createdAt:pe.now(),read:!1})}catch(_){console.error("Error fetching active session:",_)}}),v=wK(t.uid,b=>{const _=b.find(C=>C.type==="live_session_started"&&!m.has(C.sessionId));_&&u(_)});return()=>{x(),v()}},[t,e,i,m]);const E=async()=>{if(!(!l||!t||!e)){f(!0);try{n(i),s("classroom"),await Mk(l.sessionId,t.uid,e.displayName||"Student"),r(l.sessionId),a({title:" Joined Live Session!",description:`Successfully connected to "${l.scenarioTitle}"`}),u(null),o("/game")}catch(x){console.error("Error joining live session:",x),a({title:"Connection Failed",description:"Unable to join the live session. Please try again.",variant:"destructive"})}finally{f(!1)}}},w=()=>{l&&(p(x=>new Set(x).add(l.sessionId)),u(null),a({title:"Session Declined",description:"You can still join from your classroom if you change your mind."}))};return l?c.jsx(yg,{open:!0,onOpenChange:()=>{},children:c.jsxs(rh,{className:"bg-gradient-to-br from-slate-900/95 to-slate-800/95 border border-green-500/30 text-white max-w-md backdrop-blur-lg",hideCloseButton:!0,children:[c.jsxs(ih,{children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute h-6 w-6 rounded-full bg-green-400 animate-ping"}),c.jsx("div",{className:"relative h-6 w-6 rounded-full bg-green-400 flex items-center justify-center",children:c.jsx(Km,{className:"h-3 w-3 text-slate-900"})})]})}),c.jsxs(ah,{className:"text-2xl text-center text-white flex items-center justify-center gap-3 mb-2",children:[c.jsx(ql,{className:"h-6 w-6 text-green-400"}),"Live Session Started!"]}),c.jsxs(bg,{className:"text-center text-white/90 space-y-4",children:[c.jsxs("div",{className:"bg-gradient-to-r from-slate-800/60 to-slate-700/60 rounded-xl p-5 space-y-3 border border-slate-600/30",children:[c.jsxs("div",{className:"flex items-center justify-center gap-3",children:[c.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full",children:c.jsx(St,{className:"h-5 w-5 text-blue-400"})}),c.jsx("span",{className:"font-semibold text-lg",children:l.teacherName})]}),c.jsx("div",{className:"text-white/80 text-base",children:"has started a live session"}),c.jsxs(Oe,{className:"bg-green-500/20 text-green-300 border-green-500/30 px-4 py-2 text-sm font-medium",children:[c.jsx(ql,{className:"h-4 w-4 mr-2"}),l.scenarioTitle]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-white/70 bg-slate-800/40 rounded-lg p-3",children:[c.jsx(Qs,{className:"h-4 w-4"}),"Join now to participate with your class!"]})]})]}),c.jsxs(vg,{className:"flex gap-3 pt-4",children:[c.jsxs(ee,{variant:"outline",onClick:w,className:"border-red-500/40 bg-red-900/30 text-red-300 hover:bg-red-800/40 hover:border-red-400/60 transition-all duration-200 flex-1",disabled:h,children:[c.jsx(WK,{className:"h-4 w-4 mr-2"}),"Decline"]}),c.jsx(ee,{onClick:E,className:"bg-green-500 hover:bg-green-600 text-white shadow-lg hover:shadow-green-500/20 transition-all duration-200 flex-1",disabled:h,children:h?c.jsxs(c.Fragment,{children:[c.jsx(dg,{className:"h-4 w-4 mr-2 animate-spin"}),"Joining..."]}):c.jsxs(c.Fragment,{children:[c.jsx(ug,{className:"h-4 w-4 mr-2"}),"Accept & Join"]})})]})]})}):null},BQ=()=>{const{scenarios:t,startScenario:e,userRole:n,gameMode:s,setGameMode:r,classroomId:i}=zr(),{currentUser:a}=tr(),o=ea(),l=Xw(),{toast:u}=er(),h=m=>{e(m),o("/game")},f=()=>{if(!a){o("/auth"),u({title:"Login Required",description:"Please login to join a classroom.",variant:"destructive"});return}const m=document.getElementById("classroom-section");m&&m.scrollIntoView({behavior:"smooth"})};return c.jsxs(c.Fragment,{children:[a&&n==="student"&&c.jsx(FQ,{}),c.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12",children:[c.jsx("section",{className:"text-center mb-16 animate-fade-in",children:c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsx("div",{className:"inline-flex justify-center items-center p-3 bg-blue-500/10 rounded-full mb-6 shadow-lg shadow-blue-500/20",children:c.jsx(Ws,{className:"h-8 w-8 text-blue-400"})}),c.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 md:mb-6 text-white",children:c.jsx("span",{className:"bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent",children:"LifePath"})}),c.jsx("p",{className:"text-xl md:text-2xl mb-2 font-medium text-white/90",children:"Real Life Based Decision Simulator"}),c.jsx("p",{className:"text-lg text-white/70 mb-8 max-w-xl mx-auto",children:"Navigate realistic scenarios and shape your future through thoughtful choices"}),c.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[!n||n==="guest"?c.jsxs(ee,{onClick:()=>o("/auth"),className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-blue-500/20 transition-all",children:[c.jsx(_r,{size:16,className:"text-white"}),"Sign Up / Login"]}):c.jsxs(ee,{onClick:()=>o("/profile"),className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-blue-500/20 transition-all",children:[c.jsx(_r,{size:16,className:"text-white"}),"My Profile"]}),c.jsxs(ee,{onClick:()=>o("/about"),variant:"outline",className:"flex items-center gap-2 border-white/20 bg-black/20 text-white hover:bg-black/40",children:[c.jsx(Kk,{size:16,className:"text-blue-300"}),"Learn More"]})]}),c.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3",children:[s==="classroom"?c.jsxs(Oe,{className:"py-1.5 px-3 bg-blue-500/20 text-white border-0 rounded-full flex items-center gap-1.5",children:[c.jsx(St,{className:"h-4 w-4 text-blue-300"}),"Classroom Mode"]}):c.jsxs(Oe,{className:"py-1.5 px-3 bg-black/20 text-white/80 border-white/10 rounded-full flex items-center gap-1.5",children:[c.jsx(_r,{className:"h-4 w-4"}),"Individual Mode"]}),n&&c.jsx(Oe,{className:"py-1.5 px-3 bg-black/20 text-white/80 border-white/10 rounded-full flex items-center gap-1.5",children:n==="teacher"?c.jsxs(c.Fragment,{children:[c.jsx(fs,{className:"h-4 w-4 text-blue-300"}),"Teacher"]}):n==="student"?c.jsxs(c.Fragment,{children:[c.jsx(Ws,{className:"h-4 w-4 text-blue-300"}),"Student"]}):c.jsxs(c.Fragment,{children:[c.jsx(_r,{className:"h-4 w-4"}),"Guest"]})})]})]})}),c.jsxs("section",{className:"mb-16 animate-fade-in",style:{animationDelay:"0.3s"},children:[c.jsxs("h2",{className:"text-2xl md:text-3xl font-bold mb-8 text-center flex items-center justify-center text-white",children:[c.jsx(pn,{className:"h-6 w-6 text-blue-300 mr-2"}),"Choose Your Scenario"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((m,p)=>c.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${.1*(p+1)}s`},children:c.jsx(pW,{scenario:m,onStart:h})},m.id))})]}),c.jsxs("section",{className:"bg-gradient-to-br from-blue-900/30 to-purple-900/30 border border-white/10 backdrop-blur-md rounded-xl p-8 mb-16 animate-fade-in",style:{animationDelay:"0.5s"},children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center text-white",children:[c.jsx(pn,{className:"h-5 w-5 text-blue-300 mr-2"}),"Why LifePath Is Different"]}),c.jsxs("div",{className:`grid grid-cols-1 ${l?"":"md:grid-cols-3"} gap-6`,children:[c.jsxs("div",{className:"bg-black/40 border border-white/10 p-5 rounded-lg hover:border-blue-300/30 transition-all hover:shadow-md",children:[c.jsx("div",{className:"p-3 bg-blue-500/10 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:c.jsx(Bl,{className:"text-blue-300"})}),c.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:"Decision Skills"}),c.jsx("p",{className:"text-white/70",children:"Weigh options and understand consequences in realistic situations."})]}),c.jsxs("div",{className:"bg-black/40 border border-white/10 p-5 rounded-lg hover:border-blue-300/30 transition-all hover:shadow-md",children:[c.jsx("div",{className:"p-3 bg-blue-500/10 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:c.jsx(Hl,{className:"text-blue-300"})}),c.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:"Track Progress"}),c.jsx("p",{className:"text-white/70",children:"See how choices affect different aspects of your virtual life over time."})]}),c.jsxs("div",{className:"bg-black/40 border border-white/10 p-5 rounded-lg hover:border-blue-300/30 transition-all hover:shadow-md",children:[c.jsx("div",{className:"p-3 bg-blue-500/10 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:c.jsx(tW,{className:"text-blue-300"})}),c.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:"Life Skills"}),c.jsx("p",{className:"text-white/70",children:"Gain practical knowledge about budgeting, relationships, and education."})]})]})]}),c.jsxs("section",{id:"classroom-section",className:"bg-gradient-to-br from-blue-900/30 to-purple-900/30 border border-white/10 backdrop-blur-md rounded-xl p-8 mb-16 animate-fade-in",style:{animationDelay:"0.6s"},children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center text-white",children:[c.jsx(St,{className:"h-5 w-5 text-blue-300 mr-2"}),"Classroom Features"]}),c.jsxs(ee,{onClick:f,className:"bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-blue-500/20 transition-all",children:[c.jsx(Wk,{className:"mr-2 h-4 w-4"}),"Join Classroom"]})]}),a&&n==="student"&&c.jsx("div",{className:"mb-8",children:c.jsx(kW,{})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[c.jsxs("div",{className:"bg-black/40 rounded-lg p-5 border border-white/10 hover:border-blue-300/30 transition-all",children:[c.jsx("div",{className:"p-3 bg-blue-500/10 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:c.jsx(Xk,{className:"text-blue-300"})}),c.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:"Discussion Mode"}),c.jsx("p",{className:"text-white/70",children:"Teachers can lead discussions and collect anonymous votes on decisions."})]}),c.jsxs("div",{className:"bg-black/40 rounded-lg p-5 border border-white/10 hover:border-blue-300/30 transition-all",children:[c.jsx("div",{className:"p-3 bg-blue-500/10 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:c.jsx(qk,{className:"text-blue-300"})}),c.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:"Assessment"}),c.jsx("p",{className:"text-white/70",children:"Track student progress and decision-making patterns across scenarios."})]}),c.jsxs("div",{className:"bg-black/40 rounded-lg p-5 border border-white/10 hover:border-blue-300/30 transition-all",children:[c.jsx("div",{className:"p-3 bg-blue-500/10 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:c.jsx(Ym,{className:"text-blue-300"})}),c.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:"Gamification"}),c.jsx("p",{className:"text-white/70",children:"Students earn XP and badges based on their decision patterns."})]})]}),c.jsx("div",{className:"mt-6 text-center",children:!n||n==="guest"?c.jsx(ee,{onClick:()=>o("/auth"),className:"bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-blue-500/20 transition-all",children:"Sign Up to Access Classroom Features"}):n==="teacher"?c.jsxs(ee,{onClick:()=>{r("classroom"),o("/teacher")},className:"bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-blue-500/20 transition-all",children:[c.jsx(fs,{className:"h-4 w-4 mr-2"}),"Create Your Classroom"]}):c.jsxs(ee,{onClick:()=>r("classroom"),className:"bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-blue-500/20 transition-all",children:[c.jsx(hg,{className:"h-4 w-4 mr-2"}),"Join a Classroom"]})})]}),c.jsx("section",{className:"bg-gradient-to-br from-blue-900/30 to-purple-900/30 border border-white/10 backdrop-blur-md rounded-xl p-8 animate-fade-in",style:{animationDelay:"0.7s"},children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center",children:[c.jsxs("div",{className:"md:w-1/2",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"For Parents & Educators"}),c.jsx("p",{className:"text-white/70 mb-6 font-normal \\n",children:"LifePath helps young people develop critical thinking and decision-making skills through realistic scenarios. Students can experiment with choices and see their consequences in a safe environment."}),c.jsx(ee,{className:"bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-blue-500/20 transition-all",asChild:!0,children:c.jsx("a",{href:"/about",children:"Learn More"})})]}),c.jsx("div",{className:"md:w-1/2 flex justify-center"})]})})]})]})},rC=({scene:t,onChoiceMade:e,isLiveSession:n=!1,liveSession:s=null,disabled:r=!1})=>{const i=o=>{switch(o){case"health":return c.jsx(zl,{className:"h-4 w-4"});case"money":return c.jsx(Ww,{className:"h-4 w-4"});case"happiness":return c.jsx(Zk,{className:"h-4 w-4"});case"knowledge":return c.jsx(Bl,{className:"h-4 w-4"});case"relationships":return c.jsx(St,{className:"h-4 w-4"});default:return null}},a=o=>o>0?"text-green-400":o<0?"text-red-400":"text-white/70";return c.jsxs(Ie,{className:"w-full max-w-4xl mx-auto bg-black/40 border-primary/20 backdrop-blur-lg shadow-xl animate-fade-in",children:[c.jsxs(_t,{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n&&c.jsxs(Oe,{className:"bg-green-500/20 text-green-300 border-0",children:[c.jsx(ql,{className:"h-3 w-3 mr-1"}),"Live Session"]}),t.isEnding&&c.jsxs(Oe,{className:"bg-purple-500/20 text-purple-300 border-0",children:[c.jsx(Qs,{className:"h-3 w-3 mr-1"}),"Final Scene"]})]}),c.jsx(Ft,{className:"text-2xl text-white mb-4",children:t.title}),c.jsx(vn,{className:"text-lg text-white/90 leading-relaxed",children:t.description})]}),c.jsxs(ze,{children:[c.jsx("div",{className:"space-y-4",children:t.choices.map(o=>c.jsx("div",{className:"space-y-2",children:c.jsxs(ee,{variant:"outline",className:"w-full justify-between py-6 px-6 text-left border-white/10 bg-black/30 hover:bg-white/10 text-white transition-all duration-200 group disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>e(o.id),disabled:r,children:[c.jsx("span",{className:"text-base leading-relaxed",children:o.text}),o.metricChanges&&Object.keys(o.metricChanges).length>0&&c.jsx("div",{className:"flex gap-2 ml-4 opacity-70 group-hover:opacity-100 transition-opacity",children:Object.entries(o.metricChanges).map(([l,u])=>c.jsxs("div",{className:`flex items-center gap-1 ${a(u)}`,children:[i(l),c.jsxs("span",{className:"text-sm font-mono",children:[u>0?"+":"",u]})]},l))})]})},o.id))}),n&&s&&c.jsxs("div",{className:"mt-6 p-4 bg-black/20 rounded-lg border border-blue-500/20",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-white/70",children:[c.jsxs("span",{children:["Live Session: ",s.scenarioTitle]}),c.jsxs("span",{children:["Participants: ",s.participants.length]})]}),r&&c.jsx("div",{className:"mt-2 text-xs text-yellow-400",children:" Your vote has been recorded. Waiting for other students..."})]})]})]})};var d_="Progress",h_=100,[zQ,gse]=_s(d_),[HQ,qQ]=zQ(d_),YM=y.forwardRef((t,e)=>{const{__scopeProgress:n,value:s=null,max:r,getValueLabel:i=GQ,...a}=t;(r||r===0)&&!iC(r)&&console.error($Q(`${r}`,"Progress"));const o=iC(r)?r:h_;s!==null&&!aC(s,o)&&console.error(YQ(`${s}`,"Progress"));const l=aC(s,o)?s:null,u=Zm(l)?i(l,o):void 0;return c.jsx(HQ,{scope:n,value:l,max:o,children:c.jsx(we.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Zm(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":QM(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});YM.displayName=d_;var KM="ProgressIndicator",WM=y.forwardRef((t,e)=>{const{__scopeProgress:n,...s}=t,r=qQ(KM,n);return c.jsx(we.div,{"data-state":QM(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});WM.displayName=KM;function GQ(t,e){return`${Math.round(t/e*100)}%`}function QM(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Zm(t){return typeof t=="number"}function iC(t){return Zm(t)&&!isNaN(t)&&t>0}function aC(t,e){return Zm(t)&&!isNaN(t)&&t<=e&&t>=0}function $Q(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${h_}\`.`}function YQ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${h_} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var XM=YM,KQ=WM;const hd=y.forwardRef(({className:t,value:e,...n},s)=>c.jsx(XM,{ref:s,className:me("relative h-2 w-full overflow-hidden rounded-full bg-primary/10",t),...n,children:c.jsx(KQ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));hd.displayName=XM.displayName;const ZM=({metrics:t,compact:e=!1})=>{const n=[{key:"health",label:"Health",icon:zl,color:"bg-neon-red",textColor:"text-neon-red",bgColor:"bg-neon-red/20"},{key:"money",label:"Money",icon:Ww,color:"bg-neon-green",textColor:"text-neon-green",bgColor:"bg-neon-green/20"},{key:"happiness",label:"Happiness",icon:Zk,color:"bg-neon-yellow",textColor:"text-neon-yellow",bgColor:"bg-neon-yellow/20"},{key:"knowledge",label:"Knowledge",icon:Ws,color:"bg-neon-blue",textColor:"text-neon-blue",bgColor:"bg-neon-blue/20"},{key:"relationships",label:"Relationships",icon:St,color:"bg-neon-purple",textColor:"text-neon-purple",bgColor:"bg-neon-purple/20"}];return e?c.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:n.map(({key:s,icon:r,color:i,textColor:a,bgColor:o},l)=>{const u=t[s],h=`${l*.1}s`;return c.jsx(yD,{children:c.jsxs(iF,{children:[c.jsx(aF,{asChild:!0,children:c.jsxs("div",{className:`stat-badge ${o} ${a} animate-scale-in`,style:{animationDelay:h},children:[c.jsx(r,{size:14,className:"animate-pulse-slow"}),c.jsx("span",{children:u})]})}),c.jsx(vD,{className:"bg-black/80 backdrop-blur-md border-white/10 shadow-lg shadow-primary/10",children:c.jsxs("p",{children:[s.charAt(0).toUpperCase()+s.slice(1),": ",u,"/100"]})})]})},s)})}):c.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-5",children:n.map(({key:s,label:r,icon:i,color:a,bgColor:o},l)=>{const u=t[s],h=`${l*.1}s`;return c.jsxs("div",{className:"glassmorphic-card p-3 rounded-lg animate-scale-in",style:{animationDelay:h},children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:`${o} p-1 rounded-full`,children:c.jsx(i,{size:16,className:`${a.replace("bg-","text-")} animate-pulse-slow`})}),c.jsx("span",{className:"font-medium text-white",children:r})]}),c.jsx(hd,{value:u,className:`h-2 ${a} bg-white/10`}),c.jsxs("div",{className:"text-right text-sm mt-1 text-white/70",children:[u,"/100"]})]},s)})})},WQ=({gameState:t,onPlayAgain:e,onReturnHome:n})=>{const s=Xw();t.history.reduce((h,f)=>(Object.entries(f.metricChanges).forEach(([m,p])=>{p&&(h[m]=(h[m]||0)+p)}),h),{});const r=()=>{const{metrics:h}=t;return h.money>80?"You've become quite the financial wizard! Your money management skills are impressive.":h.relationships>80?"You've built strong relationships that will support you throughout life!":h.knowledge>80?"Your dedication to learning has made you exceptionally knowledgeable!":h.happiness>80?"You've prioritized your happiness and it shows! You're thriving emotionally.":h.health>80?"Your health-conscious decisions have paid off with excellent well-being!":Object.values(h).every(f=>f>60)?"You've achieved a great balance in life across all areas!":Object.values(h).some(f=>f<30)?"You've faced some challenges, but every struggle is a learning opportunity.":"You've completed your journey with a unique set of experiences and outcomes!"},i=()=>{const{metrics:h}=t,f=[];return h.money>75&&f.push({title:"Financial Wizard",description:"Masterful management of your finances",icon:c.jsx(Ym,{className:"h-5 w-5 text-neon-yellow"})}),h.health>75&&f.push({title:"Health Champion",description:"Prioritized your physical wellbeing",icon:c.jsx(zl,{className:"h-5 w-5 text-neon-red"})}),h.knowledge>75&&f.push({title:"Knowledge Seeker",description:"Pursued learning at every opportunity",icon:c.jsx(Bl,{className:"h-5 w-5 text-neon-blue"})}),h.relationships>75&&f.push({title:"Social Butterfly",description:"Built meaningful connections with others",icon:c.jsx(zl,{className:"h-5 w-5 text-neon-purple"})}),h.happiness>75&&f.push({title:"Joy Master",description:"Found happiness along your journey",icon:c.jsx(us,{className:"h-5 w-5 text-neon-yellow"})}),Object.values(h).every(m=>m>60)&&f.push({title:"Balanced Achiever",description:"Maintained balance in all areas of life",icon:c.jsx(Hl,{className:"h-5 w-5 text-neon-green"})}),f},a=()=>{const{metrics:h}=t,f=[];switch(Object.entries(h).reduce((p,[E,w])=>w<p.value?{key:E,value:w}:p,{key:"",value:100}).key){case"money":f.push("Consider creating a simple budget to track your income and expenses.");break;case"health":f.push("Small daily habits like taking short walks can greatly improve your overall health.");break;case"knowledge":f.push("Setting aside just 15 minutes a day for learning can lead to major knowledge gains.");break;case"relationships":f.push("Quality connections often matter more than the quantity of relationships.");break;case"happiness":f.push("Taking time for activities you enjoy is essential for your emotional wellbeing.");break;default:f.push("Reflecting on your decisions helps build better decision-making skills.")}return f.push("The choices that seem small today can have significant impacts on your future self."),f},o=()=>{const{metrics:h,history:f}=t,m=f.filter(E=>{var v;const w=(v=t.currentScenario)==null?void 0:v.scenes.find(b=>b.id===E.sceneId),x=w==null?void 0:w.choices.find(b=>b.id===E.choiceId);return(x==null?void 0:x.metricChanges.money)&&x.metricChanges.money<-5}).length,p=f.filter(E=>{var v;const w=(v=t.currentScenario)==null?void 0:v.scenes.find(b=>b.id===E.sceneId),x=w==null?void 0:w.choices.find(b=>b.id===E.choiceId);return(x==null?void 0:x.metricChanges.money)&&x.metricChanges.money>5}).length;return m>p?"You tend to make bold, sometimes risky decisions. While this can lead to exciting opportunities, consider balancing with some caution.":p>m?"You prefer safe, reliable choices. This stability is valuable, but occasionally taking calculated risks might open new doors.":"You balance risk and caution well in your decisions, adapting to situations thoughtfully."};if(!t.currentScenario||!t.currentScene)return null;const l=i(),u=a();return c.jsx("div",{className:"w-full max-w-4xl mx-auto animate-scale-in",children:c.jsxs(Ie,{className:"shadow-lg border-primary/20 glassmorphic-card",children:[c.jsxs(_t,{className:"text-center pb-2",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsxs("div",{className:"p-4 rounded-full bg-gradient-to-r from-primary/30 to-secondary/30 backdrop-blur-md border border-primary/50 animate-glow relative",children:[c.jsx(ud,{className:"h-8 w-8 text-neon-yellow animate-float"}),c.jsx(pn,{className:"h-4 w-4 absolute top-0 right-0 text-neon-yellow animate-pulse"}),c.jsx(pn,{className:"h-4 w-4 absolute bottom-0 left-0 text-neon-yellow animate-pulse",style:{animationDelay:"1s"}})]})}),c.jsxs(Ft,{className:"text-2xl gradient-heading flex items-center justify-center gap-2",children:[c.jsx(us,{className:"h-5 w-5 text-neon-yellow animate-pulse"}),"Your Journey Results",c.jsx(us,{className:"h-5 w-5 text-neon-yellow animate-pulse",style:{animationDelay:"0.5s"}})]}),c.jsxs(vn,{className:"text-base mt-1 text-white/90",children:[`Here's how your choices shaped your path through "`,t.currentScenario.title,'"']})]}),c.jsxs(ze,{className:"space-y-6",children:[c.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-lg border border-primary/30 animate-slide-up relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm -z-10"}),c.jsxs("h3",{className:"font-medium text-lg mb-2 flex items-center gap-2 text-white",children:[c.jsx(JK,{className:"text-neon-yellow"}),"Journey Outcome"]}),c.jsx("p",{className:"text-base text-white/90",children:r()})]}),c.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:[c.jsxs("h3",{className:"font-medium text-lg mb-3 text-white flex items-center gap-2",children:[c.jsx(pn,{className:"h-5 w-5 text-primary"}),"Final Stats"]}),c.jsx(ZM,{metrics:t.metrics,compact:s})]}),l.length>0&&c.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.15s"},children:[c.jsxs("h3",{className:"font-medium text-lg mb-3 text-white flex items-center gap-2",children:[c.jsx(Ym,{className:"h-5 w-5 text-neon-yellow"}),"Achievements Unlocked"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:l.map((h,f)=>c.jsxs("div",{className:"bg-black/30 backdrop-blur-sm p-3 rounded-md border border-neon-yellow/30 hover:border-neon-yellow/60 transition-all flex items-start gap-2",children:[c.jsx("div",{className:"bg-gradient-to-r from-primary/20 to-secondary/20 p-2 rounded-full",children:h.icon}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-white",children:h.title}),c.jsx("div",{className:"text-xs text-white/70",children:h.description})]})]},f))})]}),c.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:[c.jsxs("h3",{className:"font-medium text-lg mb-3 text-white flex items-center gap-2",children:[c.jsx(Bl,{className:"h-5 w-5 text-neon-blue"}),"Decision Style"]}),c.jsx("div",{className:"bg-black/30 backdrop-blur-sm p-4 rounded-md border border-white/10",children:c.jsx("p",{className:"text-white/90",children:o()})})]}),c.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.25s"},children:[c.jsxs("h3",{className:"font-medium text-lg mb-3 text-white flex items-center gap-2",children:[c.jsx(pn,{className:"h-5 w-5 text-neon-green"}),"Tips For Your Journey"]}),c.jsx("div",{className:"space-y-3",children:u.map((h,f)=>c.jsxs("div",{className:"bg-black/30 backdrop-blur-sm p-3 rounded-md border border-neon-green/20 flex items-start gap-2",children:[c.jsx(qA,{className:"h-4 w-4 text-neon-green mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-white/90 text-sm",children:h})]},f))})]}),c.jsx(dd,{className:"bg-white/20"}),c.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.3s"},children:[c.jsxs("h3",{className:"font-medium text-lg mb-3 text-white flex items-center gap-2",children:[c.jsx(pn,{className:"h-5 w-5 text-primary"}),"Your Journey"]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.history.map((h,f)=>{var w;const m=(w=t.currentScenario)==null?void 0:w.scenes.find(x=>x.id===h.sceneId),p=m==null?void 0:m.choices.find(x=>x.id===h.choiceId),E=`${.3+f*.1}s`;return c.jsxs("div",{className:"bg-black/30 backdrop-blur-sm p-3 rounded-md border border-white/10 animate-slide-up hover:bg-black/40 transition-all duration-200",style:{animationDelay:E},children:[c.jsx("div",{className:"font-medium text-white",children:m==null?void 0:m.title}),c.jsxs("div",{className:"text-sm text-white/70 flex items-start gap-2",children:[c.jsx(qA,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),p==null?void 0:p.text]})]},f)})})]})]}),c.jsxs(vc,{className:"flex flex-col sm:flex-row gap-3 animate-slide-up pt-4",style:{animationDelay:"0.5s"},children:[c.jsxs(ee,{onClick:e,className:"w-full sm:w-auto bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 hover:shadow-lg hover:shadow-primary/20 transition-all duration-300",children:[c.jsx(iW,{className:"h-4 w-4 mr-2"}),"Play Again"]}),c.jsxs(ee,{variant:"outline",onClick:n,className:"w-full sm:w-auto flex items-center gap-2 border-white/20 text-white hover:bg-white/10 bg-black/30",children:[c.jsx(Yk,{size:16}),"Return to Home"]})]})]})})},JM=y.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:me("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));JM.displayName="Textarea";const eO=y.createContext({});function QQ(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const f_=typeof window<"u",XQ=f_?y.useLayoutEffect:y.useEffect,m_=y.createContext(null),tO=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ZQ(t=!0){const e=y.useContext(m_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=y.useId();y.useEffect(()=>{if(t)return r(i)},[t]);const a=y.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,a]:[!0]}function p_(t,e){t.indexOf(e)===-1&&t.push(e)}function g_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ur=(t,e,n)=>n>e?e:n<t?t:n;let y_=()=>{};const Fr={},nO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),sO=t=>/^0[^.\s]+$/u.test(t);function v_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Xn=t=>t,JQ=(t,e)=>n=>e(t(n)),oh=(...t)=>t.reduce(JQ),fd=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class b_{constructor(){this.subscriptions=[]}add(e){return p_(this.subscriptions,e),()=>g_(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bs=t=>t*1e3,zs=t=>t/1e3;function rO(t,e){return e?t*(1e3/e):0}const iO=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,eX=1e-7,tX=12;function nX(t,e,n,s,r){let i,a,o=0;do a=e+(n-e)/2,i=iO(a,s,r)-t,i>0?n=a:e=a;while(Math.abs(i)>eX&&++o<tX);return a}function lh(t,e,n,s){if(t===e&&n===s)return Xn;const r=i=>nX(i,0,1,t,n);return i=>i===0||i===1?i:iO(r(i),e,s)}const aO=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oO=t=>e=>1-t(1-e),lO=lh(.33,1.53,.69,.99),x_=oO(lO),cO=aO(x_),uO=t=>(t*=2)<1?.5*x_(t):.5*(2-Math.pow(2,-10*(t-1))),w_=t=>1-Math.sin(Math.acos(t)),dO=oO(w_),hO=aO(w_),sX=lh(.42,0,1,1),rX=lh(0,0,.58,1),fO=lh(.42,0,.58,1),iX=t=>Array.isArray(t)&&typeof t[0]!="number",mO=t=>Array.isArray(t)&&typeof t[0]=="number",aX={linear:Xn,easeIn:sX,easeInOut:fO,easeOut:rX,circIn:w_,circInOut:hO,circOut:dO,backIn:x_,backInOut:cO,backOut:lO,anticipate:uO},oX=t=>typeof t=="string",oC=t=>{if(mO(t)){y_(t.length===4);const[e,n,s,r]=t;return lh(e,n,s,r)}else if(oX(t))return aX[t];return t},af=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],lC={value:null};function lX(t,e){let n=new Set,s=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(f){a.has(f)&&(h.schedule(f),t()),l++,f(o)}const h={schedule:(f,m=!1,p=!1)=>{const w=p&&r?n:s;return m&&a.add(f),w.has(f)||w.add(f),f},cancel:f=>{s.delete(f),a.delete(f)},process:f=>{if(o=f,r){i=!0;return}r=!0,[n,s]=[s,n],n.forEach(u),e&&lC.value&&lC.value.frameloop[e].push(l),l=0,n.clear(),r=!1,i&&(i=!1,h.process(f))}};return h}const cX=40;function pO(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=af.reduce((_,C)=>(_[C]=lX(i,e?C:void 0),_),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:h,update:f,preRender:m,render:p,postRender:E}=a,w=()=>{const _=Fr.useManualTiming?r.timestamp:performance.now();n=!1,Fr.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(_-r.timestamp,cX),1)),r.timestamp=_,r.isProcessing=!0,o.process(r),l.process(r),u.process(r),h.process(r),f.process(r),m.process(r),p.process(r),E.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(w))},x=()=>{n=!0,s=!0,r.isProcessing||t(w)};return{schedule:af.reduce((_,C)=>{const P=a[C];return _[C]=(M,A=!1,S=!1)=>(n||x(),P.schedule(M,A,S)),_},{}),cancel:_=>{for(let C=0;C<af.length;C++)a[af[C]].cancel(_)},state:r,steps:a}}const{schedule:tt,cancel:Qi,state:jt,steps:rv}=pO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xn,!0);let Lf;function uX(){Lf=void 0}const gn={now:()=>(Lf===void 0&&gn.set(jt.isProcessing||Fr.useManualTiming?jt.timestamp:performance.now()),Lf),set:t=>{Lf=t,queueMicrotask(uX)}},gO=t=>e=>typeof e=="string"&&e.startsWith(t),__=gO("--"),dX=gO("var(--"),T_=t=>dX(t)?hX.test(t.split("/*")[0].trim()):!1,hX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},md={...bc,transform:t=>Ur(0,1,t)},of={...bc,default:1},Cu=t=>Math.round(t*1e5)/1e5,E_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fX(t){return t==null}const mX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,S_=(t,e)=>n=>!!(typeof n=="string"&&mX.test(n)&&n.startsWith(t)||e&&!fX(n)&&Object.prototype.hasOwnProperty.call(n,e)),yO=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,a,o]=s.match(E_);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},pX=t=>Ur(0,255,t),iv={...bc,transform:t=>Math.round(pX(t))},Ta={test:S_("rgb","red"),parse:yO("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+iv.transform(t)+", "+iv.transform(e)+", "+iv.transform(n)+", "+Cu(md.transform(s))+")"};function gX(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const tb={test:S_("#"),parse:gX,transform:Ta.transform},ch=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),si=ch("deg"),Hs=ch("%"),ae=ch("px"),yX=ch("vh"),vX=ch("vw"),cC={...Hs,parse:t=>Hs.parse(t)/100,transform:t=>Hs.transform(t*100)},Ho={test:S_("hsl","hue"),parse:yO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Hs.transform(Cu(e))+", "+Hs.transform(Cu(n))+", "+Cu(md.transform(s))+")"},Kt={test:t=>Ta.test(t)||tb.test(t)||Ho.test(t),parse:t=>Ta.test(t)?Ta.parse(t):Ho.test(t)?Ho.parse(t):tb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ta.transform(t):Ho.transform(t)},bX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xX(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(E_))==null?void 0:e.length)||0)+(((n=t.match(bX))==null?void 0:n.length)||0)>0}const vO="number",bO="color",wX="var",_X="var(",uC="${}",TX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pd(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const o=e.replace(TX,l=>(Kt.test(l)?(s.color.push(i),r.push(bO),n.push(Kt.parse(l))):l.startsWith(_X)?(s.var.push(i),r.push(wX),n.push(l)):(s.number.push(i),r.push(vO),n.push(parseFloat(l))),++i,uC)).split(uC);return{values:n,split:o,indexes:s,types:r}}function xO(t){return pd(t).values}function wO(t){const{split:e,types:n}=pd(t),s=e.length;return r=>{let i="";for(let a=0;a<s;a++)if(i+=e[a],r[a]!==void 0){const o=n[a];o===vO?i+=Cu(r[a]):o===bO?i+=Kt.transform(r[a]):i+=r[a]}return i}}const EX=t=>typeof t=="number"?0:t;function SX(t){const e=xO(t);return wO(t)(e.map(EX))}const Xi={test:xX,parse:xO,createTransformer:wO,getAnimatableNone:SX};function av(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AX({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,a=0;if(!e)r=i=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=av(l,o,t+1/3),i=av(l,o,t),a=av(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}function Jm(t,e){return n=>n>0?e:t}const et=(t,e,n)=>t+(e-t)*n,ov=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},CX=[tb,Ta,Ho],RX=t=>CX.find(e=>e.test(t));function dC(t){const e=RX(t);if(!e)return!1;let n=e.parse(t);return e===Ho&&(n=AX(n)),n}const hC=(t,e)=>{const n=dC(t),s=dC(e);if(!n||!s)return Jm(t,e);const r={...n};return i=>(r.red=ov(n.red,s.red,i),r.green=ov(n.green,s.green,i),r.blue=ov(n.blue,s.blue,i),r.alpha=et(n.alpha,s.alpha,i),Ta.transform(r))},nb=new Set(["none","hidden"]);function NX(t,e){return nb.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function IX(t,e){return n=>et(t,e,n)}function A_(t){return typeof t=="number"?IX:typeof t=="string"?T_(t)?Jm:Kt.test(t)?hC:jX:Array.isArray(t)?_O:typeof t=="object"?Kt.test(t)?hC:DX:Jm}function _O(t,e){const n=[...t],s=n.length,r=t.map((i,a)=>A_(i)(i,e[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}}function DX(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=A_(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function PX(t,e){const n=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],a=t.indexes[i][s[i]],o=t.values[a]??0;n[r]=o,s[i]++}return n}const jX=(t,e)=>{const n=Xi.createTransformer(e),s=pd(t),r=pd(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?nb.has(t)&&!r.values.length||nb.has(e)&&!s.values.length?NX(t,e):oh(_O(PX(s,r),r.values),n):Jm(t,e)};function TO(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?et(t,e,n):A_(t)(t,e)}const kX=t=>{const e=({timestamp:n})=>t(n);return{start:()=>tt.update(e,!0),stop:()=>Qi(e),now:()=>jt.isProcessing?jt.timestamp:gn.now()}},EO=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=t(i/(r-1))+", ";return`linear(${s.substring(0,s.length-2)})`},ep=2e4;function C_(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<ep;)e+=n,s=t.next(e);return e>=ep?1/0:e}function MX(t,e=100,n){const s=n({...t,keyframes:[0,e]}),r=Math.min(C_(s),ep);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:zs(r)}}const OX=5;function SO(t,e,n){const s=Math.max(e-OX,0);return rO(n-t(s),e-s)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fC=.001;function VX({duration:t=it.duration,bounce:e=it.bounce,velocity:n=it.velocity,mass:s=it.mass}){let r,i,a=1-e;a=Ur(it.minDamping,it.maxDamping,a),t=Ur(it.minDuration,it.maxDuration,zs(t)),a<1?(r=u=>{const h=u*a,f=h*t,m=h-n,p=sb(u,a),E=Math.exp(-f);return fC-m/p*E},i=u=>{const f=u*a*t,m=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*t,E=Math.exp(-f),w=sb(Math.pow(u,2),a);return(-r(u)+fC>0?-1:1)*((m-p)*E)/w}):(r=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-.001+h*f},i=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const o=5/t,l=UX(r,i,o);if(t=Bs(t),isNaN(l))return{stiffness:it.stiffness,damping:it.damping,duration:t};{const u=Math.pow(l,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:t}}}const LX=12;function UX(t,e,n){let s=n;for(let r=1;r<LX;r++)s=s-t(s)/e(s);return s}function sb(t,e){return t*Math.sqrt(1-e*e)}const FX=["duration","bounce"],BX=["stiffness","damping","mass"];function mC(t,e){return e.some(n=>t[n]!==void 0)}function zX(t){let e={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...t};if(!mC(t,BX)&&mC(t,FX))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*Ur(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:it.mass,stiffness:r,damping:i}}else{const n=VX(t);e={...e,...n,mass:it.mass},e.isResolvedFromDuration=!0}return e}function tp(t=it.visualDuration,e=it.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:u,mass:h,duration:f,velocity:m,isResolvedFromDuration:p}=zX({...n,velocity:-zs(n.velocity||0)}),E=m||0,w=u/(2*Math.sqrt(l*h)),x=a-i,v=zs(Math.sqrt(l/h)),b=Math.abs(x)<5;s||(s=b?it.restSpeed.granular:it.restSpeed.default),r||(r=b?it.restDelta.granular:it.restDelta.default);let _;if(w<1){const P=sb(v,w);_=M=>{const A=Math.exp(-w*v*M);return a-A*((E+w*v*x)/P*Math.sin(P*M)+x*Math.cos(P*M))}}else if(w===1)_=P=>a-Math.exp(-v*P)*(x+(E+v*x)*P);else{const P=v*Math.sqrt(w*w-1);_=M=>{const A=Math.exp(-w*v*M),S=Math.min(P*M,300);return a-A*((E+w*v*x)*Math.sinh(S)+P*x*Math.cosh(S))/P}}const C={calculatedDuration:p&&f||null,next:P=>{const M=_(P);if(p)o.done=P>=f;else{let A=P===0?E:0;w<1&&(A=P===0?Bs(E):SO(_,P,M));const S=Math.abs(A)<=s,N=Math.abs(a-M)<=r;o.done=S&&N}return o.value=o.done?a:M,o},toString:()=>{const P=Math.min(C_(C),ep),M=EO(A=>C.next(P*A).value,P,30);return P+"ms "+M},toTransition:()=>{}};return C}tp.applyToOptions=t=>{const e=MX(t,100,tp);return t.ease=e.ease,t.duration=Bs(e.duration),t.type="keyframes",t};function rb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},p=S=>o!==void 0&&S<o||l!==void 0&&S>l,E=S=>o===void 0?l:l===void 0||Math.abs(o-S)<Math.abs(l-S)?o:l;let w=n*e;const x=f+w,v=a===void 0?x:a(x);v!==x&&(w=v-f);const b=S=>-w*Math.exp(-S/s),_=S=>v+b(S),C=S=>{const N=b(S),R=_(S);m.done=Math.abs(N)<=u,m.value=m.done?v:R};let P,M;const A=S=>{p(m.value)&&(P=S,M=tp({keyframes:[m.value,E(m.value)],velocity:SO(_,S,m.value),damping:r,stiffness:i,restDelta:u,restSpeed:h}))};return A(0),{calculatedDuration:null,next:S=>{let N=!1;return!M&&P===void 0&&(N=!0,C(S),A(S)),P!==void 0&&S>=P?M.next(S-P):(!N&&C(S),m)}}}function HX(t,e,n){const s=[],r=n||Fr.mix||TO,i=t.length-1;for(let a=0;a<i;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Xn:e;o=oh(l,o)}s.push(o)}return s}function qX(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(y_(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=HX(e,s,r),l=o.length,u=h=>{if(a&&h<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const m=fd(t[f],t[f+1],h);return o[f](m)};return n?h=>u(Ur(t[0],t[i-1],h)):u}function GX(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=fd(0,e,s);t.push(et(n,1,r))}}function $X(t){const e=[0];return GX(e,t.length-1),e}function YX(t,e){return t.map(n=>n*e)}function KX(t,e){return t.map(()=>e||fO).splice(0,t.length-1)}function Ru({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=iX(s)?s.map(oC):oC(s),i={done:!1,value:e[0]},a=YX(n&&n.length===e.length?n:$X(e),t),o=qX(a,e,{ease:Array.isArray(r)?r:KX(e,r)});return{calculatedDuration:t,next:l=>(i.value=o(l),i.done=l>=t,i)}}const WX=t=>t!==null;function R_(t,{repeat:e,repeatType:n="loop"},s,r=1){const i=t.filter(WX),o=r<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||s===void 0?i[o]:s}const QX={decay:rb,inertia:rb,tween:Ru,keyframes:Ru,spring:tp};function AO(t){typeof t.type=="string"&&(t.type=QX[t.type])}class N_{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const XX=t=>t/100;class CO extends N_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==gn.now()&&this.tick(gn.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:s}=this.options;s&&s()},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;AO(e);const{type:n=Ru,repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=e;let{keyframes:o}=e;const l=n||Ru;l!==Ru&&typeof o[0]!="number"&&(this.mixKeyframes=oh(XX,TO(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=C_(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:h,repeat:f,repeatType:m,repeatDelay:p,type:E,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?v<0:v>r;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let _=this.currentTime,C=s;if(f){const S=Math.min(this.currentTime,r)/o;let N=Math.floor(S),R=S%1;!R&&S>=1&&(R=1),R===1&&N--,N=Math.min(N,f+1),!!(N%2)&&(m==="reverse"?(R=1-R,p&&(R-=p/o)):m==="mirror"&&(C=a)),_=Ur(0,1,R)*o}const P=b?{done:!1,value:h[0]}:C.next(_);i&&(P.value=i(P.value));let{done:M}=P;!b&&l!==null&&(M=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return A&&E!==rb&&(P.value=R_(h,this.options,x,this.speed)),w&&w(P.value),A&&this.finish(),P}then(e,n){return this.finished.then(e,n)}get duration(){return zs(this.calculatedDuration)}get time(){return zs(this.currentTime)}set time(e){e=Bs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(gn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zs(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kX,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(gn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),e.observe(this)}}function ZX(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ea=t=>t*180/Math.PI,ib=t=>{const e=Ea(Math.atan2(t[1],t[0]));return ab(e)},JX={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ib,rotateZ:ib,skewX:t=>Ea(Math.atan(t[1])),skewY:t=>Ea(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ab=t=>(t=t%360,t<0&&(t+=360),t),pC=ib,gC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),yC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),eZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gC,scaleY:yC,scale:t=>(gC(t)+yC(t))/2,rotateX:t=>ab(Ea(Math.atan2(t[6],t[5]))),rotateY:t=>ab(Ea(Math.atan2(-t[2],t[0]))),rotateZ:pC,rotate:pC,skewX:t=>Ea(Math.atan(t[4])),skewY:t=>Ea(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vC(t){return t.includes("scale")?1:0}function ob(t,e){if(!t||t==="none")return vC(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=eZ,r=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=JX,r=o}if(!r)return vC(e);const i=s[e],a=r[1].split(",").map(nZ);return typeof i=="function"?i(a):a[i]}const tZ=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ob(n,e)};function nZ(t){return parseFloat(t.trim())}const xc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wc=new Set(xc),bC=t=>t===bc||t===ae,sZ=new Set(["x","y","z"]),rZ=xc.filter(t=>!sZ.has(t));function iZ(t){const e=[];return rZ.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const $l={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ob(e,"x"),y:(t,{transform:e})=>ob(e,"y")};$l.translateX=$l.x;$l.translateY=$l.y;const Va=new Set;let lb=!1,cb=!1,ub=!1;function RO(){if(cb){const t=Array.from(Va).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=iZ(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,a])=>{var o;(o=s.getValue(i))==null||o.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}cb=!1,lb=!1,Va.forEach(t=>t.complete(ub)),Va.clear()}function NO(){Va.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(cb=!0)})}function aZ(){ub=!0,NO(),RO(),ub=!1}class I_{constructor(e,n,s,r,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Va.add(this),lb||(lb=!0,tt.read(NO),tt.resolveKeyframes(RO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;if(e[0]===null){const i=r==null?void 0:r.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const o=s.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),r&&i===void 0&&r.set(e[0])}ZX(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Va.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Va.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const oZ=t=>t.startsWith("--");function lZ(t,e,n){oZ(e)?t.style.setProperty(e,n):t.style[e]=n}const cZ=v_(()=>window.ScrollTimeline!==void 0),uZ={};function dZ(t,e){const n=v_(t);return()=>uZ[e]??n()}const IO=dZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nu=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,xC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nu([0,.65,.55,1]),circOut:nu([.55,0,1,.45]),backIn:nu([.31,.01,.66,-.59]),backOut:nu([.33,1.53,.69,.99])};function DO(t,e){if(t)return typeof t=="function"?IO()?EO(t,e):"ease-out":mO(t)?nu(t):Array.isArray(t)?t.map(n=>DO(n,e)||xC.easeOut):xC[t]}function hZ(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const h={[e]:n};l&&(h.offset=l);const f=DO(o,r);Array.isArray(f)&&(h.easing=f);const m={delay:s,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(h,m)}function PO(t){return typeof t=="function"&&"applyToOptions"in t}function fZ({type:t,...e}){return PO(t)&&IO()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mZ extends N_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,y_(typeof e.type!="string");const u=fZ(e);this.animation=hZ(n,s,r,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=R_(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(h):lZ(n,s,h),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return zs(Number(e))}get time(){return zs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Bs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&cZ()?(this.animation.timeline=e,Xn):n(this)}}const jO={anticipate:uO,backInOut:cO,circInOut:hO};function pZ(t){return t in jO}function gZ(t){typeof t.ease=="string"&&pZ(t.ease)&&(t.ease=jO[t.ease])}const wC=10;class yZ extends mZ{constructor(e){gZ(e),AO(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:r,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new CO({...a,autoplay:!1}),l=Bs(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-wC).value,o.sample(l).value,wC),o.stop()}}const _C=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xi.test(t)||t==="0")&&!t.startsWith("url("));function vZ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function bZ(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=_C(r,e),o=_C(i,e);return!a||!o?!1:vZ(t)||(n==="spring"||PO(n))&&s}const xZ=new Set(["opacity","clipPath","filter","transform"]),wZ=v_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _Z(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:i,type:a}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=e.owner.getProps();return wZ()&&n&&xZ.has(n)&&(n!=="transform"||!l)&&!o&&!s&&r!=="mirror"&&i!==0&&a!=="inertia"}const TZ=40;class EZ extends N_{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:h,...f}){var E;super(),this.stop=()=>{var w,x;this._animation?(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)):(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=gn.now();const m={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:a,name:l,motionValue:u,element:h,...f},p=(h==null?void 0:h.KeyframeResolver)||I_;this.keyframeResolver=new p(o,(w,x,v)=>this.onKeyframesResolved(w,x,m,!v),l,u,h),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,n,s,r){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:h}=s;this.resolvedAt=gn.now(),bZ(e,i,a,o)||((Fr.instantAnimations||!l)&&(h==null||h(R_(e,s,n))),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const m={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>TZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},p=!u&&_Z(m)?new yZ({...m,element:m.motionValue.owner.current}):new CO(m);p.finished.then(()=>this.notifyFinished()).catch(Xn),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||aZ(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const SZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AZ(t){const e=SZ.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function kO(t,e,n=1){const[s,r]=AZ(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const a=i.trim();return nO(a)?parseFloat(a):a}return T_(r)?kO(r,e,n+1):r}function D_(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const MO=new Set(["width","height","top","left","right","bottom",...xc]),CZ={test:t=>t==="auto",parse:t=>t},OO=t=>e=>e.test(t),VO=[bc,ae,Hs,si,vX,yX,CZ],TC=t=>VO.find(OO(t));function RZ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sO(t):!0}const NZ=new Set(["brightness","contrast","saturate","opacity"]);function IZ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(E_)||[];if(!s)return t;const r=n.replace(s,"");let i=NZ.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const DZ=/\b([a-z-]*)\(.*?\)/gu,db={...Xi,getAnimatableNone:t=>{const e=t.match(DZ);return e?e.map(IZ).join(" "):t}},EC={...bc,transform:Math.round},PZ={rotate:si,rotateX:si,rotateY:si,rotateZ:si,scale:of,scaleX:of,scaleY:of,scaleZ:of,skew:si,skewX:si,skewY:si,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:md,originX:cC,originY:cC,originZ:ae},P_={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae,...PZ,zIndex:EC,fillOpacity:md,strokeOpacity:md,numOctaves:EC},jZ={...P_,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:db,WebkitFilter:db},LO=t=>jZ[t];function UO(t,e){let n=LO(t);return n!==db&&(n=Xi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kZ=new Set(["auto","none","0"]);function MZ(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!kZ.has(i)&&pd(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=UO(n,r)}class OZ extends I_{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),T_(u))){const h=kO(u,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!MO.has(s)||e.length!==2)return;const[r,i]=e,a=TC(r),o=TC(i);if(a!==o)if(bC(a)&&bC(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||RZ(e[r]))&&s.push(r);s.length&&MZ(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$l[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,a=s[i];s[i]=$l[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function VZ(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const r=(n==null?void 0:n[t])??s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const{schedule:j_}=pO(queueMicrotask,!1),is={x:!1,y:!1};function FO(){return is.x||is.y}function LZ(t){return t==="x"||t==="y"?is[t]?null:(is[t]=!0,()=>{is[t]=!1}):is.x||is.y?null:(is.x=is.y=!0,()=>{is.x=is.y=!1})}function BO(t,e){const n=VZ(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function SC(t){return!(t.pointerType==="touch"||FO())}function UZ(t,e,n={}){const[s,r,i]=BO(t,n),a=o=>{if(!SC(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const h=f=>{SC(f)&&(u(f),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,r)};return s.forEach(o=>{o.addEventListener("pointerenter",a,r)}),i}const zO=(t,e)=>e?t===e?!0:zO(t,e.parentElement):!1,k_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,FZ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BZ(t){return FZ.has(t.tagName)||t.tabIndex!==-1}const su=new WeakSet;function AC(t){return e=>{e.key==="Enter"&&t(e)}}function lv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zZ=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=AC(()=>{if(su.has(n))return;lv(n,"down");const r=AC(()=>{lv(n,"up")}),i=()=>lv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function CC(t){return k_(t)&&!FO()}function HZ(t,e,n={}){const[s,r,i]=BO(t,n),a=o=>{const l=o.currentTarget;if(!CC(o)||su.has(l))return;su.add(l);const u=e(l,o),h=(p,E)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!CC(p)||!su.has(l))&&(su.delete(l),typeof u=="function"&&u(p,{success:E}))},f=p=>{h(p,l===window||l===document||n.useGlobalTarget||zO(l,p.target))},m=p=>{h(p,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",m,r)};return s.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o instanceof HTMLElement&&(o.addEventListener("focus",u=>zZ(u,r)),!BZ(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}const RC=30,qZ=t=>!isNaN(parseFloat(t));class GZ{constructor(e,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{var a,o;const i=gn.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current)),r&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=gn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qZ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new b_);const s=this.events[e].add(n);return e==="change"?()=>{s(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=gn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>RC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,RC);return rO(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e;(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gd(t,e){return new GZ(t,e)}const $Z=[...VO,Kt,Xi],YZ=t=>$Z.find(OO(t)),HO=(t,e)=>e&&typeof t=="number"?e.transform(t):t,qO=y.createContext({strict:!1}),NC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yl={};for(const t in NC)Yl[t]={isEnabled:e=>NC[t].some(n=>!!e[n])};function KZ(t){for(const e in t)Yl[e]={...Yl[e],...t[e]}}const WZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function np(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||WZ.has(t)}let GO=t=>!np(t);function QZ(t){t&&(GO=e=>e.startsWith("on")?!np(e):t(e))}try{QZ(require("@emotion/is-prop-valid").default)}catch{}function XZ(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(GO(r)||n===!0&&np(r)||!e&&!np(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}function ZZ(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const xg=y.createContext({});function wg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function yd(t){return typeof t=="string"||Array.isArray(t)}const M_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],O_=["initial",...M_];function _g(t){return wg(t.animate)||O_.some(e=>yd(t[e]))}function $O(t){return!!(_g(t)||t.variants)}function JZ(t,e){if(_g(t)){const{initial:n,animate:s}=t;return{initial:n===!1||yd(n)?n:void 0,animate:yd(s)?s:void 0}}return t.inherit!==!1?e:{}}function eJ(t){const{initial:e,animate:n}=JZ(t,y.useContext(xg));return y.useMemo(()=>({initial:e,animate:n}),[IC(e),IC(n)])}function IC(t){return Array.isArray(t)?t.join(" "):t}const tJ=Symbol.for("motionComponentSymbol");function qo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nJ(t,e,n){return y.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):qo(n)&&(n.current=s))},[e])}const V_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sJ="framerAppearId",YO="data-"+V_(sJ),KO=y.createContext({});function rJ(t,e,n,s,r){var w,x;const{visualElement:i}=y.useContext(xg),a=y.useContext(qO),o=y.useContext(m_),l=y.useContext(tO).reducedMotion,u=y.useRef(null);s=s||a.renderer,!u.current&&s&&(u.current=s(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const h=u.current,f=y.useContext(KO);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&iJ(u.current,n,r,f);const m=y.useRef(!1);y.useInsertionEffect(()=>{h&&m.current&&h.update(n,o)});const p=n[YO],E=y.useRef(!!p&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return XQ(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),j_.render(h.render),E.current&&h.animationState&&h.animationState.animateChanges())}),y.useEffect(()=>{h&&(!E.current&&h.animationState&&h.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,p)}),E.current=!1))}),h}function iJ(t,e,n,s){const{layoutId:r,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:WO(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!a||o&&qo(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:l,layoutRoot:u})}function WO(t){if(t)return t.options.allowProjection!==!1?t.projection:WO(t.parent)}function aJ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:r}){t&&KZ(t);function i(o,l){let u;const h={...y.useContext(tO),...o,layoutId:oJ(o)},{isStatic:f}=h,m=eJ(o),p=s(o,f);if(!f&&f_){lJ();const E=cJ(h);u=E.MeasureLayout,m.visualElement=rJ(r,p,h,e,E.ProjectionNode)}return c.jsxs(xg.Provider,{value:m,children:[u&&m.visualElement?c.jsx(u,{visualElement:m.visualElement,...h}):null,n(r,o,nJ(p,m.visualElement,l),p,f,m.visualElement)]})}i.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const a=y.forwardRef(i);return a[tJ]=r,a}function oJ({layoutId:t}){const e=y.useContext(eO).id;return e&&t!==void 0?e+"-"+t:t}function lJ(t,e){y.useContext(qO).strict}function cJ(t){const{drag:e,layout:n}=Yl;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const vd={};function uJ(t){for(const e in t)vd[e]=t[e],__(e)&&(vd[e].isCSSVariable=!0)}function QO(t,{layout:e,layoutId:n}){return wc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vd[t]||t==="opacity")}const Zt=t=>!!(t&&t.getVelocity),dJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hJ=xc.length;function fJ(t,e,n){let s="",r=!0;for(let i=0;i<hJ;i++){const a=xc[i],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=HO(o,P_[a]);if(!l){r=!1;const h=dJ[a]||a;s+=`${h}(${u}) `}n&&(e[a]=u)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function L_(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(wc.has(l)){a=!0;continue}else if(__(l)){r[l]=u;continue}else{const h=HO(u,P_[l]);l.startsWith("origin")?(o=!0,i[l]=h):s[l]=h}}if(e.transform||(a||n?s.transform=fJ(e,t.transform,n):s.transform&&(s.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:h=0}=i;s.transformOrigin=`${l} ${u} ${h}`}}const U_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XO(t,e,n){for(const s in e)!Zt(e[s])&&!QO(s,n)&&(t[s]=e[s])}function mJ({transformTemplate:t},e){return y.useMemo(()=>{const n=U_();return L_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function pJ(t,e){const n=t.style||{},s={};return XO(s,n,t),Object.assign(s,mJ(t,e)),s}function gJ(t,e){const n={},s=pJ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const yJ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function F_(t){return typeof t!="string"||t.includes("-")?!1:!!(yJ.indexOf(t)>-1||/[A-Z]/u.test(t))}const vJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},bJ={offset:"strokeDashoffset",array:"strokeDasharray"};function xJ(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?vJ:bJ;t[i.offset]=ae.transform(-s);const a=ae.transform(e),o=ae.transform(n);t[i.array]=`${a} ${o}`}function ZO(t,{attrX:e,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:a=0,...o},l,u){if(L_(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox="fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),r!==void 0&&xJ(h,r,i,a,!1)}const JO=()=>({...U_(),attrs:{}}),e4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wJ(t,e,n,s){const r=y.useMemo(()=>{const i=JO();return ZO(i,e,e4(s),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};XO(i,t.style,t),r.style={...i,...r.style}}return r}function _J(t=!1){return(n,s,r,{latestValues:i},a)=>{const l=(F_(n)?wJ:gJ)(s,i,a,n),u=XZ(s,typeof n=="string",t),h=n!==y.Fragment?{...u,...l,ref:r}:{},{children:f}=s,m=y.useMemo(()=>Zt(f)?f.get():f,[f]);return y.createElement(n,{...h,children:m})}}function DC(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function B_(t,e,n,s){if(typeof e=="function"){const[r,i]=DC(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=DC(s);e=e(n!==void 0?n:t.custom,r,i)}return e}function Uf(t){return Zt(t)?t.get():t}function TJ({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,r){return{latestValues:EJ(n,s,r,t),renderState:e()}}const t4=t=>(e,n)=>{const s=y.useContext(xg),r=y.useContext(m_),i=()=>TJ(t,e,s,r);return n?i():QQ(i)};function EJ(t,e,n,s){const r={},i=s(t,{});for(const m in i)r[m]=Uf(i[m]);let{initial:a,animate:o}=t;const l=_g(t),u=$O(t);e&&u&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const f=h?o:a;if(f&&typeof f!="boolean"&&!wg(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const E=B_(t,m[p]);if(E){const{transitionEnd:w,transition:x,...v}=E;for(const b in v){let _=v[b];if(Array.isArray(_)){const C=h?_.length-1:0;_=_[C]}_!==null&&(r[b]=_)}for(const b in w)r[b]=w[b]}}}return r}function z_(t,e,n){var i;const{style:s}=t,r={};for(const a in s)(Zt(s[a])||e.style&&Zt(e.style[a])||QO(a,t)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(r[a]=s[a]);return r}const SJ={useVisualState:t4({scrapeMotionValuesFromProps:z_,createRenderState:U_})};function n4(t,e,n){const s=z_(t,e,n);for(const r in t)if(Zt(t[r])||Zt(e[r])){const i=xc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}const AJ={useVisualState:t4({scrapeMotionValuesFromProps:n4,createRenderState:JO})};function CJ(t,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...F_(s)?AJ:SJ,preloadedFeatures:t,useRender:_J(r),createVisualElement:e,Component:s};return aJ(a)}}function bd(t,e,n){const s=t.getProps();return B_(s,e,n!==void 0?n:s.custom,t)}const hb=t=>Array.isArray(t);function RJ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,gd(n))}function NJ(t){return hb(t)?t[t.length-1]||0:t}function IJ(t,e){const n=bd(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const a in i){const o=NJ(i[a]);RJ(t,a,o)}}function DJ(t){return!!(Zt(t)&&t.add)}function fb(t,e){const n=t.getValue("willChange");if(DJ(n))return n.add(e);if(!n&&Fr.WillChange){const s=new Fr.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function s4(t){return t.props[YO]}const PJ=t=>t!==null;function jJ(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(PJ),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[i]}const kJ={type:"spring",stiffness:500,damping:25,restSpeed:10},MJ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OJ={type:"keyframes",duration:.8},VJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LJ=(t,{keyframes:e})=>e.length>2?OJ:wc.has(t)?t.startsWith("scale")?MJ(e[1]):kJ:VJ;function UJ({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const H_=(t,e,n,s={},r,i)=>a=>{const o=D_(s,t)||{},l=o.delay||s.delay||0;let{elapsed:u=0}=s;u=u-Bs(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:r};UJ(o)||Object.assign(h,LJ(t,h)),h.duration&&(h.duration=Bs(h.duration)),h.repeatDelay&&(h.repeatDelay=Bs(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),(Fr.instantAnimations||Fr.skipAnimations)&&(f=!0,h.duration=0,h.delay=0),h.allowFlatten=!o.type&&!o.ease,f&&!i&&e.get()!==void 0){const m=jJ(h.keyframes,o);if(m!==void 0){tt.update(()=>{h.onUpdate(m),h.onComplete()});return}}return new EZ(h)};function FJ({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function r4(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...o}=e;s&&(i=s);const l=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const h in o){const f=t.getValue(h,t.latestValues[h]??null),m=o[h];if(m===void 0||u&&FJ(u,h))continue;const p={delay:n,...D_(i||{},h)},E=f.get();if(E!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===E&&!p.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const v=s4(t);if(v){const b=window.MotionHandoffAnimation(v,h,tt);b!==null&&(p.startTime=b,w=!0)}}fb(t,h),f.start(H_(h,f,m,t.shouldReduceMotion&&MO.has(h)?{type:!1}:p,t,w));const x=f.animation;x&&l.push(x)}return a&&Promise.all(l).then(()=>{tt.update(()=>{a&&IJ(t,a)})}),l}function mb(t,e,n={}){var l;const s=bd(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(r4(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=r;return BJ(t,e,h+u,f,m,n)}:()=>Promise.resolve(),{when:o}=r;if(o){const[u,h]=o==="beforeChildren"?[i,a]:[a,i];return u().then(()=>h())}else return Promise.all([i(),a(n.delay)])}function BJ(t,e,n=0,s=0,r=1,i){const a=[],o=(t.variantChildren.size-1)*s,l=r===1?(u=0)=>u*s:(u=0)=>o-u*s;return Array.from(t.variantChildren).sort(zJ).forEach((u,h)=>{u.notify("AnimationStart",e),a.push(mb(u,e,{...i,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function zJ(t,e){return t.sortNodePosition(e)}function HJ(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>mb(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=mb(t,e,n);else{const r=typeof e=="function"?bd(t,e,n.custom):e;s=Promise.all(r4(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function i4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const qJ=O_.length;function a4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?a4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<qJ;n++){const s=O_[n],r=t.props[s];(yd(r)||r===!1)&&(e[s]=r)}return e}const GJ=[...M_].reverse(),$J=M_.length;function YJ(t){return e=>Promise.all(e.map(({animation:n,options:s})=>HJ(t,n,s)))}function KJ(t){let e=YJ(t),n=PC(),s=!0;const r=l=>(u,h)=>{var m;const f=bd(t,h,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:p,transitionEnd:E,...w}=f;u={...u,...w,...E}}return u};function i(l){e=l(t)}function a(l){const{props:u}=t,h=a4(t.parent)||{},f=[],m=new Set;let p={},E=1/0;for(let x=0;x<$J;x++){const v=GJ[x],b=n[v],_=u[v]!==void 0?u[v]:h[v],C=yd(_),P=v===l?b.isActive:null;P===!1&&(E=x);let M=_===h[v]&&_!==u[v]&&C;if(M&&s&&t.manuallyAnimateOnMount&&(M=!1),b.protectedKeys={...p},!b.isActive&&P===null||!_&&!b.prevProp||wg(_)||typeof _=="boolean")continue;const A=WJ(b.prevProp,_);let S=A||v===l&&b.isActive&&!M&&C||x>E&&C,N=!1;const R=Array.isArray(_)?_:[_];let j=R.reduce(r(v),{});P===!1&&(j={});const{prevResolvedValues:k={}}=b,I={...k,...j},H=G=>{S=!0,m.has(G)&&(N=!0,m.delete(G)),b.needsAnimating[G]=!0;const q=t.getValue(G);q&&(q.liveStyle=!1)};for(const G in I){const q=j[G],X=k[G];if(p.hasOwnProperty(G))continue;let Q=!1;hb(q)&&hb(X)?Q=!i4(q,X):Q=q!==X,Q?q!=null?H(G):m.add(G):q!==void 0&&m.has(G)?H(G):b.protectedKeys[G]=!0}b.prevProp=_,b.prevResolvedValues=j,b.isActive&&(p={...p,...j}),s&&t.blockInitialAnimation&&(S=!1),S&&(!(M&&A)||N)&&f.push(...R.map(G=>({animation:G,options:{type:v}})))}if(m.size){const x={};if(typeof u.initial!="boolean"){const v=bd(t,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(x.transition=v.transition)}m.forEach(v=>{const b=t.getBaseTarget(v),_=t.getValue(v);_&&(_.liveStyle=!0),x[v]=b??null}),f.push({animation:x})}let w=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(f):Promise.resolve()}function o(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const h=a(l);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=PC(),s=!0}}}function WJ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!i4(e,t):!1}function ma(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PC(){return{animate:ma(!0),whileInView:ma(),whileHover:ma(),whileTap:ma(),whileDrag:ma(),whileFocus:ma(),exit:ma()}}class oa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class QJ extends oa{constructor(e){super(e),e.animationState||(e.animationState=KJ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let XJ=0;class ZJ extends oa{constructor(){super(...arguments),this.id=XJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const JJ={animation:{Feature:QJ},exit:{Feature:ZJ}};function xd(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function uh(t){return{point:{x:t.pageX,y:t.pageY}}}const eee=t=>e=>k_(e)&&t(e,uh(e));function Nu(t,e,n,s){return xd(t,e,eee(n),s)}function o4({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function tee({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function nee(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}const l4=1e-4,see=1-l4,ree=1+l4,c4=.01,iee=0-c4,aee=0+c4;function cn(t){return t.max-t.min}function oee(t,e,n){return Math.abs(t-e)<=n}function jC(t,e,n,s=.5){t.origin=s,t.originPoint=et(e.min,e.max,t.origin),t.scale=cn(n)/cn(e),t.translate=et(n.min,n.max,t.origin)-t.originPoint,(t.scale>=see&&t.scale<=ree||isNaN(t.scale))&&(t.scale=1),(t.translate>=iee&&t.translate<=aee||isNaN(t.translate))&&(t.translate=0)}function Iu(t,e,n,s){jC(t.x,e.x,n.x,s?s.originX:void 0),jC(t.y,e.y,n.y,s?s.originY:void 0)}function kC(t,e,n){t.min=n.min+e.min,t.max=t.min+cn(e)}function lee(t,e,n){kC(t.x,e.x,n.x),kC(t.y,e.y,n.y)}function MC(t,e,n){t.min=e.min-n.min,t.max=t.min+cn(e)}function Du(t,e,n){MC(t.x,e.x,n.x),MC(t.y,e.y,n.y)}const OC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Go=()=>({x:OC(),y:OC()}),VC=()=>({min:0,max:0}),ct=()=>({x:VC(),y:VC()});function Bn(t){return[t("x"),t("y")]}function cv(t){return t===void 0||t===1}function pb({scale:t,scaleX:e,scaleY:n}){return!cv(t)||!cv(e)||!cv(n)}function ba(t){return pb(t)||u4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function u4(t){return LC(t.x)||LC(t.y)}function LC(t){return t&&t!=="0%"}function sp(t,e,n){const s=t-n,r=e*s;return n+r}function UC(t,e,n,s,r){return r!==void 0&&(t=sp(t,r,s)),sp(t,n,s)+e}function gb(t,e=0,n=1,s,r){t.min=UC(t.min,e,n,s,r),t.max=UC(t.max,e,n,s,r)}function d4(t,{x:e,y:n}){gb(t.x,e.translate,e.scale,e.originPoint),gb(t.y,n.translate,n.scale,n.originPoint)}const FC=.999999999999,BC=1.0000000000001;function cee(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,a;for(let o=0;o<r;o++){i=n[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Yo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,d4(t,a)),s&&ba(i.latestValues)&&Yo(t,i.latestValues))}e.x<BC&&e.x>FC&&(e.x=1),e.y<BC&&e.y>FC&&(e.y=1)}function $o(t,e){t.min=t.min+e,t.max=t.max+e}function zC(t,e,n,s,r=.5){const i=et(t.min,t.max,r);gb(t,e,n,i,s)}function Yo(t,e){zC(t.x,e.x,e.scaleX,e.scale,e.originX),zC(t.y,e.y,e.scaleY,e.scale,e.originY)}function h4(t,e){return o4(nee(t.getBoundingClientRect(),e))}function uee(t,e,n){const s=h4(t,n),{scroll:r}=e;return r&&($o(s.x,r.offset.x),$o(s.y,r.offset.y)),s}const f4=({current:t})=>t?t.ownerDocument.defaultView:null,HC=(t,e)=>Math.abs(t-e);function dee(t,e){const n=HC(t.x,e.x),s=HC(t.y,e.y);return Math.sqrt(n**2+s**2)}class m4{constructor(e,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=dv(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=dee(f.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:E}=f,{timestamp:w}=jt;this.history.push({...E,timestamp:w});const{onStart:x,onMove:v}=this.handlers;m||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=uv(m,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:p,onSessionEnd:E,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=dv(f.type==="pointercancel"?this.lastMoveEventInfo:uv(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,x),E&&E(f,x)},!k_(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const a=uh(e),o=uv(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=jt;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,dv(o,this.history)),this.removeListeners=oh(Nu(this.contextWindow,"pointermove",this.handlePointerMove),Nu(this.contextWindow,"pointerup",this.handlePointerUp),Nu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qi(this.updatePoint)}}function uv(t,e){return e?{point:e(t.point)}:t}function qC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function dv({point:t},e){return{point:t,delta:qC(t,p4(e)),offset:qC(t,hee(e)),velocity:fee(e,.1)}}function hee(t){return t[0]}function p4(t){return t[t.length-1]}function fee(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=p4(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>Bs(e)));)n--;if(!s)return{x:0,y:0};const i=zs(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function mee(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?et(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?et(n,t,s.max):Math.min(t,n)),t}function GC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function pee(t,{top:e,left:n,bottom:s,right:r}){return{x:GC(t.x,n,r),y:GC(t.y,e,s)}}function $C(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function gee(t,e){return{x:$C(t.x,e.x),y:$C(t.y,e.y)}}function yee(t,e){let n=.5;const s=cn(t),r=cn(e);return r>s?n=fd(e.min,e.max-s,t.min):s>r&&(n=fd(t.min,t.max-r,e.min)),Ur(0,1,n)}function vee(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const yb=.35;function bee(t=yb){return t===!1?t=0:t===!0&&(t=yb),{x:YC(t,"left","right"),y:YC(t,"top","bottom")}}function YC(t,e,n){return{min:KC(t,e),max:KC(t,n)}}function KC(t,e){return typeof t=="number"?t:t[e]||0}const xee=new WeakMap;class wee{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ct(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(uh(h).point)},i=(h,f)=>{const{drag:m,dragPropagation:p,onDragStart:E}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LZ(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bn(x=>{let v=this.getAxisMotionValue(x).get()||0;if(Hs.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const _=b.layout.layoutBox[x];_&&(v=cn(_)*(parseFloat(v)/100))}}this.originPoint[x]=v}),E&&tt.postRender(()=>E(h,f)),fb(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:E,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:x}=f;if(p&&this.currentDirection===null){this.currentDirection=_ee(x),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),w&&w(h,f)},o=(h,f)=>this.stop(h,f),l=()=>Bn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new m4(e,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:f4(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&tt.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!lf(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=mee(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,r=this.constraints;e&&qo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=pee(s.layoutBox,e):this.constraints=!1,this.elastic=bee(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Bn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=vee(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!qo(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=uee(s,r.root,this.visualElement.getTransformPagePoint());let a=gee(r.layout.layoutBox,i);if(n){const o=n(tee(a));this.hasMutatedConstraints=!!o,o&&(a=o4(o))}return a}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Bn(h=>{if(!lf(h,n,this.currentDirection))return;let f=l&&l[h]||{};a&&(f={min:0,max:0});const m=r?200:1e6,p=r?40:1e7,E={type:"inertia",velocity:s?e[h]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,E)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return fb(this.visualElement,e),s.start(H_(e,s,0,n,this.visualElement,!1))}stopAnimation(){Bn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Bn(n=>{const{drag:s}=this.getProps();if(!lf(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];i.set(e[n]-et(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!qo(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Bn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=yee({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Bn(a=>{if(!lf(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(et(l,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;xee.set(this.visualElement,this);const e=this.visualElement.current,n=Nu(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();qo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),tt.read(s);const a=xd(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Bn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=yb,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function lf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function _ee(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Tee extends oa{constructor(e){super(e),this.removeGroupControls=Xn,this.removeListeners=Xn,this.controls=new wee(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xn}unmount(){this.removeGroupControls(),this.removeListeners()}}const WC=t=>(e,n)=>{t&&tt.postRender(()=>t(e,n))};class Eee extends oa{constructor(){super(...arguments),this.removePointerDownListener=Xn}onPointerDown(e){this.session=new m4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:f4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:WC(e),onStart:WC(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&tt.postRender(()=>r(i,a))}}}mount(){this.removePointerDownListener=Nu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ff={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $c={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=QC(t,e.target.x),s=QC(t,e.target.y);return`${n}% ${s}%`}},See={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=Xi.parse(t);if(r.length>5)return s;const i=Xi.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const u=et(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}};class Aee extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;uJ(Cee),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ff.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||tt.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),j_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function g4(t){const[e,n]=ZQ(),s=y.useContext(eO);return c.jsx(Aee,{...t,layoutGroup:s,switchLayoutGroup:y.useContext(KO),isPresent:e,safeToRemove:n})}const Cee={borderRadius:{...$c,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$c,borderTopRightRadius:$c,borderBottomLeftRadius:$c,borderBottomRightRadius:$c,boxShadow:See};function Ree(t,e,n){const s=Zt(t)?t:gd(t);return s.start(H_("",s,e,n)),s.animation}function Nee(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Iee=(t,e)=>t.depth-e.depth;class Dee{constructor(){this.children=[],this.isDirty=!1}add(e){p_(this.children,e),this.isDirty=!0}remove(e){g_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Iee),this.isDirty=!1,this.children.forEach(e)}}function Pee(t,e){const n=gn.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(Qi(s),t(i-e))};return tt.setup(s,!0),()=>Qi(s)}const y4=["TopLeft","TopRight","BottomLeft","BottomRight"],jee=y4.length,XC=t=>typeof t=="string"?parseFloat(t):t,ZC=t=>typeof t=="number"||ae.test(t);function kee(t,e,n,s,r,i){r?(t.opacity=et(0,n.opacity??1,Mee(s)),t.opacityExit=et(e.opacity??1,0,Oee(s))):i&&(t.opacity=et(e.opacity??1,n.opacity??1,s));for(let a=0;a<jee;a++){const o=`border${y4[a]}Radius`;let l=JC(e,o),u=JC(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||ZC(l)===ZC(u)?(t[o]=Math.max(et(XC(l),XC(u),s),0),(Hs.test(u)||Hs.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=et(e.rotate||0,n.rotate||0,s))}function JC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Mee=v4(0,.5,dO),Oee=v4(.5,.95,Xn);function v4(t,e,n){return s=>s<t?0:s>e?1:n(fd(t,e,s))}function eR(t,e){t.min=e.min,t.max=e.max}function Fn(t,e){eR(t.x,e.x),eR(t.y,e.y)}function tR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function nR(t,e,n,s,r){return t-=e,t=sp(t,1/n,s),r!==void 0&&(t=sp(t,1/r,s)),t}function Vee(t,e=0,n=1,s=.5,r,i=t,a=t){if(Hs.test(e)&&(e=parseFloat(e),e=et(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=et(i.min,i.max,s);t===i&&(o-=e),t.min=nR(t.min,e,n,o,r),t.max=nR(t.max,e,n,o,r)}function sR(t,e,[n,s,r],i,a){Vee(t,e[n],e[s],e[r],e.scale,i,a)}const Lee=["x","scaleX","originX"],Uee=["y","scaleY","originY"];function rR(t,e,n,s){sR(t.x,e,Lee,n?n.x:void 0,s?s.x:void 0),sR(t.y,e,Uee,n?n.y:void 0,s?s.y:void 0)}function iR(t){return t.translate===0&&t.scale===1}function b4(t){return iR(t.x)&&iR(t.y)}function aR(t,e){return t.min===e.min&&t.max===e.max}function Fee(t,e){return aR(t.x,e.x)&&aR(t.y,e.y)}function oR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function x4(t,e){return oR(t.x,e.x)&&oR(t.y,e.y)}function lR(t){return cn(t.x)/cn(t.y)}function cR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Bee{constructor(){this.members=[]}add(e){p_(this.members,e),e.scheduleRender()}remove(e){if(g_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zee(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||i||a)&&(s=`translate3d(${r}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:m,skewX:p,skewY:E}=n;u&&(s=`perspective(${u}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),m&&(s+=`rotateY(${m}deg) `),p&&(s+=`skewX(${p}deg) `),E&&(s+=`skewY(${E}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const hv=["","X","Y","Z"],Hee={visibility:"hidden"},uR=1e3;let qee=0;function fv(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function w4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=s4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",tt,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&w4(s)}function _4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=qee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Yee),this.nodes.forEach(Zee),this.nodes.forEach(Jee),this.nodes.forEach(Kee)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Dee)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new b_),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Nee(a),this.instance=a;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Pee(m,250),Ff.hasAnimatedSinceResize&&(Ff.hasAnimatedSinceResize=!1,this.nodes.forEach(hR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||rte,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=h.getProps(),b=!this.targetLayout||!x4(this.targetLayout,E),_=!m&&p;if(this.options.layoutRoot||this.resumeFrom||_||m&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const C={...D_(w,"layout"),onPlay:x,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else m||hR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ete),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&w4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dR);return}this.isUpdating||this.nodes.forEach(Qee),this.isUpdating=!1,this.nodes.forEach(Xee),this.nodes.forEach(Gee),this.nodes.forEach($ee),this.clearAllSnapshots();const o=gn.now();jt.delta=Ur(0,1e3/60,o-jt.timestamp),jt.timestamp=o,jt.isProcessing=!0,rv.update.process(jt),rv.preRender.process(jt),rv.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,j_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Wee),this.sharedNodes.forEach(tte)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cn(this.snapshot.measuredBox.x)&&!cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!b4(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&(o||ba(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),ite(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return ct();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(ate))){const{scroll:h}=this.root;h&&($o(o.x,h.offset.x),$o(o.y,h.offset.y))}return o}removeElementScroll(a){var l;const o=ct();if(Fn(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Fn(o,a),$o(o.x,f.offset.x),$o(o.y,f.offset.y))}return o}applyTransform(a,o=!1){const l=ct();Fn(l,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Yo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ba(h.latestValues)&&Yo(l,h.latestValues)}return ba(this.latestValues)&&Yo(l,this.latestValues),l}removeTransform(a){const o=ct();Fn(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ba(u.latestValues))continue;pb(u.latestValues)&&u.updateSnapshot();const h=ct(),f=u.measurePageBox();Fn(h,f),rR(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return ba(this.latestValues)&&rR(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=jt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Du(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ct(),this.targetWithTransforms=ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lee(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fn(this.target,this.layout.layoutBox),d4(this.target,this.targetDelta)):Fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Du(this.relativeTargetOrigin,this.target,p.target),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pb(this.parent.latestValues)||u4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Fn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;cee(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ct());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tR(this.prevProjectionDelta.x,this.projectionDelta.x),tR(this.prevProjectionDelta.y,this.projectionDelta.y)),Iu(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!cR(this.projectionDelta.x,this.prevProjectionDelta.x)||!cR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Go(),this.projectionDelta=Go(),this.projectionDeltaWithTransform=Go()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=Go();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=ct(),p=l?l.source:void 0,E=this.layout?this.layout.source:void 0,w=p!==E,x=this.getStack(),v=!x||x.members.length<=1,b=!!(w&&!v&&this.options.crossfade===!0&&!this.path.some(ste));this.animationProgress=0;let _;this.mixTargetDelta=C=>{const P=C/1e3;fR(f.x,a.x,P),fR(f.y,a.y,P),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Du(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nte(this.relativeTarget,this.relativeTargetOrigin,m,P),_&&Fee(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ct()),Fn(_,this.relativeTarget)),w&&(this.animationValues=h,kee(h,u,this.latestValues,P,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{Ff.hasAnimatedSinceResize=!0,this.currentAnimation=Ree(0,uR,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:h}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&T4(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ct();const f=cn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const m=cn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Fn(o,l),Yo(o,h),Iu(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Bee),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&fv("z",a,u,this.animationValues);for(let h=0;h<hv.length;h++)fv(`rotate${hv[h]}`,a,u,this.animationValues),fv(`skew${hv[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Hee;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=Uf(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Uf(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ba(this.latestValues)&&(p.transform=l?l({},""):"none",this.hasProjected=!1),p}const h=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=zee(this.projectionDeltaWithTransform,this.treeScale,h),l&&(o.transform=l(h,o.transform));const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in vd){if(h[p]===void 0)continue;const{correct:E,applyTo:w,isCSSVariable:x}=vd[p],v=o.transform==="none"?h[p]:E(h[p],u);if(w){const b=w.length;for(let _=0;_<b;_++)o[w[_]]=v}else x?this.options.visualElement.renderState.vars[p]=v:o[p]=v}return this.options.layoutId&&(o.pointerEvents=u===this?Uf(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(dR),this.root.sharedNodes.clear()}}}function Gee(t){t.updateLayout()}function $ee(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Bn(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],p=cn(m);m.min=s[f].min,m.max=m.min+p}):T4(i,e.layoutBox,s)&&Bn(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],p=cn(s[f]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=Go();Iu(o,s,e.layoutBox);const l=Go();a?Iu(l,t.applyTransform(r,!0),e.measuredBox):Iu(l,s,e.layoutBox);const u=!b4(o);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:p}=f;if(m&&p){const E=ct();Du(E,e.layoutBox,m.layoutBox);const w=ct();Du(w,s,p.layoutBox),x4(E,w)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=E,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function Yee(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Kee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Wee(t){t.clearSnapshot()}function dR(t){t.clearMeasurements()}function Qee(t){t.isLayoutDirty=!1}function Xee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Zee(t){t.resolveTargetDelta()}function Jee(t){t.calcProjection()}function ete(t){t.resetSkewAndRotation()}function tte(t){t.removeLeadSnapshot()}function fR(t,e,n){t.translate=et(e.translate,0,n),t.scale=et(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mR(t,e,n,s){t.min=et(e.min,n.min,s),t.max=et(e.max,n.max,s)}function nte(t,e,n,s){mR(t.x,e.x,n.x,s),mR(t.y,e.y,n.y,s)}function ste(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rte={duration:.45,ease:[.4,0,.1,1]},pR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),gR=pR("applewebkit/")&&!pR("chrome/")?Math.round:Xn;function yR(t){t.min=gR(t.min),t.max=gR(t.max)}function ite(t){yR(t.x),yR(t.y)}function T4(t,e,n){return t==="position"||t==="preserve-aspect"&&!oee(lR(e),lR(n),.2)}function ate(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const ote=_4({attachResizeListener:(t,e)=>xd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mv={current:void 0},E4=_4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!mv.current){const t=new ote({});t.mount(window),t.setOptions({layoutScroll:!0}),mv.current=t}return mv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lte={pan:{Feature:Eee},drag:{Feature:Tee,ProjectionNode:E4,MeasureLayout:g4}};function vR(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&tt.postRender(()=>i(e,uh(e)))}class cte extends oa{mount(){const{current:e}=this.node;e&&(this.unmount=UZ(e,(n,s)=>(vR(this.node,s,"Start"),r=>vR(this.node,r,"End"))))}unmount(){}}class ute extends oa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oh(xd(this.node.current,"focus",()=>this.onFocus()),xd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function bR(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&tt.postRender(()=>i(e,uh(e)))}class dte extends oa{mount(){const{current:e}=this.node;e&&(this.unmount=HZ(e,(n,s)=>(bR(this.node,s,"Start"),(r,{success:i})=>bR(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vb=new WeakMap,pv=new WeakMap,hte=t=>{const e=vb.get(t.target);e&&e(t)},fte=t=>{t.forEach(hte)};function mte({root:t,...e}){const n=t||document;pv.has(n)||pv.set(n,{});const s=pv.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(fte,{root:t,...e})),s[r]}function pte(t,e,n){const s=mte(e);return vb.set(t,n),s.observe(t),()=>{vb.delete(t),s.unobserve(t)}}const gte={some:0,all:1};class yte extends oa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:gte[r]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=u?h:f;m&&m(l)};return pte(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(vte(e,n))&&this.startObserver()}unmount(){}}function vte({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bte={inView:{Feature:yte},tap:{Feature:dte},focus:{Feature:ute},hover:{Feature:cte}},xte={layout:{ProjectionNode:E4,MeasureLayout:g4}},bb={current:null},S4={current:!1};function wte(){if(S4.current=!0,!!f_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bb.current=t.matches;t.addListener(e),e()}else bb.current=!1}const _te=new WeakMap;function Tte(t,e,n){for(const s in e){const r=e[s],i=n[s];if(Zt(r))t.addValue(s,r);else if(Zt(i))t.addValue(s,gd(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(s);t.addValue(s,gd(a!==void 0?a:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const xR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ete{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=I_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=gn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,tt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=_g(n),this.isVariantNode=$O(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const p=f[m];l[m]!==void 0&&Zt(p)&&p.set(l[m],!1)}}mount(e){this.current=e,_te.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),S4.current||wte(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),this.projection=void 0,Qi(this.notifyUpdate),Qi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=wc.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&tt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Yl){const n=Yl[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ct()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<xR.length;s++){const r=xR[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,a=e[i];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=Tte(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=gd(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(nO(s)||sO(s))?s=parseFloat(s):!YZ(s)&&Xi.test(n)&&(s=UO(e,n)),this.setBaseTarget(e,Zt(s)?s.get():s)),Zt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=B_(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(s=a[e])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Zt(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new b_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class A4 extends Ete{constructor(){super(...arguments),this.KeyframeResolver=OZ}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function C4(t,{style:e,vars:n},s,r){Object.assign(t.style,e,r&&r.getProjectionStyles(s));for(const i in n)t.style.setProperty(i,n[i])}function Ste(t){return window.getComputedStyle(t)}class Ate extends A4{constructor(){super(...arguments),this.type="html",this.renderInstance=C4}readValueFromInstance(e,n){if(wc.has(n))return tZ(e,n);{const s=Ste(e),r=(__(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return h4(e,n)}build(e,n,s){L_(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return z_(e,n,s)}}const R4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Cte(t,e,n,s){C4(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(R4.has(r)?r:V_(r),e.attrs[r])}class Rte extends A4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ct}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(wc.has(n)){const s=LO(n);return s&&s.default||0}return n=R4.has(n)?n:V_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return n4(e,n,s)}build(e,n,s){ZO(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,r){Cte(e,n,s,r)}mount(e){this.isSVGTag=e4(e.tagName),super.mount(e)}}const Nte=(t,e)=>F_(t)?new Rte(e):new Ate(e,{allowProjection:t!==y.Fragment}),Ite=CJ({...JJ,...bte,...lte,...xte},Nte),Dte=ZZ(Ite),Pte=()=>{const{currentMirrorQuestion:t,setShowMirrorMoment:e,makeChoice:n,gameState:s}=zr(),[r,i]=y.useState(""),a=()=>{if(s.currentScene&&s.currentScene.choices.length>0){const o=s.currentScene.choices[0].id;e(!1),n(o)}};return c.jsx(Dte.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"w-full max-w-lg mx-auto",children:c.jsxs(Ie,{className:"bg-black/40 border-primary/20 backdrop-blur-lg shadow-xl",children:[c.jsxs(_t,{className:"relative pb-2",children:[c.jsx("div",{className:"absolute -top-5 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-primary to-secondary text-white p-3 rounded-full shadow-glow",children:c.jsx(Bl,{className:"w-6 h-6 animate-pulse"})}),c.jsx(Ft,{className:"text-xl text-center pt-5 text-white",children:"Mirror Moment"}),c.jsx(vn,{className:"text-center text-white/80",children:"Take a moment to reflect"})]}),c.jsxs(ze,{children:[c.jsx("div",{className:"text-lg font-medium text-center my-4 text-white",children:c.jsxs("span",{className:"relative",children:[t,c.jsx(pn,{className:"h-3 w-3 text-neon-yellow absolute -top-2 -right-4 animate-pulse-slow"})]})}),c.jsx(JM,{placeholder:"Write your thoughts here...",className:"min-h-24 mt-4 bg-black/20 border-primary/30 text-white",value:r,onChange:o=>i(o.target.value)})]}),c.jsx(vc,{className:"flex justify-center",children:c.jsxs(ee,{className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white",onClick:a,children:["Continue",c.jsx(GK,{className:"ml-2 h-4 w-4"})]})})]})})},jte=({scene:t})=>{const{classroomId:e,revealVotes:n,setRevealVotes:s,userRole:r,makeChoice:i,setCurrentScene:a,gameState:o}=zr(),{currentUser:l}=tr(),[u,h]=y.useState([]),[f,m]=y.useState(!1),[p,E]=y.useState(null),[w,x]=y.useState(!1),[v,b]=y.useState(null);y.useEffect(()=>{(async()=>{if(e)try{const S=await lg(e);S&&(b(S),console.log("Found active live session:",S))}catch(S){console.error("Error checking live session:",S)}})()},[e]),y.useEffect(()=>{if(!e)return;let A;return v!=null&&v.id&&(A=Uk(v.id,S=>{var R;b(S),r==="student"&&S.currentSceneId&&S.currentSceneId!==t.id&&(console.log("Syncing to teacher's scene:",S.currentSceneId),a(S.currentSceneId));const N=Object.entries(S.currentChoices||{}).map(([j,k])=>({studentId:j,choiceId:k,timestamp:new Date}));h(N),l&&((R=S.currentChoices)!=null&&R[l.uid])&&(m(!0),E(S.currentChoices[l.uid]))})),()=>{A&&A()}},[e,l,v==null?void 0:v.id,r,t.id,a]);const _=u.length,C=A=>u.filter(S=>S.choiceId===A).length,P=A=>_?Math.round(C(A)/_*100):0,M=async A=>{if(r==="student"&&!f){E(A),x(!0);try{l&&e&&(v!=null&&v.id&&(console.log("Submitting vote to live session:",A),await Ok(v.id,l.uid,A)),m(!0))}catch(S){console.error("Error recording vote:",S),E(null)}finally{x(!1)}}else if(r==="teacher")if(!n)s(!0);else{if(v!=null&&v.id){const S=t.choices.find(N=>N.id===A);if(S&&S.nextSceneId)try{await kk(v.id,S.nextSceneId)}catch(N){console.error("Error advancing live session:",N)}}i(A)}};return c.jsxs(Ie,{className:"w-full max-w-4xl mx-auto bg-black/40 border-primary/20 backdrop-blur-lg shadow-xl animate-fade-in",children:[c.jsxs(_t,{children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[c.jsx(St,{className:"h-5 w-5 text-primary"}),c.jsx(Ft,{className:"text-xl text-white",children:"Classroom Decision"}),v&&c.jsxs(Oe,{className:"bg-green-500/20 text-green-300 border-0",children:[c.jsx(ql,{className:"h-3 w-3 mr-1"}),"Live"]})]}),c.jsx(vn,{className:"text-center text-white/80",children:r==="teacher"?"Review class votes and advance the scenario":f?"Waiting for teacher to continue":"Cast your vote on what should happen next"})]}),c.jsxs(ze,{children:[c.jsxs("div",{className:"bg-black/20 rounded-lg p-3 mb-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(qk,{className:"h-5 w-5 text-primary"}),c.jsxs("span",{className:"text-white font-medium",children:["Votes: ",_]}),v&&c.jsxs(Oe,{className:"bg-blue-500/20 text-blue-300 border-0 text-xs",children:["Scene: ",v.currentSceneId]})]}),r==="teacher"&&c.jsx(ee,{variant:"outline",size:"sm",onClick:()=>s(!n),className:"border-white/20 bg-black/40 text-white hover:bg-white/10",children:n?"Hide Results":"Show Results"})]}),c.jsx("div",{className:"space-y-4",children:t.choices.map(A=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs(ee,{variant:"outline",className:`w-full justify-between py-6 px-4 text-left border ${f&&p===A.id?"border-primary/70 bg-primary/20":n&&P(A.id)>0?"border-primary/30 bg-primary/10":"border-white/10 bg-black/30"} hover:bg-white/10 text-white relative overflow-hidden ${w?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!w&&M(A.id),disabled:w||r==="student"&&f,children:[c.jsx("span",{className:"text-base",children:A.text}),(n||f&&p===A.id)&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("span",{className:"text-sm text-white/80",children:[C(A.id)," votes"]}),c.jsxs("span",{className:"font-mono font-bold",children:[P(A.id),"%"]})]}),f&&p===A.id&&!n&&c.jsxs(Oe,{className:"absolute top-2 right-2 bg-primary/60 text-white",children:[c.jsx(ug,{className:"h-3 w-3 mr-1"}),"Your vote"]})]}),n&&c.jsx(hd,{value:P(A.id),className:"h-2 bg-white/20"})]},A.id))})]}),c.jsxs(vc,{className:"flex justify-center pt-4",children:[r==="teacher"&&n&&c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-white/80 text-sm mb-3",children:"Click on a choice above to advance the scenario"})}),r==="student"&&c.jsx("div",{className:"text-white/80 text-center flex items-center gap-2",children:f?c.jsxs(c.Fragment,{children:[c.jsx(Qs,{className:"h-5 w-5 inline-block"}),"Waiting for teacher to continue..."]}):c.jsxs(c.Fragment,{children:[c.jsx(St,{className:"h-5 w-5 inline-block"}),"Choose what happens next"]})})]})]})};var N4={exports:{}},I4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=y;function kte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mte=typeof Object.is=="function"?Object.is:kte,Ote=Kl.useState,Vte=Kl.useEffect,Lte=Kl.useLayoutEffect,Ute=Kl.useDebugValue;function Fte(t,e){var n=e(),s=Ote({inst:{value:n,getSnapshot:e}}),r=s[0].inst,i=s[1];return Lte(function(){r.value=n,r.getSnapshot=e,gv(r)&&i({inst:r})},[t,n,e]),Vte(function(){return gv(r)&&i({inst:r}),t(function(){gv(r)&&i({inst:r})})},[t]),Ute(n),n}function gv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mte(t,n)}catch{return!0}}function Bte(t,e){return e()}var zte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bte:Fte;I4.useSyncExternalStore=Kl.useSyncExternalStore!==void 0?Kl.useSyncExternalStore:zte;N4.exports=I4;var Hte=N4.exports;function qte(){return Hte.useSyncExternalStore(Gte,()=>!0,()=>!1)}function Gte(){return()=>{}}var q_="Avatar",[$te,vse]=_s(q_),[Yte,D4]=$te(q_),P4=y.forwardRef((t,e)=>{const{__scopeAvatar:n,...s}=t,[r,i]=y.useState("idle");return c.jsx(Yte,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:c.jsx(we.span,{...s,ref:e})})});P4.displayName=q_;var j4="AvatarImage",k4=y.forwardRef((t,e)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:r=()=>{},...i}=t,a=D4(j4,n),o=Kte(s,i),l=wt(u=>{r(u),a.onImageLoadingStatusChange(u)});return Vn(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?c.jsx(we.img,{...i,ref:e,src:s}):null});k4.displayName=j4;var M4="AvatarFallback",O4=y.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:s,...r}=t,i=D4(M4,n),[a,o]=y.useState(s===void 0);return y.useEffect(()=>{if(s!==void 0){const l=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(l)}},[s]),a&&i.imageLoadingStatus!=="loaded"?c.jsx(we.span,{...r,ref:e}):null});O4.displayName=M4;function wR(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Kte(t,{referrerPolicy:e,crossOrigin:n}){const s=qte(),r=y.useRef(null),i=s?(r.current||(r.current=new window.Image),r.current):null,[a,o]=y.useState(()=>wR(i,t));return Vn(()=>{o(wR(i,t))},[i,t]),Vn(()=>{const l=f=>()=>{o(f)};if(!i)return;const u=l("loaded"),h=l("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),a}var V4=P4,L4=k4,U4=O4;const Tg=y.forwardRef(({className:t,...e},n)=>c.jsx(V4,{ref:n,className:me("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Tg.displayName=V4.displayName;const Wte=y.forwardRef(({className:t,...e},n)=>c.jsx(L4,{ref:n,className:me("aspect-square h-full w-full",t),...e}));Wte.displayName=L4.displayName;const Eg=y.forwardRef(({className:t,...e},n)=>c.jsx(U4,{ref:n,className:me("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Eg.displayName=U4.displayName;const Qte=({session:t,onAdvanceScene:e,onEndSession:n,isTeacher:s})=>{const[r,i]=y.useState([]),[a,o]=y.useState({}),[l,u]=y.useState(!1);y.useEffect(()=>{if(!t.id)return;console.log("Setting up participants listener for session:",t.id);const E=OK(t.id,w=>{console.log("Participants updated:",w),i(w)});return()=>{E()}},[t.id]),y.useEffect(()=>{console.log("Calculating choice stats from:",t.currentChoices);const E={};t.currentChoices&&Object.values(t.currentChoices).forEach(w=>{E[w]=(E[w]||0)+1}),o(E)},[t.currentChoices]);const h=Object.values(a).reduce((E,w)=>E+w,0),f=r.length,m=f>0?h/f*100:0,p=E=>{var w;return(w=t.currentChoices)==null?void 0:w[E]};return c.jsxs(Ie,{className:"bg-black/30 border-blue-500/20",children:[c.jsx(_t,{children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs(Ft,{className:"text-white flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute h-3 w-3 rounded-full bg-green-400 animate-ping"}),c.jsx("div",{className:"relative h-3 w-3 rounded-full bg-green-400"})]}),"Live Session Active"]}),c.jsxs(vn,{className:"text-white/70",children:[t.scenarioTitle," - Scene: ",t.currentSceneId]})]}),s&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>u(!l),className:"border-blue-500/20 text-blue-400 hover:bg-blue-500/10",children:[l?c.jsx(XK,{className:"h-4 w-4"}):c.jsx(ZK,{className:"h-4 w-4"}),l?"Hide":"Show"," Results"]}),c.jsx(ee,{variant:"outline",size:"sm",onClick:n,className:"border-red-500/20 text-red-400 hover:bg-red-500/10",children:"End Session"})]})]})}),c.jsxs(ze,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-black/20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:c.jsx(St,{className:"h-4 w-4 text-blue-400"})}),c.jsx("div",{className:"text-lg font-bold text-white",children:f}),c.jsx("div",{className:"text-xs text-white/70",children:"Participants"})]}),c.jsxs("div",{className:"bg-black/20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:c.jsx(KK,{className:"h-4 w-4 text-green-400"})}),c.jsxs("div",{className:"text-lg font-bold text-white",children:[Math.round(m),"%"]}),c.jsx("div",{className:"text-xs text-white/70",children:"Response Rate"})]}),c.jsxs("div",{className:"bg-black/20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:c.jsx(Qs,{className:"h-4 w-4 text-orange-400"})}),c.jsx("div",{className:"text-lg font-bold text-white",children:h}),c.jsx("div",{className:"text-xs text-white/70",children:"Votes Cast"})]})]}),l&&Object.keys(a).length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium text-white",children:"Current Voting Results:"}),Object.entries(a).map(([E,w])=>c.jsxs("div",{className:"flex justify-between items-center bg-black/20 rounded p-2",children:[c.jsxs("span",{className:"text-white/80 text-sm",children:["Choice ",E]}),c.jsxs(Oe,{className:"bg-blue-500/20 text-blue-300 border-0",children:[w," votes (",f>0?Math.round(w/f*100):0,"%)"]})]},E))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium text-white",children:"Active Participants:"}),c.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:r.length>0?r.map(E=>{const w=p(E.studentId);return c.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded p-2",children:[c.jsx(Tg,{className:"h-6 w-6",children:c.jsx(Eg,{className:"bg-blue-500/20 text-white text-xs",children:E.studentName.charAt(0)})}),c.jsx("span",{className:"text-white/80 text-sm truncate flex-1",children:E.studentName}),l&&w&&c.jsxs(Oe,{className:"bg-green-500/20 text-green-300 border-0 text-xs",children:["Choice ",w]}),w?c.jsx(ug,{className:"h-4 w-4 text-green-400"}):c.jsx(dg,{className:"h-4 w-4 text-orange-400 animate-spin"})]},E.studentId)}):c.jsx("div",{className:"text-white/60 text-sm text-center py-2",children:"Waiting for students to join..."})})]})]})]})},Xte=()=>{var X;const{gameState:t,makeChoice:e,resetGame:n,isGameActive:s,showMirrorMoment:r,gameMode:i,setGameMode:a,userRole:o,classroomId:l,mirrorMomentsEnabled:u,toggleMirrorMoments:h,setCurrentScene:f,startScenario:m}=zr(),{currentUser:p,userProfile:E}=tr(),w=ea(),x=Xw(),{toast:v}=er(),[b,_]=y.useState(null),[C,P]=y.useState(!1),[M,A]=y.useState(!1),[S,N]=y.useState(!1),[R,j]=y.useState(null);y.useEffect(()=>{s||w("/")},[s,w]),y.useEffect(()=>{if(b!=null&&b.id&&C)return console.log("Setting up live session listener for:",b.id),Uk(b.id,le=>{var ue,Z;if(console.log("Live session updated:",le),_(le),le.status==="ended"){console.log("Session ended immediately"),P(!1),A(!1),le.resultPayload?(j(le.resultPayload),N(!0)):(_(null),v({title:"Session Ended",description:"The live session has been ended by the teacher."}));return}o==="student"&&le.currentSceneId&&((ue=t.currentScene)==null?void 0:ue.id)!==le.currentSceneId&&(console.log("Syncing student to teacher's scene:",le.currentSceneId),f(le.currentSceneId),A(!1),v({title:"Scene Updated",description:"Your teacher has advanced to the next scene."})),p&&((Z=le.currentChoices)!=null&&Z[p.uid])?A(!0):A(!1)})},[b==null?void 0:b.id,C,(X=t.currentScene)==null?void 0:X.id,f,p,v,o]);const k=async Q=>{var le;if(b!=null&&b.id&&p&&!M)try{console.log("Submitting live choice:",Q),A(!0),await Ok(b.id,p.uid,Q,(le=t.currentScene)==null?void 0:le.id),v({title:" Choice Submitted",description:"Your decision has been recorded successfully!"})}catch(ue){console.error("Error submitting live choice:",ue),A(!1),v({title:"Submission Error",description:"Failed to record your choice. Please try again.",variant:"destructive"})}},I=async Q=>{if(b!=null&&b.id)try{console.log("Advancing scene:",Q);let le;if(t.currentScenario){const ue=t.currentScenario.scenes.findIndex(Z=>Z.id===Q);ue>=0&&(le=ue)}await kk(b.id,Q,le),e("advance"),v({title:"Scene Advanced",description:"All students will be synced to the new scene."})}catch(le){console.error("Error advancing scene:",le),v({title:"Error",description:"Failed to advance scene. Please try again.",variant:"destructive"})}},H=async()=>{if(b!=null&&b.id&&l)try{const Q={choices:b.currentChoices||{},metrics:t.metrics,summary:`Session completed for "${b.scenarioTitle}"`};await xK(b.id,l,Q),P(!1),_(null),A(!1),v({title:"Session Ended",description:"The live session has been ended successfully."})}catch(Q){console.error("Error ending session:",Q),v({title:"Error",description:"Failed to end the session. Please try again.",variant:"destructive"})}},$=Q=>{C&&b?k(Q):e(Q)},L=()=>{n(),N(!1),j(null),w("/")},G=()=>{t.currentScenario&&(n(),N(!1),j(null),setTimeout(()=>{w("/"),w("/game")},100))},q=()=>{if(o==="teacher"&&b&&b.status==="active"){v({title:"Mode Locked",description:"You cannot switch modes while running a live session.",variant:"destructive"});return}if(C){v({title:"Mode Locked",description:"You cannot change modes during a live session.",variant:"destructive"});return}if(i==="classroom")a("individual"),v({title:"Individual Mode",description:"You're now playing in individual mode."});else{if(!l){v({title:"Classroom Required",description:o==="teacher"?"Please create a classroom first.":"Please join a classroom first.",variant:"destructive"});return}a("classroom"),v({title:"Classroom Mode",description:"You're now playing in classroom mode."})}};return!t.currentScenario||!t.currentScene?c.jsx("div",{className:"container mx-auto px-4 py-8 text-center flex justify-center items-center min-h-[50vh]",children:c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/30 to-purple-900/30 p-8 rounded-xl animate-pulse flex flex-col items-center gap-4 max-w-md w-full border border-white/10 shadow-lg",children:[c.jsxs("div",{className:"relative",children:[c.jsx(pn,{className:"text-indigo-300 h-10 w-10"}),c.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-full"})]}),c.jsx(dg,{className:"h-8 w-8 text-indigo-300 animate-spin"}),c.jsx("p",{className:"text-white text-lg",children:"Loading your adventure..."})]})}):S&&R?c.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8 animate-fade-in",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Session Complete!"}),c.jsx("p",{className:"text-white/80 text-lg",children:R.summary})]}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx(ee,{onClick:L,variant:"outline",className:"border-white/20 bg-black/20 text-white hover:bg-white/10",children:"Return Home"}),c.jsx(ee,{onClick:G,className:"bg-primary hover:bg-primary/90",children:"Play Again"})]})]}):c.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8 animate-fade-in",children:[c.jsx("div",{className:"mb-6 md:mb-8",children:c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/30 to-purple-900/30 rounded-xl p-4 border border-white/10 shadow-lg",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[c.jsxs("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-indigo-300 to-purple-300 bg-clip-text text-transparent flex items-center gap-2",children:[c.jsx(pn,{className:"h-5 w-5 text-indigo-300"}),t.currentScenario.title,C&&c.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[c.jsx(ql,{className:"h-4 w-4 text-green-400 animate-pulse"}),c.jsxs(Oe,{className:"bg-green-500/20 text-green-300 border-0",children:[c.jsx(Km,{className:"h-3 w-3 mr-1"}),"Live"]})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-1 border-indigo-300/20 bg-black/20 text-white hover:bg-indigo-900/20",onClick:h,disabled:C,children:[u?c.jsx(cW,{className:"h-4 w-4 text-indigo-300"}):c.jsx(lW,{className:"h-4 w-4 text-white/50"}),"Mirror Moments"]}),c.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-1 border-indigo-300/20 bg-black/20 text-white hover:bg-indigo-900/20",onClick:q,disabled:!l&&i==="individual"||C||o==="teacher"&&(b==null?void 0:b.status)==="active",children:[(C||o==="teacher"&&(b==null?void 0:b.status)==="active")&&c.jsx(nW,{className:"h-4 w-4 text-orange-400 mr-1"}),i==="classroom"?c.jsxs(c.Fragment,{children:[c.jsx(St,{className:"h-4 w-4 text-indigo-300"}),"Classroom Mode"]}):c.jsxs(c.Fragment,{children:[c.jsx(_r,{className:"h-4 w-4 text-white/50"}),"Individual Mode"]})]})]})]}),c.jsx(ZM,{metrics:t.metrics,compact:x})]})}),C&&b&&o==="teacher"&&c.jsx("div",{className:"mb-6",children:c.jsx(Qte,{session:b,onAdvanceScene:I,onEndSession:H,isTeacher:!0})}),t.currentScene.isEnding?c.jsx(WQ,{gameState:t,onPlayAgain:G,onReturnHome:L}):r?c.jsx(Pte,{}):C?c.jsx(rC,{scene:t.currentScene,onChoiceMade:$,isLiveSession:!0,liveSession:b,disabled:M}):i==="classroom"&&!C?c.jsx(jte,{scene:t.currentScene}):c.jsx(rC,{scene:t.currentScene,onChoiceMade:$})]})},Zte=()=>{const t=ea();return c.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8 animate-fade-in",children:[c.jsxs(ee,{variant:"ghost",onClick:()=>t("/"),className:"mb-6 flex items-center gap-2 rounded-xl text-white border border-white/10 hover:bg-white/10",children:[c.jsx(qK,{size:16}),"Back to Home"]}),c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-8 text-center gradient-heading flex justify-center items-center gap-2",children:[c.jsx(pn,{className:"h-6 w-6 text-primary animate-pulse-slow"}),"About LifePath",c.jsx(pn,{className:"h-6 w-6 text-primary animate-pulse-slow",style:{animationDelay:"0.5s"}})]}),c.jsxs(Ie,{className:"teen-card p-6 mb-8 md:mb-10 animate-scale-in",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full",children:c.jsx(Gk,{className:"text-primary"})}),c.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"What is LifePath?"})]}),c.jsx("p",{className:"mb-4 text-base md:text-lg text-white/90",children:"LifePath is an interactive decision simulator designed to help young people ages 10-18 develop crucial decision-making skills through realistic scenarios. By experiencing the consequences of different choices in a safe environment, users learn valuable life skills that traditional education often doesn't cover."}),c.jsx("p",{className:"text-base md:text-lg text-white/90",children:`Each scenario presents real-world situations where your choices affect multiple aspects of life: from finances and relationships to health and knowledge. The goal isn't to "win," but to understand how different decisions lead to different outcomes.`})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 mb-8 md:mb-10",children:[c.jsxs(Ie,{className:"teen-card p-6 hover-lift animate-scale-in",style:{animationDelay:"0.1s"},children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full",children:c.jsx($K,{className:"text-primary"})}),c.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"Key Features"})]}),c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(No,{className:"text-neon-yellow flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Interactive storylines with meaningful choices"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(No,{className:"text-neon-yellow flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Dynamic metrics that respond to your decisions"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(No,{className:"text-neon-yellow flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Realistic scenarios based on common life situations"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(No,{className:"text-neon-yellow flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"End-of-scenario summaries with insights"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(No,{className:"text-neon-yellow flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Age-appropriate content for various developmental stages"})]})]})]}),c.jsxs(Ie,{className:"teen-card p-6 hover-lift animate-scale-in",style:{animationDelay:"0.2s"},children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-gradient-to-br from-secondary/20 to-accent/20 rounded-full",children:c.jsx(fs,{className:"text-secondary"})}),c.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"Educational Value"})]}),c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"text-neon-purple flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Financial literacy through practical budget scenarios"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"text-neon-purple flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Social skills development via relationship choices"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"text-neon-purple flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Critical thinking about long-term consequences"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"text-neon-purple flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Ethical decision-making in complex situations"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"text-neon-purple flex-shrink-0 mt-1",size:18}),c.jsx("span",{className:"text-white/90",children:"Preparation for real-world challenges"})]})]})]})]}),c.jsxs(Ie,{className:"teen-card p-6 mb-8 md:mb-10 animate-scale-in",style:{animationDelay:"0.3s"},children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full",children:c.jsx(St,{className:"text-primary"})}),c.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"For Parents and Educators"})]}),c.jsx("p",{className:"mb-4 text-white/90",children:"LifePath can be a valuable tool in both home and classroom settings. The scenarios provide natural opportunities to discuss important life topics with young people and reinforce critical thinking skills."}),c.jsx("p",{className:"text-white/90",children:"Educators can use LifePath as a starting point for discussions about personal finance, ethics, social dynamics, and more. The game's outcomes can spark meaningful conversations about values, priorities, and life skills."})]}),c.jsxs(Ie,{className:"bg-gradient-to-r from-primary/10 to-accent/10 border-white/20 p-6 backdrop-blur-sm animate-scale-in",style:{animationDelay:"0.4s"},children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-sm rounded-full",children:c.jsx(zl,{className:"text-neon-pink"})}),c.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"My Mission"})]}),c.jsx("p",{className:"mb-4 text-white/90",children:"Hi, Im Saransh Gupta from VIT Bhopal University, and Im building LifePath  a web-based interactive simulator that helps teenagers build real-life decision-making skills through immersive storytelling. In todays rapidly evolving digital world, theres a serious lack of engaging tools that actually prepare kids for life. LifePath fills that gap by transforming critical topics like money, ethics, relationships, and pressure into fun, story-based experiences. My mission is to craft a meaningful platform where students dont just play  they grow, reflect, and prepare for the real world, one decision at a time."})]})]})]})};function F4(t){const e=t+"CollectionProvider",[n,s]=_s(e),[r,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=w=>{const{scope:x,children:v}=w,b=Zr.useRef(null),_=Zr.useRef(new Map).current;return c.jsx(r,{scope:x,itemMap:_,collectionRef:b,children:v})};a.displayName=e;const o=t+"CollectionSlot",l=$u(o),u=Zr.forwardRef((w,x)=>{const{scope:v,children:b}=w,_=i(o,v),C=Qe(x,_.collectionRef);return c.jsx(l,{ref:C,children:b})});u.displayName=o;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=$u(h),p=Zr.forwardRef((w,x)=>{const{scope:v,children:b,..._}=w,C=Zr.useRef(null),P=Qe(x,C),M=i(h,v);return Zr.useEffect(()=>(M.itemMap.set(C,{ref:C,..._}),()=>void M.itemMap.delete(C))),c.jsx(m,{[f]:"",ref:P,children:b})});p.displayName=h;function E(w){const x=i(t+"CollectionConsumer",w);return Zr.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((M,A)=>_.indexOf(M.ref.current)-_.indexOf(A.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:u,ItemSlot:p},E,s]}var yv="rovingFocusGroup.onEntryFocus",Jte={bubbles:!1,cancelable:!0},dh="RovingFocusGroup",[xb,B4,ene]=F4(dh),[tne,z4]=_s(dh,[ene]),[nne,sne]=tne(dh),H4=y.forwardRef((t,e)=>c.jsx(xb.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(xb.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(rne,{...t,ref:e})})}));H4.displayName=dh;var rne=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=y.useRef(null),p=Qe(e,m),E=Zw(i),[w,x]=Bd({prop:a,defaultProp:o??null,onChange:l,caller:dh}),[v,b]=y.useState(!1),_=wt(u),C=B4(n),P=y.useRef(!1),[M,A]=y.useState(0);return y.useEffect(()=>{const S=m.current;if(S)return S.addEventListener(yv,_),()=>S.removeEventListener(yv,_)},[_]),c.jsx(nne,{scope:n,orientation:s,dir:E,loop:r,currentTabStopId:w,onItemFocus:y.useCallback(S=>x(S),[x]),onItemShiftTab:y.useCallback(()=>b(!0),[]),onFocusableItemAdd:y.useCallback(()=>A(S=>S+1),[]),onFocusableItemRemove:y.useCallback(()=>A(S=>S-1),[]),children:c.jsx(we.div,{tabIndex:v||M===0?-1:0,"data-orientation":s,...f,ref:p,style:{outline:"none",...t.style},onMouseDown:fe(t.onMouseDown,()=>{P.current=!0}),onFocus:fe(t.onFocus,S=>{const N=!P.current;if(S.target===S.currentTarget&&N&&!v){const R=new CustomEvent(yv,Jte);if(S.currentTarget.dispatchEvent(R),!R.defaultPrevented){const j=C().filter(L=>L.focusable),k=j.find(L=>L.active),I=j.find(L=>L.id===w),$=[k,I,...j].filter(Boolean).map(L=>L.ref.current);$4($,h)}}P.current=!1}),onBlur:fe(t.onBlur,()=>b(!1))})})}),q4="RovingFocusGroupItem",G4=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,children:a,...o}=t,l=nl(),u=i||l,h=sne(q4,n),f=h.currentTabStopId===u,m=B4(n),{onFocusableItemAdd:p,onFocusableItemRemove:E,currentTabStopId:w}=h;return y.useEffect(()=>{if(s)return p(),()=>E()},[s,p,E]),c.jsx(xb.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:c.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:fe(t.onMouseDown,x=>{s?h.onItemFocus(u):x.preventDefault()}),onFocus:fe(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:fe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){h.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=one(x,h.orientation,h.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=m().filter(C=>C.focusable).map(C=>C.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const C=_.indexOf(x.currentTarget);_=h.loop?lne(_,C+1):_.slice(C+1)}setTimeout(()=>$4(_))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:w!=null}):a})})});G4.displayName=q4;var ine={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ane(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function one(t,e,n){const s=ane(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return ine[s]}function $4(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function lne(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var cne=H4,une=G4,Sg="Tabs",[dne,bse]=_s(Sg,[z4]),Y4=z4(),[hne,G_]=dne(Sg),K4=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:l="automatic",...u}=t,h=Zw(o),[f,m]=Bd({prop:s,onChange:r,defaultProp:i??"",caller:Sg});return c.jsx(hne,{scope:n,baseId:nl(),value:f,onValueChange:m,orientation:a,dir:h,activationMode:l,children:c.jsx(we.div,{dir:h,"data-orientation":a,...u,ref:e})})});K4.displayName=Sg;var W4="TabsList",Q4=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:s=!0,...r}=t,i=G_(W4,n),a=Y4(n);return c.jsx(cne,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:s,children:c.jsx(we.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});Q4.displayName=W4;var X4="TabsTrigger",Z4=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...i}=t,a=G_(X4,n),o=Y4(n),l=tV(a.baseId,s),u=nV(a.baseId,s),h=s===a.value;return c.jsx(une,{asChild:!0,...o,focusable:!r,active:h,children:c.jsx(we.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...i,ref:e,onMouseDown:fe(t.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?a.onValueChange(s):f.preventDefault()}),onKeyDown:fe(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(s)}),onFocus:fe(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!r&&f&&a.onValueChange(s)})})})});Z4.displayName=X4;var J4="TabsContent",eV=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:s,forceMount:r,children:i,...a}=t,o=G_(J4,n),l=tV(o.baseId,s),u=nV(o.baseId,s),h=s===o.value,f=y.useRef(h);return y.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),c.jsx(Ts,{present:r||h,children:({present:m})=>c.jsx(we.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});eV.displayName=J4;function tV(t,e){return`${t}-trigger-${e}`}function nV(t,e){return`${t}-content-${e}`}var fne=K4,sV=Q4,rV=Z4,iV=eV;const mne=fne,aV=y.forwardRef(({className:t,...e},n)=>c.jsx(sV,{ref:n,className:me("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));aV.displayName=sV.displayName;const wb=y.forwardRef(({className:t,...e},n)=>c.jsx(rV,{ref:n,className:me("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));wb.displayName=rV.displayName;const _b=y.forwardRef(({className:t,...e},n)=>c.jsx(iV,{ref:n,className:me("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));_b.displayName=iV.displayName;const pne=({open:t,onSelectRole:e,onClose:n})=>c.jsx(yg,{open:t,onOpenChange:n,children:c.jsxs(rh,{className:"bg-gradient-to-br from-indigo-900/80 to-purple-900/80 border border-white/10 backdrop-blur-md max-w-md mx-auto",children:[c.jsxs("button",{onClick:n,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(Qw,{className:"h-4 w-4 text-white"}),c.jsx("span",{className:"sr-only",children:"Close"})]}),c.jsxs(ih,{className:"pb-2",children:[c.jsx(ah,{className:"text-white text-xl text-center",children:"Select Your Role"}),c.jsx(bg,{className:"text-white/70 text-center",children:"Choose your role to personalize your LifePath experience"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[c.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-lg p-5 flex flex-col items-center cursor-pointer hover:border-blue-300/50 hover:bg-black/40 transition-all",onClick:()=>e("student"),"aria-label":"Select Student Role",role:"button",tabIndex:0,children:[c.jsx("div",{className:"p-3 bg-blue-500/20 rounded-full w-16 h-16 flex items-center justify-center mb-3",children:c.jsx(Ws,{className:"text-blue-300 h-8 w-8"})}),c.jsx("h3",{className:"font-bold text-lg text-white",children:"Student"}),c.jsx("p",{className:"text-white/70 text-center mt-2 text-sm",children:"Join classrooms and participate in interactive scenarios"})]}),c.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-lg p-5 flex flex-col items-center cursor-pointer hover:border-blue-300/50 hover:bg-black/40 transition-all",onClick:()=>e("teacher"),"aria-label":"Select Teacher Role",role:"button",tabIndex:0,children:[c.jsx("div",{className:"p-3 bg-blue-500/20 rounded-full w-16 h-16 flex items-center justify-center mb-3",children:c.jsx(fs,{className:"text-blue-300 h-8 w-8"})}),c.jsx("h3",{className:"font-bold text-lg text-white",children:"Teacher"}),c.jsx("p",{className:"text-white/70 text-center mt-2 text-sm",children:"Create classrooms and assign scenarios to students"})]})]}),c.jsx(vg,{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:c.jsxs(ee,{variant:"outline",onClick:()=>e("guest"),className:"border-white/20 text-white hover:bg-black/30 w-full sm:w-auto",children:[c.jsx(_r,{className:"mr-2 h-4 w-4"}),"Continue as Guest"]})})]})}),gne=()=>{const[t,e]=y.useState(""),[n,s]=y.useState(""),[r,i]=y.useState(""),[a,o]=y.useState(!1),[l,u]=y.useState(!1),[h,f]=y.useState(null),[m,p]=y.useState(!1),[E,w]=y.useState(null),x=ea(),{toast:v}=er(),{setGameMode:b}=zr(),{login:_,signup:C,currentUser:P,userProfile:M,getUserProfile:A,createUserProfile:S,refreshUserProfile:N}=tr();y.useEffect(()=>{P&&M&&!l&&(M.role==="teacher"?(b("classroom"),x("/teacher")):x("/profile"))},[P,M,l,x,b]);const R=async $=>{if($.preventDefault(),!t||!n){v({title:"Error",description:"Please enter your email and password.",variant:"destructive"});return}try{o(!0),await _(t,n),v({title:"Welcome back!",description:"You've successfully logged in."})}catch(L){v({title:"Login failed",description:L.message||"Invalid credentials. Please try again.",variant:"destructive"})}finally{o(!1)}},j=async $=>{if($.preventDefault(),!t||!n||!r){v({title:"Error",description:"Please fill in all fields.",variant:"destructive"});return}f({email:t,password:n,displayName:r}),p(!1),u(!0)},k=async $=>{o(!0);try{if(m&&E){const L=E.uid;await S(L,{displayName:E.displayName||"",username:E.displayName||"",email:E.email||"",role:$}),await N(),v({title:"Account created",description:"Your Google account has been set up successfully."}),$==="teacher"?(b("classroom"),x("/teacher")):x("/profile")}else h&&(await C(h.email,h.password,h.displayName,$),v({title:"Account created",description:"Your account has been created successfully."}),$==="teacher"?(b("classroom"),x("/teacher")):x("/profile"))}catch(L){v({title:"Signup failed",description:L.message||"Failed to create your account. Please try again.",variant:"destructive"})}finally{o(!1),u(!1),w(null)}},I=async()=>{try{o(!0);const L=(await VK()).user,G=await A(L.uid);!G||!G.role?(w({uid:L.uid,displayName:L.displayName,email:L.email}),p(!0),u(!0)):(v({title:"Welcome!",description:`You're logged in as ${G.displayName||G.email}`}),await N(),G.role==="teacher"?(b("classroom"),x("/teacher")):x("/profile"))}catch($){v({title:"Google login failed",description:$.message||"Failed to log in with Google. Please try again.",variant:"destructive"})}finally{o(!1)}},H=async()=>{v({title:"Guest Login",description:"Guest login is not implemented yet."}),x("/")};return c.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4",children:[c.jsxs(Ie,{className:"w-full max-w-md border-none bg-black/40 backdrop-blur shadow-lg",children:[c.jsxs(_t,{children:[c.jsx(Ft,{className:"text-2xl font-bold text-center text-white",children:"Welcome to LifePath"}),c.jsx(vn,{className:"text-center text-white/70",children:"Sign in or create an account to track your progress"})]}),c.jsx(ze,{children:c.jsxs(mne,{defaultValue:"login",className:"w-full",children:[c.jsxs(aV,{className:"grid w-full grid-cols-2 mb-4 bg-black/20 border-white/10",children:[c.jsx(wb,{value:"login",className:"data-[state=active]:bg-primary/20",children:"Login"}),c.jsx(wb,{value:"signup",className:"data-[state=active]:bg-primary/20",children:"Sign Up"})]}),c.jsx(_b,{value:"login",children:c.jsxs("form",{onSubmit:R,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"login-email",className:"text-sm font-medium text-white",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx(HA,{className:"absolute left-3 top-2.5 h-5 w-5 text-white/40"}),c.jsx(ds,{id:"login-email",type:"email",placeholder:"your.email@example.com",value:t,onChange:$=>e($.target.value),className:"pl-10 bg-black/20 border-white/20 text-white placeholder:text-white/30"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{htmlFor:"login-password",className:"text-sm font-medium text-white",children:"Password"}),c.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80",children:"Forgot password?"})]}),c.jsx(ds,{id:"login-password",type:"password",placeholder:"",value:n,onChange:$=>s($.target.value),className:"bg-black/20 border-white/20 text-white placeholder:text-white/30"})]}),c.jsx(ee,{type:"submit",className:"w-full bg-primary hover:bg-primary/90",disabled:a,children:a?c.jsx("div",{className:"h-5 w-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[c.jsx(Wk,{className:"mr-2 h-4 w-4"}),"Sign In"]})})]})}),c.jsx(_b,{value:"signup",children:c.jsxs("form",{onSubmit:j,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"signup-name",className:"text-sm font-medium text-white",children:"Display Name"}),c.jsx(ds,{id:"signup-name",type:"text",placeholder:"Your Name",value:r,onChange:$=>i($.target.value),className:"bg-black/20 border-white/20 text-white placeholder:text-white/30"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"signup-email",className:"text-sm font-medium text-white",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx(HA,{className:"absolute left-3 top-2.5 h-5 w-5 text-white/40"}),c.jsx(ds,{id:"signup-email",type:"email",placeholder:"your.email@example.com",value:t,onChange:$=>e($.target.value),className:"pl-10 bg-black/20 border-white/20 text-white placeholder:text-white/30"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"signup-password",className:"text-sm font-medium text-white",children:"Password"}),c.jsx(ds,{id:"signup-password",type:"password",placeholder:"",value:n,onChange:$=>s($.target.value),className:"bg-black/20 border-white/20 text-white placeholder:text-white/30"})]}),c.jsx(ee,{type:"submit",className:"w-full bg-primary hover:bg-primary/90",disabled:a,children:a?c.jsx("div",{className:"h-5 w-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[c.jsx(Jk,{className:"mr-2 h-4 w-4"}),"Create Account"]})})]})})]})}),c.jsxs(vc,{className:"flex flex-col space-y-3",children:[c.jsxs("div",{className:"relative w-full mb-2",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-white/10"})}),c.jsx("div",{className:"relative flex justify-center text-xs",children:c.jsx("span",{className:"bg-black/70 px-2 text-white/50",children:"or continue with"})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[c.jsxs(ee,{variant:"outline",className:"border-white/20 text-white bg-black/30 hover:bg-white/10",onClick:I,disabled:a,children:[c.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 mr-2","aria-hidden":"true",children:[c.jsx("path",{d:"M12.0003 4.75C13.7703 4.75 15.3553 5.36002 16.6053 6.54998L20.0303 3.125C17.9502 1.19 15.2353 0 12.0003 0C7.31028 0 3.25527 2.69 1.28027 6.60998L5.27028 9.70498C6.21525 6.86002 8.87028 4.75 12.0003 4.75Z",fill:"#EA4335"}),c.jsx("path",{d:"M23.49 12.275C23.49 11.49 23.415 10.73 23.3 10H12V14.51H18.47C18.18 15.99 17.34 17.25 16.08 18.1L19.945 21.1C22.2 19.01 23.49 15.92 23.49 12.275Z",fill:"#4285F4"}),c.jsx("path",{d:"M5.26498 14.2949C5.02498 13.5699 4.88501 12.7999 4.88501 11.9999C4.88501 11.1999 5.01998 10.4299 5.26498 9.7049L1.275 6.60986C0.46 8.22986 0 10.0599 0 11.9999C0 13.9399 0.46 15.7699 1.28 17.3899L5.26498 14.2949Z",fill:"#FBBC05"}),c.jsx("path",{d:"M12.0004 24C15.2404 24 17.9654 22.935 19.9454 21.095L16.0804 18.095C15.0054 18.82 13.6204 19.245 12.0004 19.245C8.8704 19.245 6.21537 17.135 5.2654 14.29L1.27539 17.385C3.25539 21.31 7.3104 24 12.0004 24Z",fill:"#34A853"})]}),"Google"]}),c.jsxs(ee,{variant:"outline",className:"border-white/20 text-white bg-black/30 hover:bg-white/10",onClick:H,disabled:a,children:[c.jsx(sW,{className:"h-5 w-5 mr-2"}),"Guest"]})]})]})]}),c.jsx(pne,{open:l,onSelectRole:k,onClose:()=>{u(!1),w(null)}})]})},yne=({history:t,open:e,onClose:n})=>{var i;if(!t)return null;const s=t.completedAt?cd(t.completedAt):new Date,r=((i=t.choices)==null?void 0:i.length)||0;return c.jsx(yg,{open:e,onOpenChange:n,children:c.jsxs(rh,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-slate-900/95 to-slate-800/95 border-slate-700/50 backdrop-blur-sm",children:[c.jsx(ih,{className:"pb-4",children:c.jsxs(ah,{className:"text-2xl font-bold text-white flex items-center gap-2",children:[c.jsx(ud,{className:"h-6 w-6 text-yellow-500"}),t.scenarioTitle]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(Ie,{className:"bg-black/30 border-slate-600/30",children:c.jsxs(ze,{className:"p-4 flex items-center gap-3",children:[c.jsx(Qs,{className:"h-8 w-8 text-blue-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-slate-400",children:"Completed"}),c.jsx("p",{className:"text-white font-medium",children:s.toLocaleDateString()})]})]})}),c.jsx(Ie,{className:"bg-black/30 border-slate-600/30",children:c.jsxs(ze,{className:"p-4 flex items-center gap-3",children:[c.jsx(Ws,{className:"h-8 w-8 text-green-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-slate-400",children:"Choices Made"}),c.jsx("p",{className:"text-white font-medium",children:r})]})]})}),c.jsx(Ie,{className:"bg-black/30 border-slate-600/30",children:c.jsxs(ze,{className:"p-4 flex items-center gap-3",children:[c.jsx(Hl,{className:"h-8 w-8 text-purple-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-slate-400",children:"Final Score"}),c.jsx("p",{className:"text-white font-medium",children:Object.values(t.finalMetrics||{}).reduce((a,o)=>a+o,0)})]})]})})]}),t.finalMetrics&&c.jsxs(Ie,{className:"bg-black/30 border-slate-600/30",children:[c.jsx(_t,{children:c.jsxs(Ft,{className:"text-white flex items-center gap-2",children:[c.jsx(Hl,{className:"h-5 w-5 text-primary"}),"Final Metrics"]})}),c.jsx(ze,{children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(t.finalMetrics).map(([a,o])=>{let l="",u="";switch(a){case"health":l="text-red-400 bg-red-500/20",u="";break;case"money":l="text-green-400 bg-green-500/20",u="";break;case"happiness":l="text-yellow-400 bg-yellow-500/20",u="";break;case"knowledge":l="text-blue-400 bg-blue-500/20",u="";break;case"relationships":l="text-purple-400 bg-purple-500/20",u="";break;default:l="text-gray-400 bg-gray-500/20",u=""}return c.jsxs("div",{className:`p-3 rounded-lg ${l}`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{children:u}),c.jsx("span",{className:"text-sm font-medium capitalize",children:a})]}),c.jsx("div",{className:"text-2xl font-bold",children:o})]},a)})})})]}),t.choices&&t.choices.length>0&&c.jsxs(Ie,{className:"bg-black/30 border-slate-600/30",children:[c.jsx(_t,{children:c.jsxs(Ft,{className:"text-white flex items-center gap-2",children:[c.jsx(Ws,{className:"h-5 w-5 text-primary"}),"Your Journey (",t.choices.length," choices)"]})}),c.jsx(ze,{className:"space-y-4",children:t.choices.map((a,o)=>c.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700/30",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs(Oe,{className:"bg-primary/20 text-primary border-0",children:["Choice ",o+1]}),c.jsx("span",{className:"text-xs text-slate-400",children:a.timestamp?cd(a.timestamp).toLocaleString():"Unknown time"})]}),c.jsx("p",{className:"text-white mb-3",children:a.choiceText}),a.metricChanges&&Object.keys(a.metricChanges).length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Impact:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(a.metricChanges).map(([l,u])=>{if(!u)return null;let h="",f="";switch(l){case"health":h=u>0?"text-red-300 bg-red-500/20":"text-red-500 bg-red-500/10",f="";break;case"money":h=u>0?"text-green-300 bg-green-500/20":"text-green-500 bg-green-500/10",f="";break;case"happiness":h=u>0?"text-yellow-300 bg-yellow-500/20":"text-yellow-500 bg-yellow-500/10",f="";break;case"knowledge":h=u>0?"text-blue-300 bg-blue-500/20":"text-blue-500 bg-blue-500/10",f="";break;case"relationships":h=u>0?"text-purple-300 bg-purple-500/20":"text-purple-500 bg-purple-500/10",f="";break;default:h=u>0?"text-gray-300 bg-gray-500/20":"text-gray-500 bg-gray-500/10",f=""}return c.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${h} flex items-center gap-1`,children:[c.jsx("span",{children:f}),c.jsx("span",{className:"capitalize",children:l}),c.jsxs("span",{children:[u>0?"+":"",u]})]},l)})})]})]},o))})]})]})]})})},vne=({scenarioHistory:t,userLevel:e,userXp:n})=>{const s=()=>t.reduce((h,f)=>f.finalMetrics?h+Object.values(f.finalMetrics).reduce((m,p)=>m+p,0):h,0),r=()=>t.length===0?0:Math.round(s()/t.length),a=(()=>{if(t.length===0)return{health:0,money:0,happiness:0,knowledge:0,relationships:0};const h=t.reduce((f,m)=>(m.finalMetrics&&Object.entries(m.finalMetrics).forEach(([p,E])=>{f[p]=(f[p]||0)+E}),f),{});return Object.fromEntries(Object.entries(h).map(([f,m])=>[f,Math.round(m/t.length)]))})(),o=n%100,l={health:zl,money:Ww,happiness:us,knowledge:Bl,relationships:St},u={health:"text-red-400 bg-red-500/20 border-red-500/30",money:"text-green-400 bg-green-500/20 border-green-500/30",happiness:"text-yellow-400 bg-yellow-500/20 border-yellow-500/30",knowledge:"text-blue-400 bg-blue-500/20 border-blue-500/30",relationships:"text-purple-400 bg-purple-500/20 border-purple-500/30"};return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c.jsx(Ie,{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/30 backdrop-blur-sm col-span-1 md:col-span-2",children:c.jsxs(ze,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 bg-yellow-500/20 rounded-full",children:c.jsx(ud,{className:"h-6 w-6 text-yellow-400"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",e]}),c.jsxs("div",{className:"text-yellow-300 text-sm",children:[n," XP Total"]})]})]}),c.jsxs(Oe,{className:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30 px-3 py-1",children:[c.jsx(No,{className:"h-3 w-3 mr-1"}),"Active"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{className:"text-white/70",children:["Progress to Level ",e+1]}),c.jsxs("span",{className:"text-yellow-300 font-medium",children:[o,"/100 XP"]})]}),c.jsx(hd,{value:o,className:"h-2 bg-slate-700"})]})]})}),c.jsx(Ie,{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 border-blue-500/30 backdrop-blur-sm",children:c.jsxs(ze,{className:"p-6 text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-3",children:c.jsx("div",{className:"p-3 bg-blue-500/20 rounded-full",children:c.jsx(Ws,{className:"h-6 w-6 text-blue-400"})})}),c.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:t.length}),c.jsx("div",{className:"text-blue-300 text-sm",children:"Scenarios Completed"})]})}),c.jsx(Ie,{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 border-green-500/30 backdrop-blur-sm",children:c.jsxs(ze,{className:"p-6 text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-3",children:c.jsx("div",{className:"p-3 bg-green-500/20 rounded-full",children:c.jsx(oW,{className:"h-6 w-6 text-green-400"})})}),c.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:r()}),c.jsx("div",{className:"text-green-300 text-sm",children:"Average Score"})]})}),c.jsx(Ie,{className:"bg-gradient-to-br from-slate-800/60 to-slate-700/60 border-slate-600/50 backdrop-blur-sm col-span-1 md:col-span-2 lg:col-span-4",children:c.jsxs(ze,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:c.jsx(Hl,{className:"h-5 w-5 text-purple-400"})}),c.jsx("h3",{className:"text-xl font-bold text-white",children:"Decision Metrics"}),c.jsx(Oe,{className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:"Average Performance"})]}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(a).map(([h,f])=>{const m=l[h],p=u[h],E=Math.min(f/120*100,100);return c.jsxs("div",{className:`bg-slate-700/40 rounded-xl p-4 border ${p.split(" ")[2]}`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("div",{className:`p-2 rounded-full ${p.split(" ")[1]}`,children:c.jsx(m,{className:`h-4 w-4 ${p.split(" ")[0]}`})}),c.jsx("span",{className:"text-white font-medium capitalize text-sm",children:h})]}),c.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:f}),c.jsx(hd,{value:E,className:"h-2 bg-slate-600"}),c.jsxs("div",{className:"text-xs text-white/60 mt-1",children:[E.toFixed(0),"% optimal"]})]},h)})}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"p-4 bg-slate-700/30 rounded-full w-fit mx-auto mb-4",children:c.jsx(Ym,{className:"h-8 w-8 text-slate-500"})}),c.jsx("div",{className:"text-slate-400 text-lg font-medium mb-2",children:"No metrics yet"}),c.jsx("div",{className:"text-slate-500",children:"Complete scenarios to see your decision patterns"})]})]})})]})},bne=()=>{var P,M;const{userProfile:t,currentUser:e,logout:n}=tr(),[s,r]=y.useState([]),[i,a]=y.useState(!0),[o,l]=y.useState([]),[u,h]=y.useState(!0),[f,m]=y.useState(null),[p,E]=y.useState(!1);y.useEffect(()=>{e&&t&&(w(),x())},[e,t]);const w=async()=>{if(!(!e||!t))try{a(!0);let A=[];t.role==="student"?A=await cg(e.uid,"student"):t.role==="teacher"&&(A=await Lk(e.uid)),r(A)}catch(A){console.error("Error fetching classrooms:",A)}finally{a(!1)}},x=async()=>{if(e)try{h(!0);const A=[{scenarioId:"financial-literacy",scenarioTitle:"Financial Literacy Challenge",startedAt:new Date(Date.now()-1728e5),completedAt:new Date(Date.now()-1728e5+36e5),choices:[{sceneId:"scene1",choiceId:"choice1",choiceText:"Invest in index funds for long-term growth",timestamp:new Date(Date.now()-1728e5+9e5),metricChanges:{money:50,knowledge:15}},{sceneId:"scene2",choiceId:"choice2",choiceText:"Open a high-yield savings account",timestamp:new Date(Date.now()-1728e5+18e5),metricChanges:{money:20,happiness:10}}],finalMetrics:{health:85,money:120,happiness:80,knowledge:95,relationships:75}}];l(A)}catch(A){console.error("Error fetching scenario history:",A)}finally{h(!1)}},v=async()=>{try{await n()}catch(A){console.error("Error logging out:",A)}},b=A=>{m(A),E(!0)},_=()=>{E(!1),m(null)},C=A=>A instanceof Date?A.toLocaleDateString():cd(A).toLocaleDateString();return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:c.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[c.jsxs("div",{className:"text-center sm:text-left mb-4 sm:mb-0",children:[c.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-3",children:"My Profile"}),c.jsx("p",{className:"text-slate-300 text-lg",children:"Track your learning journey and celebrate your achievements"})]}),c.jsxs(ee,{onClick:v,variant:"outline",className:"border-red-500/40 bg-red-900/30 text-red-300 hover:bg-red-800/40 hover:border-red-400/60 transition-all duration-200 px-6 py-3",children:[c.jsx(Qk,{className:"h-5 w-5 mr-2"}),"Logout"]})]}),t&&c.jsxs(Ie,{className:"bg-gradient-to-r from-slate-800/60 to-slate-700/60 border-slate-600/50 backdrop-blur-lg mb-8 shadow-2xl overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-pink-500/5"}),c.jsx(_t,{className:"relative pb-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Tg,{className:"h-24 w-24 border-4 border-gradient-to-r from-blue-500/50 to-purple-500/50 shadow-2xl",children:c.jsx(Eg,{className:"bg-gradient-to-br from-purple-500/40 to-blue-500/40 text-white text-2xl font-bold",children:((M=(P=t.username)==null?void 0:P.charAt(0))==null?void 0:M.toUpperCase())||"U"})}),c.jsx("div",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-2",children:c.jsx(pn,{className:"h-4 w-4 text-white"})})]}),c.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[c.jsx("div",{className:"text-white font-bold text-3xl mb-2",children:t.username}),c.jsx("div",{className:"text-slate-300 text-lg mb-4",children:t.email}),c.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-start items-center gap-4",children:[c.jsxs(Oe,{className:"bg-gradient-to-r from-blue-500/30 to-purple-500/30 text-blue-200 border-blue-400/30 px-4 py-2 text-sm font-medium",children:[c.jsx($k,{className:"h-4 w-4 mr-2"}),t.role]}),c.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-full px-4 py-2 border border-yellow-400/30",children:[c.jsx(ud,{className:"h-4 w-4 text-yellow-400"}),c.jsxs("span",{className:"text-yellow-200 font-semibold",children:["Level ",t.level||1]})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-700/50 rounded-full px-4 py-2 border border-slate-600/50",children:[c.jsx(Hl,{className:"h-4 w-4 text-green-400"}),c.jsxs("span",{className:"text-slate-300 font-medium",children:[t.xp||0," XP"]})]})]})]})]})})]}),c.jsx(vne,{scenarioHistory:o,userLevel:(t==null?void 0:t.level)||1,userXp:(t==null?void 0:t.xp)||0}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[c.jsxs(Ie,{className:"bg-slate-800/50 border-slate-700/50 backdrop-blur-sm shadow-2xl",children:[c.jsxs(_t,{className:"pb-4",children:[c.jsxs(Ft,{className:"text-white flex items-center gap-3 text-xl",children:[c.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:c.jsx(fs,{className:"h-6 w-6 text-green-400"})}),"My Classrooms",c.jsx(Oe,{className:"ml-2 bg-green-500/20 text-green-300 border-green-500/30",children:s.length})]}),c.jsx(vn,{className:"text-slate-400 text-base",children:(t==null?void 0:t.role)==="student"?"Classrooms you've joined and are actively participating in":"Classrooms you've created and are managing"})]}),c.jsx(ze,{children:i?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-400 mx-auto mb-4"}),c.jsx("div",{className:"text-slate-400",children:"Loading your classrooms..."})]}):s.length>0?c.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:s.map(A=>{var S;return c.jsxs("div",{className:"bg-gradient-to-r from-slate-700/40 to-slate-600/40 rounded-xl p-5 border border-slate-600/40 hover:border-slate-500/60 transition-all duration-200 group",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-white font-semibold text-lg mb-1 group-hover:text-blue-300 transition-colors",children:A.name}),A.description&&c.jsx("p",{className:"text-slate-300 text-sm line-clamp-2 mb-2",children:A.description})]}),c.jsx(Oe,{className:"bg-green-500/20 text-green-300 border-green-500/30 ml-3",children:"Active"})]}),c.jsx(dd,{className:"bg-slate-600/50 my-3"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-blue-300",children:[c.jsx(St,{className:"h-4 w-4"}),c.jsxs("span",{className:"font-medium",children:[((S=A.students)==null?void 0:S.length)||0," students"]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-purple-300",children:[c.jsx(Hk,{className:"h-4 w-4"}),c.jsx("span",{children:A.createdAt?C(A.createdAt):"Recently"})]})]})]},A.id)})}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"p-4 bg-slate-700/30 rounded-full w-fit mx-auto mb-4",children:c.jsx(fs,{className:"h-12 w-12 text-slate-500"})}),c.jsx("div",{className:"text-slate-400 mb-2 text-lg font-medium",children:(t==null?void 0:t.role)==="student"?"No classrooms joined yet":"No classrooms created yet"}),c.jsx("div",{className:"text-slate-500",children:(t==null?void 0:t.role)==="student"?"Ask your teacher for a class code to get started":"Create your first classroom to begin teaching"})]})})]}),c.jsxs(Ie,{className:"bg-slate-800/50 border-slate-700/50 backdrop-blur-sm shadow-2xl",children:[c.jsxs(_t,{className:"pb-4",children:[c.jsxs(Ft,{className:"text-white flex items-center gap-3 text-xl",children:[c.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:c.jsx(ud,{className:"h-6 w-6 text-purple-400"})}),"Learning History",c.jsx(Oe,{className:"ml-2 bg-purple-500/20 text-purple-300 border-purple-500/30",children:o.length})]}),c.jsx(vn,{className:"text-slate-400 text-base",children:"Your completed scenarios and achievements in your learning journey"})]}),c.jsx(ze,{children:u?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-400 mx-auto mb-4"}),c.jsx("div",{className:"text-slate-400",children:"Loading your learning history..."})]}):o.length>0?c.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:o.map((A,S)=>{var N;return c.jsxs("div",{className:"bg-gradient-to-r from-slate-700/40 to-slate-600/40 rounded-xl p-5 border border-slate-600/40 hover:border-slate-500/60 transition-all duration-200 group",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-white font-semibold text-lg mb-2 group-hover:text-purple-300 transition-colors",children:A.scenarioTitle}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400 mb-3",children:[c.jsx(Qs,{className:"h-3 w-3"}),c.jsxs("span",{children:["Completed ",A.completedAt?C(A.completedAt):"Recently"]})]})]}),c.jsx(ee,{variant:"outline",size:"sm",onClick:()=>b(A),className:"border-purple-500/40 bg-purple-900/30 text-purple-300 hover:bg-purple-800/40 hover:border-purple-400/60 transition-all",children:"View Details"})]}),c.jsx(dd,{className:"bg-slate-600/50 my-3"}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"text-green-400 font-medium",children:[((N=A.choices)==null?void 0:N.length)||0," decisions made"]}),A.finalMetrics&&c.jsxs("span",{className:"text-yellow-400 font-medium",children:["Total Score: ",Object.values(A.finalMetrics).reduce((R,j)=>R+j,0)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(us,{className:"h-4 w-4 text-yellow-400"}),c.jsx("span",{className:"text-yellow-300 font-medium",children:A.finalMetrics?Math.round(Object.values(A.finalMetrics).reduce((R,j)=>R+j,0)/5):0})]})]})]},S)})}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"p-4 bg-slate-700/30 rounded-full w-fit mx-auto mb-4",children:c.jsx(Ws,{className:"h-12 w-12 text-slate-500"})}),c.jsx("div",{className:"text-slate-400 mb-2 text-lg font-medium",children:"No scenarios completed yet"}),c.jsx("div",{className:"text-slate-500",children:"Start playing scenarios to build your learning history"})]})})]})]}),c.jsx(yne,{history:f,open:p,onClose:_})]})})};var oV="AlertDialog",[xne,xse]=_s(oV,[RM]),Hr=RM(),lV=t=>{const{__scopeAlertDialog:e,...n}=t,s=Hr(e);return c.jsx(qM,{...s,...n,modal:!0})};lV.displayName=oV;var wne="AlertDialogTrigger",cV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=Hr(n);return c.jsx(LQ,{...r,...s,ref:e})});cV.displayName=wne;var _ne="AlertDialogPortal",uV=t=>{const{__scopeAlertDialog:e,...n}=t,s=Hr(e);return c.jsx(GM,{...s,...n})};uV.displayName=_ne;var Tne="AlertDialogOverlay",dV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=Hr(n);return c.jsx(a_,{...r,...s,ref:e})});dV.displayName=Tne;var ul="AlertDialogContent",[Ene,Sne]=xne(ul),Ane=II("AlertDialogContent"),hV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:s,...r}=t,i=Hr(n),a=y.useRef(null),o=Qe(e,a),l=y.useRef(null);return c.jsx(kQ,{contentName:ul,titleName:fV,docsSlug:"alert-dialog",children:c.jsx(Ene,{scope:n,cancelRef:l,children:c.jsxs(o_,{role:"alertdialog",...i,...r,ref:o,onOpenAutoFocus:fe(r.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=l.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c.jsx(Ane,{children:s}),c.jsx(Rne,{contentRef:a})]})})})});hV.displayName=ul;var fV="AlertDialogTitle",mV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=Hr(n);return c.jsx(l_,{...r,...s,ref:e})});mV.displayName=fV;var pV="AlertDialogDescription",gV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=Hr(n);return c.jsx(c_,{...r,...s,ref:e})});gV.displayName=pV;var Cne="AlertDialogAction",yV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,r=Hr(n);return c.jsx(u_,{...r,...s,ref:e})});yV.displayName=Cne;var vV="AlertDialogCancel",bV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:r}=Sne(vV,n),i=Hr(n),a=Qe(e,r);return c.jsx(u_,{...i,...s,ref:a})});bV.displayName=vV;var Rne=({contentRef:t})=>{const e=`\`${ul}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ul}\` by passing a \`${pV}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ul}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var s;document.getElementById((s=t.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Nne=lV,Ine=cV,Dne=uV,xV=dV,wV=hV,_V=yV,TV=bV,EV=mV,SV=gV;const AV=Nne,CV=Ine,Pne=Dne,RV=y.forwardRef(({className:t,...e},n)=>c.jsx(xV,{className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));RV.displayName=xV.displayName;const $_=y.forwardRef(({className:t,...e},n)=>c.jsxs(Pne,{children:[c.jsx(RV,{}),c.jsx(wV,{ref:n,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));$_.displayName=wV.displayName;const Y_=({className:t,...e})=>c.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",t),...e});Y_.displayName="AlertDialogHeader";const K_=({className:t,...e})=>c.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});K_.displayName="AlertDialogFooter";const W_=y.forwardRef(({className:t,...e},n)=>c.jsx(EV,{ref:n,className:me("text-lg font-semibold",t),...e}));W_.displayName=EV.displayName;const Q_=y.forwardRef(({className:t,...e},n)=>c.jsx(SV,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Q_.displayName=SV.displayName;const X_=y.forwardRef(({className:t,...e},n)=>c.jsx(_V,{ref:n,className:me(Kw(),t),...e}));X_.displayName=_V.displayName;const Z_=y.forwardRef(({className:t,...e},n)=>c.jsx(TV,{ref:n,className:me(Kw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Z_.displayName=TV.displayName;const jne=({classroom:t,onRefresh:e})=>{const[n,s]=y.useState(!1),[r,i]=y.useState(""),[a,o]=y.useState([]),[l,u]=y.useState(t),[h,f]=y.useState(null),[m,p]=y.useState(!1),{toast:E}=er();y.useEffect(()=>{if(!(t!=null&&t.id))return;console.log("Setting up classroom listener for:",t.id);const C=$w(t.id,P=>{console.log("Classroom updated in real-time:",P),u(P)});return()=>C()},[t==null?void 0:t.id]),y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const P=await lg(t.id);f(P)}catch(P){console.error("Error checking active session:",P)}})()},[t==null?void 0:t.id]),y.useEffect(()=>{l&&l.messages&&o(l.messages)},[l]);const w=()=>{navigator.clipboard.writeText(l.classCode),s(!0),setTimeout(()=>s(!1),2e3),E({title:"Class code copied",description:"Share this code with your students to join."})},x=async()=>{p(!0);try{await e(),E({title:"Refreshed",description:"Classroom data has been updated."})}catch(C){console.error("Error refreshing:",C)}finally{p(!1)}},v=async(C,P)=>{try{await PK(l.id,C),E({title:"Student removed",description:`${P} has been removed from your classroom.`}),e()}catch(M){console.error("Error removing student:",M),E({title:"Error",description:"Failed to remove student. Please try again.",variant:"destructive"})}},b=()=>{if(!r.trim()){E({title:"Empty message",description:"Please enter a message to send.",variant:"destructive"});return}o([{text:r,sentAt:new Date,sender:"teacher"},...a]),E({title:"Message sent",description:"Your message has been sent to all students."}),i("")},_=(l==null?void 0:l.students)||[];return console.log("Current students list:",_),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"font-medium text-white",children:"Classroom Information"}),c.jsxs(ee,{variant:"outline",size:"sm",className:"border-white/20 bg-black/20 text-white hover:bg-white/10",onClick:x,disabled:m,children:[c.jsx(rW,{className:`h-4 w-4 mr-1 ${m?"animate-spin":""}`}),"Refresh"]})]}),c.jsx("div",{className:"bg-black/20 rounded-lg p-4 border border-white/10",children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-white/70 text-sm",children:"Share this code with your students:"}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("code",{className:"bg-black/40 px-3 py-1 rounded text-primary font-mono",children:l.classCode}),c.jsx(ee,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",onClick:w,children:n?c.jsx(ug,{className:"h-4 w-4 text-green-400"}):c.jsx(QK,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Oe,{className:"bg-green-500/20 text-green-300 border-0",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute h-2 w-2 rounded-full bg-green-400 animate-ping"}),c.jsx("div",{className:"relative h-2 w-2 rounded-full bg-green-400"})]}),"Active"]})}),h&&c.jsx(Oe,{className:"bg-blue-500/20 text-blue-300 border-0",children:"Live Session"})]})]})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h3",{className:"font-medium text-white flex items-center gap-1",children:[c.jsx(St,{className:"h-4 w-4 text-primary"}),"Students (",_.length,")"]}),c.jsxs(ee,{variant:"outline",size:"sm",className:"border-white/20 bg-black/20 text-white hover:bg-white/10",children:[c.jsx(Jk,{className:"mr-1 h-4 w-4"}),"Invite"]})]}),_.length>0?c.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-1",children:_.map((C,P)=>{var M,A;return c.jsxs("div",{className:"bg-black/20 rounded-lg p-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tg,{className:"h-8 w-8 border border-white/20",children:c.jsx(Eg,{className:"bg-primary/20 text-white",children:((A=(M=C.name)==null?void 0:M.charAt(0))==null?void 0:A.toUpperCase())||"S"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-white",children:C.name||`Student ${P+1}`}),c.jsxs("div",{className:"text-xs text-white/60",children:["Joined: ",C.joinedAt?cd(C.joinedAt).toLocaleDateString():"Recently"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Oe,{className:`${P%3===0?"bg-green-500/20 text-green-300":P%3===1?"bg-blue-500/20 text-blue-300":"bg-orange-500/20 text-orange-300"} border-0`,children:P%3===0?"Active":P%3===1?"Completed":"Started"}),c.jsxs(AV,{children:[c.jsx(CV,{asChild:!0,children:c.jsx(ee,{variant:"ghost",size:"sm",className:"text-white/70 hover:text-white hover:bg-white/10",children:c.jsx(dW,{className:"h-4 w-4"})})}),c.jsxs($_,{className:"bg-black/90 border border-white/10",children:[c.jsxs(Y_,{children:[c.jsx(W_,{className:"text-white",children:"Remove Student"}),c.jsxs(Q_,{className:"text-white/70",children:["Are you sure you want to remove ",C.name," from your classroom? They will no longer have access to classroom activities."]})]}),c.jsxs(K_,{children:[c.jsx(Z_,{className:"bg-transparent border border-white/10 text-white hover:bg-white/10",children:"Cancel"}),c.jsx(X_,{onClick:()=>v(C.id,C.name),className:"bg-red-500 hover:bg-red-600 text-white",children:"Remove"})]})]})]})]})]},C.id||P)})}):c.jsxs("div",{className:"bg-black/20 rounded-lg p-6 flex flex-col items-center justify-center text-center",children:[c.jsx(St,{className:"h-12 w-12 text-white/30 mb-2"}),c.jsx("h4",{className:"text-white font-medium",children:"No Students Yet"}),c.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Share your class code with students to join your classroom."})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-medium mb-3 text-white flex items-center gap-1",children:[c.jsx(Xk,{className:"h-4 w-4 text-primary"}),"Class Announcement"]}),c.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-white/10",children:[c.jsxs("div",{className:"relative",children:[c.jsx(ds,{placeholder:"Send a message to your class...",value:r,onChange:C=>i(C.target.value),className:"pr-10 bg-black/20 border-white/20 text-white"}),c.jsx(ee,{size:"sm",className:"absolute right-1 top-1 h-7 bg-primary/20 hover:bg-primary/30 text-white",onClick:b,children:c.jsx(aW,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 max-h-[200px] overflow-y-auto",children:a&&a.length>0?c.jsx("div",{className:"space-y-3",children:a.map((C,P)=>c.jsxs("div",{className:"bg-black/20 rounded-md p-3",children:[c.jsx("div",{className:"text-white",children:C.text}),c.jsx("div",{className:"text-xs text-white/50 mt-1",children:C.sentAt?new Date(C.sentAt).toLocaleString():"Just now"})]},P))}):c.jsx("div",{className:"text-sm text-white/70",children:"Recent messages will appear here"})})]})]})]})},kne=()=>{const{scenarios:t,startScenario:e,setGameMode:n}=zr(),{currentUser:s}=tr(),{toast:r}=er(),i=ea(),[a,o]=y.useState([]),[l,u]=y.useState(null),[h,f]=y.useState(!0),[m,p]=y.useState(null),[E,w]=y.useState(null),[x,v]=y.useState(!1),[b,_]=y.useState(""),[C,P]=y.useState(""),[M,A]=y.useState(!1);y.useEffect(()=>{s&&S()},[s]);const S=async()=>{if(s)try{f(!0);const I=await cg(s.uid,"teacher");o(I)}catch(I){console.error("Error loading classrooms:",I),r({title:"Error",description:"Failed to load classrooms. Please try again.",variant:"destructive"})}finally{f(!1)}},N=I=>{e(I),i("/game")},R=async(I,H)=>{if(s){p(I);try{console.log("Attempting to delete classroom:",I),await DK(I,s.uid),o($=>$.filter(L=>L.id!==I)),(l==null?void 0:l.id)===I&&u(null),r({title:"Classroom Deleted",description:`"${H}" has been permanently deleted. All students have been removed and related data cleared.`})}catch($){console.error("Error deleting classroom:",$),r({title:"Error",description:$ instanceof Error?$.message:"Failed to delete classroom. Please try again.",variant:"destructive"})}finally{p(null)}}},j=async()=>{if(!s){r({title:"Login Required",description:"Please login to create a classroom",variant:"destructive"});return}if(!b.trim()){r({title:"Class Name Required",description:"Please enter a name for your classroom",variant:"destructive"});return}A(!0);try{const I=await NK(s.uid,b,C);r({title:"Classroom Created",description:`Your classroom '${b}' has been created successfully with code: ${I.classCode}`}),o(H=>[...H,I]),u(I),_(""),P(""),v(!1)}catch(I){console.error("Error creating classroom:",I),r({title:"Error",description:"Failed to create classroom. Please try again.",variant:"destructive"})}finally{A(!1)}},k=async(I,H)=>{if(!(!s||!I.id)){w(I.id);try{console.log("Starting live session for classroom:",I.id),await bK(I.id,H.id,s.uid,s.displayName||"Teacher",H.title),await S(),r({title:"Live Session Started!",description:`"${H.title}" is now live for ${I.name}`}),n("classroom"),e(H.id),i("/game")}catch($){console.error("Error starting live session:",$),r({title:"Error",description:$ instanceof Error?$.message:"Failed to start live session. Please try again.",variant:"destructive"})}finally{w(null)}}};return c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),c.jsx("p",{className:"text-white/70",children:"Manage your classrooms and scenarios"})]}),c.jsxs(ee,{onClick:()=>v(!0),className:"bg-blue-500 hover:bg-blue-600 text-white",children:[c.jsx(J0,{className:"h-4 w-4 mr-2"}),"Create Classroom"]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[c.jsx(fs,{className:"h-6 w-6 text-primary"}),"Your Classrooms (",a.length,")"]})}),h?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(I=>c.jsxs(Ie,{className:"bg-black/20 border-white/10 animate-pulse",children:[c.jsxs(_t,{children:[c.jsx("div",{className:"h-6 bg-white/10 rounded mb-2"}),c.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"})]}),c.jsxs(ze,{children:[c.jsx("div",{className:"h-4 bg-white/10 rounded mb-4"}),c.jsx("div",{className:"h-10 bg-white/10 rounded"})]})]},I))}):a.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(I=>{var H,$;return c.jsxs(Ie,{className:"bg-black/20 border-white/10 hover:bg-black/30 transition-colors",children:[c.jsx(_t,{children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(Ft,{className:"text-white text-lg",children:I.name}),c.jsx(vn,{className:"text-white/70 mt-1",children:I.description||"No description"})]}),c.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[I.activeSessionId&&c.jsx(Oe,{className:"bg-green-500/20 text-green-300 border-0 text-xs",children:"Live"}),c.jsxs(AV,{children:[c.jsx(CV,{asChild:!0,children:c.jsx(ee,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-900/20 p-1 h-8 w-8",disabled:m===I.id,children:c.jsx(uW,{className:"h-4 w-4"})})}),c.jsxs($_,{className:"bg-black/90 border border-red-500/20",children:[c.jsxs(Y_,{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"p-2 bg-red-500/20 rounded-full",children:c.jsx(hW,{className:"h-5 w-5 text-red-400"})}),c.jsx(W_,{className:"text-white",children:"Delete Classroom"})]}),c.jsxs(Q_,{className:"text-white/70",children:["Are you sure you want to permanently delete ",c.jsxs("strong",{children:['"',I.name,'"']}),"?",c.jsx("br",{}),c.jsx("br",{}),"This action will:",c.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[c.jsxs("li",{children:["Remove all ",((H=I.students)==null?void 0:H.length)||0," students from the classroom"]}),c.jsx("li",{children:"Delete all session data and history"}),c.jsx("li",{children:"Remove the classroom from students' profiles"}),c.jsx("li",{children:"Cannot be undone"})]})]})]}),c.jsxs(K_,{children:[c.jsx(Z_,{className:"bg-transparent border border-white/10 text-white hover:bg-white/10",children:"Cancel"}),c.jsx(X_,{onClick:()=>R(I.id,I.name),className:"bg-red-500 hover:bg-red-600 text-white",disabled:m===I.id,children:m===I.id?"Deleting...":"Delete Permanently"})]})]})]})]})]})}),c.jsx(ze,{children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[c.jsx(St,{className:"h-4 w-4"}),c.jsxs("span",{children:[(($=I.students)==null?void 0:$.length)||0," Students"]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[c.jsx(Hk,{className:"h-4 w-4"}),c.jsx("span",{children:cd(I.createdAt).toLocaleDateString()})]})]}),c.jsxs("div",{className:"text-xs text-white/60 bg-black/30 rounded px-2 py-1 font-mono",children:["Code: ",I.classCode]}),c.jsx("div",{className:"flex gap-2",children:c.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>u(I),className:"flex-1 border-white/20 bg-black/20 text-white hover:bg-white/10",children:[c.jsx(fs,{className:"h-4 w-4 mr-1"}),"Manage"]})})]})})]},I.id)})}):c.jsx(Ie,{className:"bg-black/20 border-white/10",children:c.jsxs(ze,{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(fs,{className:"h-16 w-16 text-white/30 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Classrooms Yet"}),c.jsx("p",{className:"text-white/70 text-center mb-6 max-w-md",children:"Create your first classroom to start teaching interactive scenarios to your students."}),c.jsxs(ee,{onClick:()=>v(!0),className:"bg-primary hover:bg-primary/90",children:[c.jsx(J0,{className:"h-4 w-4 mr-2"}),"Create Your First Classroom"]})]})})]}),l&&c.jsx("div",{className:"mb-8",children:c.jsxs(Ie,{className:"bg-black/20 border-white/10",children:[c.jsx(_t,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs(Ft,{className:"text-white flex items-center gap-2",children:[c.jsx(fs,{className:"h-5 w-5 text-primary"}),l.name]}),c.jsx(vn,{className:"text-white/70",children:"Classroom Management"})]}),c.jsx(ee,{variant:"ghost",onClick:()=>u(null),className:"text-white/70 hover:text-white",children:"Close"})]})}),c.jsx(ze,{children:c.jsx(jne,{classroom:l,onRefresh:S})})]})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 text-white flex items-center gap-2",children:[c.jsx(Ws,{className:"h-6 w-6 text-primary"}),"Available Scenarios"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(I=>c.jsxs(Ie,{className:"bg-black/20 border-white/10 hover:bg-black/30 transition-colors",children:[c.jsxs(_t,{children:[c.jsx(Ft,{className:"text-white",children:I.title}),c.jsx(vn,{className:"text-white/70",children:I.description})]}),c.jsx(ze,{children:c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ee,{onClick:()=>N(I.id),className:"flex-1 bg-primary hover:bg-primary/90",children:[c.jsx(hg,{className:"h-4 w-4 mr-2"}),"Solo Play"]}),l&&c.jsx(ee,{onClick:()=>k(l,I),disabled:E===l.id,className:"flex-1 bg-green-500 hover:bg-green-600",children:E===l.id?c.jsxs(c.Fragment,{children:[c.jsx(Qs,{className:"h-4 w-4 mr-2 animate-spin"}),"Starting..."]}):c.jsxs(c.Fragment,{children:[c.jsx(St,{className:"h-4 w-4 mr-2"}),"Live Session"]})})]})})]},I.id))}),!l&&c.jsx("div",{className:"mt-4 p-4 bg-blue-900/20 rounded-lg border border-blue-500/20",children:c.jsx("p",{className:"text-blue-300 text-sm",children:" Select a classroom above to enable live session options for scenarios"})})]}),c.jsx(yg,{open:x,onOpenChange:v,children:c.jsxs(rh,{children:[c.jsxs(ih,{children:[c.jsx(ah,{children:"Create New Classroom"}),c.jsx(bg,{children:"Enter details for your new classroom"})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-white",children:"Classroom Name"}),c.jsx(ds,{id:"name",value:b,onChange:I=>_(I.target.value),placeholder:"My Awesome Classroom",className:"bg-black/20 border-white/10 text-white"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-white",children:"Description (Optional)"}),c.jsx(ds,{id:"description",value:C,onChange:I=>P(I.target.value),placeholder:"What will students learn in this classroom?",className:"bg-black/20 border-white/10 text-white"})]})]}),c.jsx(vg,{children:c.jsx(ee,{onClick:j,disabled:!b.trim()||M,className:"bg-blue-500 hover:bg-blue-600",children:M?c.jsxs(c.Fragment,{children:[c.jsx(Qs,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Classroom"})})]})})]})},Mne=()=>{const t=Hd();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),c.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var J_="ToastProvider",[eT,One,Vne]=F4("Toast"),[NV,wse]=_s("Toast",[Vne]),[Lne,Ag]=NV(J_),IV=t=>{const{__scopeToast:e,label:n="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:a}=t,[o,l]=y.useState(null),[u,h]=y.useState(0),f=y.useRef(!1),m=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${J_}\`. Expected non-empty \`string\`.`),c.jsx(eT.Provider,{scope:e,children:c.jsx(Lne,{scope:e,label:n,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:o,onViewportChange:l,onToastAdd:y.useCallback(()=>h(p=>p+1),[]),onToastRemove:y.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};IV.displayName=J_;var DV="ToastViewport",Une=["F8"],Tb="toast.viewportPause",Eb="toast.viewportResume",PV=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:s=Une,label:r="Notifications ({hotkey})",...i}=t,a=Ag(DV,n),o=One(n),l=y.useRef(null),u=y.useRef(null),h=y.useRef(null),f=y.useRef(null),m=Qe(e,f,a.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=a.toastCount>0;y.useEffect(()=>{const x=v=>{var _;s.length!==0&&s.every(C=>v[C]||v.code===C)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[s]),y.useEffect(()=>{const x=l.current,v=f.current;if(E&&x&&v){const b=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Tb);v.dispatchEvent(M),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Eb);v.dispatchEvent(M),a.isClosePausedRef.current=!1}},C=M=>{!x.contains(M.relatedTarget)&&_()},P=()=>{x.contains(document.activeElement)||_()};return x.addEventListener("focusin",b),x.addEventListener("focusout",C),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",P),window.addEventListener("blur",b),window.addEventListener("focus",_),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",C),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",P),window.removeEventListener("blur",b),window.removeEventListener("focus",_)}}},[E,a.isClosePausedRef]);const w=y.useCallback(({tabbingDirection:x})=>{const b=o().map(_=>{const C=_.ref.current,P=[C,...Zne(C)];return x==="forwards"?P:P.reverse()});return(x==="forwards"?b.reverse():b).flat()},[o]);return y.useEffect(()=>{const x=f.current;if(x){const v=b=>{var P,M,A;const _=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!_){const S=document.activeElement,N=b.shiftKey;if(b.target===x&&N){(P=u.current)==null||P.focus();return}const k=w({tabbingDirection:N?"backwards":"forwards"}),I=k.findIndex(H=>H===S);vv(k.slice(I+1))?b.preventDefault():N?(M=u.current)==null||M.focus():(A=h.current)==null||A.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[o,w]),c.jsxs(U6,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&c.jsx(Sb,{ref:u,onFocusFromOutsideViewport:()=>{const x=w({tabbingDirection:"forwards"});vv(x)}}),c.jsx(eT.Slot,{scope:n,children:c.jsx(we.ol,{tabIndex:-1,...i,ref:m})}),E&&c.jsx(Sb,{ref:h,onFocusFromOutsideViewport:()=>{const x=w({tabbingDirection:"backwards"});vv(x)}})]})});PV.displayName=DV;var jV="ToastFocusProxy",Sb=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...r}=t,i=Ag(jV,n);return c.jsx(Ap,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(o))&&s()}})});Sb.displayName=jV;var hh="Toast",Fne="toast.swipeStart",Bne="toast.swipeMove",zne="toast.swipeCancel",Hne="toast.swipeEnd",kV=y.forwardRef((t,e)=>{const{forceMount:n,open:s,defaultOpen:r,onOpenChange:i,...a}=t,[o,l]=Bd({prop:s,defaultProp:r??!0,onChange:i,caller:hh});return c.jsx(Ts,{present:n||o,children:c.jsx($ne,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:wt(t.onPause),onResume:wt(t.onResume),onSwipeStart:fe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:fe(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:fe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:fe(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});kV.displayName=hh;var[qne,Gne]=NV(hh,{onClose(){}}),$ne=y.forwardRef((t,e)=>{const{__scopeToast:n,type:s="foreground",duration:r,open:i,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...E}=t,w=Ag(hh,n),[x,v]=y.useState(null),b=Qe(e,H=>v(H)),_=y.useRef(null),C=y.useRef(null),P=r||w.duration,M=y.useRef(0),A=y.useRef(P),S=y.useRef(0),{onToastAdd:N,onToastRemove:R}=w,j=wt(()=>{var $;(x==null?void 0:x.contains(document.activeElement))&&(($=w.viewport)==null||$.focus()),a()}),k=y.useCallback(H=>{!H||H===1/0||(window.clearTimeout(S.current),M.current=new Date().getTime(),S.current=window.setTimeout(j,H))},[j]);y.useEffect(()=>{const H=w.viewport;if(H){const $=()=>{k(A.current),u==null||u()},L=()=>{const G=new Date().getTime()-M.current;A.current=A.current-G,window.clearTimeout(S.current),l==null||l()};return H.addEventListener(Tb,L),H.addEventListener(Eb,$),()=>{H.removeEventListener(Tb,L),H.removeEventListener(Eb,$)}}},[w.viewport,P,l,u,k]),y.useEffect(()=>{i&&!w.isClosePausedRef.current&&k(P)},[i,P,w.isClosePausedRef,k]),y.useEffect(()=>(N(),()=>R()),[N,R]);const I=y.useMemo(()=>x?BV(x):null,[x]);return w.viewport?c.jsxs(c.Fragment,{children:[I&&c.jsx(Yne,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),c.jsx(qne,{scope:n,onClose:j,children:Td.createPortal(c.jsx(eT.ItemSlot,{scope:n,children:c.jsx(L6,{asChild:!0,onEscapeKeyDown:fe(o,()=>{w.isFocusedToastEscapeKeyDownRef.current||j(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":w.swipeDirection,...E,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:fe(t.onKeyDown,H=>{H.key==="Escape"&&(o==null||o(H.nativeEvent),H.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:fe(t.onPointerDown,H=>{H.button===0&&(_.current={x:H.clientX,y:H.clientY})}),onPointerMove:fe(t.onPointerMove,H=>{if(!_.current)return;const $=H.clientX-_.current.x,L=H.clientY-_.current.y,G=!!C.current,q=["left","right"].includes(w.swipeDirection),X=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,Q=q?X(0,$):0,le=q?0:X(0,L),ue=H.pointerType==="touch"?10:2,Z={x:Q,y:le},je={originalEvent:H,delta:Z};G?(C.current=Z,cf(Bne,f,je,{discrete:!1})):_R(Z,w.swipeDirection,ue)?(C.current=Z,cf(Fne,h,je,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs($)>ue||Math.abs(L)>ue)&&(_.current=null)}),onPointerUp:fe(t.onPointerUp,H=>{const $=C.current,L=H.target;if(L.hasPointerCapture(H.pointerId)&&L.releasePointerCapture(H.pointerId),C.current=null,_.current=null,$){const G=H.currentTarget,q={originalEvent:H,delta:$};_R($,w.swipeDirection,w.swipeThreshold)?cf(Hne,p,q,{discrete:!0}):cf(zne,m,q,{discrete:!0}),G.addEventListener("click",X=>X.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),Yne=t=>{const{__scopeToast:e,children:n,...s}=t,r=Ag(hh,e),[i,a]=y.useState(!1),[o,l]=y.useState(!1);return Qne(()=>a(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:c.jsx(Mx,{asChild:!0,children:c.jsx(Ap,{...s,children:i&&c.jsxs(c.Fragment,{children:[r.label," ",n]})})})},Kne="ToastTitle",MV=y.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t;return c.jsx(we.div,{...s,ref:e})});MV.displayName=Kne;var Wne="ToastDescription",OV=y.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t;return c.jsx(we.div,{...s,ref:e})});OV.displayName=Wne;var VV="ToastAction",LV=y.forwardRef((t,e)=>{const{altText:n,...s}=t;return n.trim()?c.jsx(FV,{altText:n,asChild:!0,children:c.jsx(tT,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${VV}\`. Expected non-empty \`string\`.`),null)});LV.displayName=VV;var UV="ToastClose",tT=y.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t,r=Gne(UV,n);return c.jsx(FV,{asChild:!0,children:c.jsx(we.button,{type:"button",...s,ref:e,onClick:fe(t.onClick,r.onClose)})})});tT.displayName=UV;var FV=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:s,...r}=t;return c.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function BV(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),Xne(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...BV(s))}}),e}function cf(t,e,n,{discrete:s}){const r=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?DI(r,i):r.dispatchEvent(i)}var _R=(t,e,n=0)=>{const s=Math.abs(t.x),r=Math.abs(t.y),i=s>r;return e==="left"||e==="right"?i&&s>n:!i&&r>n};function Qne(t=()=>{}){const e=wt(t);Vn(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[e])}function Xne(t){return t.nodeType===t.ELEMENT_NODE}function Zne(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Jne=IV,zV=PV,HV=kV,qV=MV,GV=OV,$V=LV,YV=tT;const ese=Jne,KV=y.forwardRef(({className:t,...e},n)=>c.jsx(zV,{ref:n,className:me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));KV.displayName=zV.displayName;const tse=Yw("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),WV=y.forwardRef(({className:t,variant:e,...n},s)=>c.jsx(HV,{ref:s,className:me(tse({variant:e}),t),...n}));WV.displayName=HV.displayName;const nse=y.forwardRef(({className:t,...e},n)=>c.jsx($V,{ref:n,className:me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));nse.displayName=$V.displayName;const QV=y.forwardRef(({className:t,...e},n)=>c.jsx(YV,{ref:n,className:me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(Qw,{className:"h-4 w-4"})}));QV.displayName=YV.displayName;const XV=y.forwardRef(({className:t,...e},n)=>c.jsx(qV,{ref:n,className:me("text-sm font-semibold",t),...e}));XV.displayName=qV.displayName;const ZV=y.forwardRef(({className:t,...e},n)=>c.jsx(GV,{ref:n,className:me("text-sm opacity-90",t),...e}));ZV.displayName=GV.displayName;function sse(){const{toasts:t}=er();return c.jsxs(ese,{children:[t.map(function({id:e,title:n,description:s,action:r,...i}){return c.jsxs(WV,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(XV,{children:n}),s&&c.jsx(ZV,{children:s})]}),r,c.jsx(QV,{})]},e)}),c.jsx(KV,{})]})}const rse=new NF,ise=()=>c.jsx(DF,{client:rse,children:c.jsx(yD,{children:c.jsx(LK,{children:c.jsxs(FK,{children:[c.jsx(N8,{children:c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-[#1A1F2C] to-purple-900 flex flex-col",children:[c.jsx(fW,{}),c.jsx("main",{className:"flex-1 pb-12",children:c.jsxs(_8,{children:[c.jsx(ti,{path:"/",element:c.jsx(BQ,{})}),c.jsx(ti,{path:"/game",element:c.jsx(Xte,{})}),c.jsx(ti,{path:"/about",element:c.jsx(Zte,{})}),c.jsx(ti,{path:"/auth",element:c.jsx(gne,{})}),c.jsx(ti,{path:"/profile",element:c.jsx(bne,{})}),c.jsx(ti,{path:"/teacher",element:c.jsx(kne,{})}),c.jsx(ti,{path:"*",element:c.jsx(Mne,{})})]})})]})}),c.jsx(sse,{})]})})})});_6.createRoot(document.getElementById("root")).render(c.jsx(ise,{}));
